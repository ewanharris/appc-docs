<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Guide for Arrow SDK</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta content="Scroll EclipseHelp Exporter" name="generator"/>

    <link type="text/css" rel="stylesheet"/>
    <link type="text/css" rel="stylesheet"/>
    <link type="text/css" rel="stylesheet" media="print"/>
</head>
<body>
    <div class="container">
        <div class="header"/>

        <div id="46244860" class="content">
            <h1>Guide for Arrow SDK</h1>
    <div class="section section-2 " id="46244860_GuideforArrowSDK-Introduction">
        <h2 class="heading "><span>Introduction</span></h2>
    <p>
This document will guide you on how to create an Arrow SDK for your target client platform: Android, iOS, Alloy, Titanium, jQuery, or Node.js.    </p>
    </div>
    <div class="section section-2 " id="46244860_GuideforArrowSDK-EnvironmentSetup">
        <h2 class="heading "><span>Environment Setup</span></h2>
    <p>
In order to generate an Arrow SDK for your target client platform, you will need the following on your machine:    </p>
<ul class=" "><li class=" ">    <p>
Node version &gt;= 4.2.X    </p>
<ul class=" "><li class=" ">    <p>
<strong class=" "> <a class="external-link external-link" href="https://nodejs.org/en/" target="_blank">https://nodejs.org/en/</a> </strong>    </p>
</li></ul></li><li class=" ">    <p>
Appc CLI NPM    </p>
<ul class=" "><li class=" ">    <p>
<strong class=" "> <tt class=" ">sudo npm install -g appcelerator</tt> <br/> </strong>    </p>
</li></ul></li><li class=" ">    <p>
Appc CLI Core &gt;= 5.1.0    </p>
<ul class=" "><li class=" ">    <p>
<strong class=" "> <tt class=" ">appc use latest</tt> </strong>    </p>
</li></ul></li><li class=" ">    <p>
Titanium SDK<strong class=" "> <br/> </strong>    </p>
<ul class=" "><li class=" ">    <p>
<tt class=" ">appc ti sdk install latest</tt>    </p>
</li></ul></li></ul>    </div>
    <div class="section section-2 " id="46244860_GuideforArrowSDK-GeneratingArrowSDK">
        <h2 class="heading "><span>Generating Arrow SDK</span></h2>
<ol class=" "><li class=" ">    <p>
In terminal/command prompt, create a new Arrow App: <tt class=" ">appc new</tt>    </p>
<ol class=" "><li class=" ">    <p>
<strong class=" ">Login</strong> using your <strong class=" ">Appcelerator</strong> credentials.    </p>
</li><li class=" ">    <p>
Pick the enterprise organization you belong to.    </p>
</li><li class=" ">    <p>
Select <strong class=" ">Arrow App </strong>from the list of options and follow the prompts to create the app    </p>
</li></ol></li><li class=" ">    <p>
After the Arrow app is created, cd into the Arrow project and install a connector that you would like to use like <tt class=" ">appc install connector/appc.arrowdb</tt>    </p>
<ol class=" "><li class=" ">    <p>
The example below will use the appc.arrowdb connector.    </p>
</li></ol></li><li class=" ">    <p>
Next, run <strong class=" ">appc generate</strong>    </p>
</li><li class=" ">    <p>
Select <strong class=" ">Arrow SDK </strong>from the list of options    </p>
</li><li class=" ">    <p>
The next prompt will ask you to select your target client platform (Alloy, Android, etc.). In this example, lets choose <strong class=" ">Android</strong>.    </p>
</li><li class=" ">    <p>
Specify the name of the SDK. The prompt will provide you with a pre-picked name. Lets stick with that name for now.    </p>
</li><li class=" ">    <p>
Specify the directory where the generated SDK will be created into. The prompt will provide you with a pre-determined directory. Again, lets still with the default.    </p>
</li></ol>    <p>
    </p>
    </div>
    <div class="section section-2 " id="46244860_GuideforArrowSDK-SetupandWorkaroundsforAndroidprojects">
        <h2 class="heading "><span>Setup and Workarounds for Android projects</span></h2>
    <p>
    </p>
    <div class="confbox admonition admonition-note aui-message warning shadowed information-macro">
        
    <p>
The below steps will be using Android Studio since that is the official supported IDE by Google: <a class="external-link external-link" href="http://developer.android.com/sdk/index.html" target="_blank">http://developer.android.com/sdk/index.html</a>    </p>
    </div>
    
<ol class=" "><li class=" ">    <p>
Move the Arrow SDK (<tt class=" ">&lt;arrow dir&gt;/sdk/com/&lt;arrow sdk&gt;</tt>) under the Android com directory (<tt class=" ">&lt;android dir&gt;/app/src/main/java/com</tt>). For example, moving the monkeysdk: <tt class=" ">monkeysk/app/src/main/java/com</tt>    </p>
</li><li class=" ">    <p>
During your project creation, if you set your target SDK to 23 (Android 6.0), then you will need to add the following Gradle configuration in your <strong class=" ">build.gradle</strong> file (<a class="external-link external-link" href="https://jira.appcelerator.org/browse/API-1194" target="_blank">API-1194</a>):    </p>
<ul class=" "><li class=" "><div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">android {</code></div>
<div class="line"><code class="plain">	...</code></div>
<div class="line"><code class="plain">	buildToolsVersion </code><code class="string">"23.0.2"</code></div>
<div class="line"><code class="plain">    useLibrary </code><code class="string">'org.apache.http.legacy'</code></div>
<div class="line"><code class="plain">	...</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div></li><li class=" ">    <p>
        <img src="images/download/attachments/46244860/arrow_sdk2.png" alt="images/download/attachments/46244860/arrow_sdk2.png" class="confluence-embedded-image" width="500"/>
            </p>
</li></ul></li><li class=" ">    <p>
In the <strong class=" ">AndroidManifest.xml </strong>file, you will need to add the <strong class=" ">android.permission.INTERNET </strong>property:    </p>
<ul class=" "><li class=" "><div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">...</code></div>
<div class="line"><code class="plain">&lt;/</code><code class="keyword">application</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">Â </code></div>
<div class="line"><code class="plain">&lt;</code><code class="keyword">uses</code><code class="plain">-permission </code><code class="color1">android:name</code><code class="plain">=</code><code class="string">"android.permission.INTERNET"</code><code class="plain"> /&gt;</code></div>
<div class="line"><code class="plain">...</code></div>
</div>
</div></li><li class=" ">    <p>
        <img src="images/download/attachments/46244860/arrow_sdk3.png" alt="images/download/attachments/46244860/arrow_sdk3.png" class="confluence-embedded-image" width="500"/>
            </p>
</li></ul></li><li class=" ">    <p>
Next, in your custom Arrow SDK, open <strong class=" ">API.java </strong>file and change the import path (<strong class=" ">import com.arrow.CachePolicy.Type;</strong>) to include your custom SDK name; this is to workaround (<a class="external-link external-link" href="https://jira.appcelerator.org/browse/API-1195" target="_blank">API-1195</a>):    </p>
<ul class=" "><li class=" "><div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">...</code></div>
<div class="line"><code class="keyword">import</code><code class="plain"> java.util.Map;</code></div>
<div class="line"><code class="keyword">import</code><code class="plain"> com.monkeysdk.CachePolicy.Type;</code></div>
<div class="line"><code class="plain">...</code></div>
</div>
</div></li><li class=" ">    <p>
        <img src="images/download/attachments/46244860/arrow_sdk4.png" alt="images/download/attachments/46244860/arrow_sdk4.png" class="confluence-embedded-image" width="500"/>
            </p>
</li></ul></li><li class=" ">    <p>
Back in the <strong class=" ">API.java </strong>file, you will need to workaround both <a class="external-link external-link" href="https://jira.appcelerator.org/browse/API-1198" target="_blank">API-1198</a> and <a class="external-link external-link" href="https://jira.appcelerator.org/browse/API-1196" target="_blank">API-1196</a>:    </p>
<ol class=" "><li class=" ">    <p>
Replace this code    </p>
<ul class=" "><li class=" "><div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">InputStream content = entity.getContent();</code></div>
<div class="line"><code class="plain">BufferedReader reader = </code><code class="keyword">new</code><code class="plain"> BufferedReader(</code><code class="keyword">new</code><code class="plain"> InputStreamReader(content));</code></div>
<div class="line"><code class="plain">StringBuilder builder = </code><code class="keyword">new</code><code class="plain"> StringBuilder();</code></div>
<div class="line"><code class="plain">String line;</code></div>
<div class="line"><code class="keyword">while</code><code class="plain"> ((line = reader.readLine()) != </code><code class="keyword">null</code><code class="plain">) {</code></div>
<div class="line"><code class="plain">    builder.append(line);</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="plain">JSONObject json = </code><code class="keyword">new</code><code class="plain"> JSONObject(builder.toString());</code></div>
</div>
</div></li></ul></li><li class=" ">    <p>
With this code    </p>
<ul class=" "><li class=" "><div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">JSONObject json = </code><code class="keyword">null</code><code class="plain">;</code></div>
<div class="line"><code class="keyword">if</code><code class="plain">(entity != </code><code class="keyword">null</code><code class="plain">) {</code></div>
<div class="line"><code class="plain">    InputStream content = entity.getContent();</code></div>
<div class="line"><code class="plain">    BufferedReader reader = </code><code class="keyword">new</code><code class="plain"> BufferedReader(</code><code class="keyword">new</code><code class="plain"> InputStreamReader(content));</code></div>
<div class="line"><code class="plain">    StringBuilder builder = </code><code class="keyword">new</code><code class="plain"> StringBuilder();</code></div>
<div class="line"><code class="plain">    String line;</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">while</code><code class="plain"> ((line = reader.readLine()) != </code><code class="keyword">null</code><code class="plain">) {</code></div>
<div class="line"><code class="plain">        builder.append(line);</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">    </code><code class="keyword">if</code><code class="plain">(builder.length() != </code><code class="value">0</code><code class="plain">) {</code></div>
<div class="line"><code class="plain">        json = </code><code class="keyword">new</code><code class="plain"> JSONObject(builder.toString());</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div></li></ul></li></ol></li><li class=" ">    <p>
If you plan to use the <strong class=" ">findAll</strong> method from your Arrow SDK, then you will need to open the model class file <strong class=" ">Testuser.java </strong>(since we generated the Arrow SDK from the default Arrow App), find:    </p>
<ol class=" "><li class=" "><div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">retVal.setID((Integer) object.get(</code><code class="string">"id"</code><code class="plain">));</code></div>
</div>
</div></li><li class=" ">    <p>
And replace with:    </p>
</li><li class=" "><div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">retVal.setID(Integer.getInteger((String) object.get(</code><code class="string">"id"</code><code class="plain">)));</code></div>
</div>
</div></li><li class=" ">    <p>
This is to workaround <a class="external-link external-link" href="https://jira.appcelerator.org/browse/API-1197" target="_blank">API-1197</a>.    </p>
</li></ol></li><li class=" ">    <p>
Depending on where you want to use your Arrow SDK in your Android project, you will need to import the Arrow SDK files and setup some Arrow configurations. In this example, we'll use the <strong class=" "> <strong class=" ">MainActivity.java:</strong> </strong>    </p>
<ul class=" "><li class=" "><div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="keyword">package</code><code class="plain"> com.appc.monkeyking;</code></div>
<div class="line"><code class="keyword">import</code><code class="plain"> android.support.v7.app.AppCompatActivity;</code></div>
<div class="line"><code class="keyword">import</code><code class="plain"> android.os.Bundle;</code></div>
<div class="line"><code class="comments">// import your Arrow SDK files</code></div>
<div class="line"><code class="keyword">import</code><code class="plain"> com.monkeysdk.Callback;</code></div>
<div class="line"><code class="keyword">import</code><code class="plain"> com.monkeysdk.CallbackWith;</code></div>
<div class="line"><code class="keyword">import</code><code class="plain"> com.monkeysdk.MonkeySdk;</code></div>
<div class="line"><code class="keyword">import</code><code class="plain"> com.monkeysdk.Testuser;</code></div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">class</code><code class="plain"> MainActivity </code><code class="keyword">extends</code><code class="plain"> AppCompatActivity {</code></div>
<div class="line"><code class="plain">    </code><code class="color1">@Override</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">protected</code><code class="plain"> </code><code class="keyword">void</code><code class="plain"> onCreate(Bundle savedInstanceState) {</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">super</code><code class="plain">.onCreate(savedInstanceState);</code></div>
<div class="line"><code class="plain">        setContentView(R.layout.activity_main);</code></div>
<div class="line"><code class="plain">		</code><code class="comments">// the URL and port to talk to your Arrow App</code></div>
<div class="line"><code class="plain">        MonkeySdk.setDomain(</code><code class="string">"http://10.0.3.2"</code><code class="plain">);</code></div>
<div class="line"><code class="plain">        MonkeySdk.setPort(</code><code class="value">8080</code><code class="plain">);</code></div>
<div class="line"><code class="plain">		</code><code class="comments">// the API key for your Arrow app</code></div>
<div class="line"><code class="plain">        MonkeySdk.setAuthorization(</code><code class="string">"71YFaz201s55+Mmvzh5G62sqo3tUwwbS"</code><code class="plain">);</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div></li></ul><ul class=" "><li class=" ">    <p>
    </p>
    <div class="confbox admonition admonition-note aui-message warning shadowed information-macro">
        
    <p>
If you are planning to run your Arrow App locally, then you should <strong class=" ">setDomain</strong> to the following URLs for the following cases:    </p>
<ul class=" "><li class=" ">    <p>
Running your Android app from the <strong class=" ">stock emulator</strong>: <strong class=" ">   <a class="external-link external-link" href="http://10.0.2.2/" target="_blank">http://10.0.2.2</a>   </strong>    </p>
<ul class=" "><li class=" ">    <p>
<a class="external-link external-link" href="http://developer.android.com/tools/devices/emulator.html#emulatornetworking" target="_blank">http://developer.android.com/tools/devices/emulator.html#emulatornetworking</a>  <strong class=" ">  <br/>  </strong>    </p>
</li></ul></li><li class=" ">    <p>
Running your Android app from <strong class=" "> <strong class=" ">Genymotion emulator: </strong>  <a class="external-link external-link" href="http://10.0.3.2/" target="_blank">http://10.0.3.2</a> </strong>    </p>
<ul class=" "><li class=" ">    <p>
<a class="external-link external-link" href="http://stackoverflow.com/questions/18463319/access-host-from-genymotion-emulator" target="_blank">http://stackoverflow.com/questions/18463319/access-host-from-genymotion-emulator</a>    </p>
</li></ul></li></ul>    </div>
    
</li></ul></li><li class=" ">    <p>
Once you have the configuration setup, you can make calls to your Arrow App such as:    </p>
<ul class=" "><li class=" "><div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="keyword">package</code><code class="plain"> com.appc.monkeyking;</code></div>
<div class="line"><code class="keyword">import</code><code class="plain"> android.support.v7.app.AppCompatActivity;</code></div>
<div class="line"><code class="keyword">import</code><code class="plain"> android.os.Bundle;</code></div>
<div class="line"><code class="comments">// import your Arrow SDK files</code></div>
<div class="line"><code class="keyword">import</code><code class="plain"> com.monkeysdk.Callback;</code></div>
<div class="line"><code class="keyword">import</code><code class="plain"> com.monkeysdk.CallbackWith;</code></div>
<div class="line"><code class="keyword">import</code><code class="plain"> com.monkeysdk.MonkeySdk;</code></div>
<div class="line"><code class="keyword">import</code><code class="plain"> com.monkeysdk.Testuser;</code></div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">class</code><code class="plain"> MainActivity </code><code class="keyword">extends</code><code class="plain"> AppCompatActivity {</code></div>
<div class="line"><code class="plain">    </code><code class="color1">@Override</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">protected</code><code class="plain"> </code><code class="keyword">void</code><code class="plain"> onCreate(Bundle savedInstanceState) {</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">super</code><code class="plain">.onCreate(savedInstanceState);</code></div>
<div class="line"><code class="plain">        setContentView(R.layout.activity_main);</code></div>
<div class="line"><code class="plain">		</code><code class="comments">// the URL and port to talk to your Arrow App</code></div>
<div class="line"><code class="plain">        MonkeySdk.setDomain(</code><code class="string">"http://10.0.3.2"</code><code class="plain">);</code></div>
<div class="line"><code class="plain">        MonkeySdk.setPort(</code><code class="value">8080</code><code class="plain">);</code></div>
<div class="line"><code class="plain">		</code><code class="comments">// the API key for your Arrow app</code></div>
<div class="line"><code class="plain">        MonkeySdk.setAuthorization(</code><code class="string">"71YFaz201s55+Mmvzh5G62sqo3tUwwbS"</code><code class="plain">);</code></div>
<div class="line"><code class="plain">Â </code></div>
<div class="line"><code class="plain">		Button createPerson = (Button)findViewById(R.id.testButton);</code></div>
<div class="line"><code class="plain">        createPerson.setOnClickListener(</code><code class="keyword">new</code><code class="plain"> View.OnClickListener() {</code></div>
<div class="line"><code class="plain">            </code><code class="color1">@Override</code></div>
<div class="line"><code class="plain">            </code><code class="keyword">public</code><code class="plain"> </code><code class="keyword">void</code><code class="plain"> onClick(View view) {</code></div>
<div class="line"><code class="plain">				JSONObject famousPerson = </code><code class="keyword">null</code><code class="plain">;</code></div>
<div class="line"><code class="plain">				</code><code class="keyword">try</code><code class="plain"> {</code></div>
<div class="line"><code class="plain">					famousPerson = </code><code class="keyword">new</code><code class="plain"> JSONObject()</code></div>
<div class="line"><code class="plain">							.put(</code><code class="string">"first_name"</code><code class="plain">, </code><code class="string">"monkey"</code><code class="plain">)</code></div>
<div class="line"><code class="plain">							.put(</code><code class="string">"last_name"</code><code class="plain">, </code><code class="string">"king"</code><code class="plain">)</code></div>
<div class="line"><code class="plain">							.put(</code><code class="string">"email"</code><code class="plain">, </code><code class="string">"monkey@king.com"</code><code class="plain">);</code></div>
<div class="line"><code class="plain">				}</code></div>
<div class="line"><code class="plain">				</code><code class="keyword">catch</code><code class="plain">(JSONException e) {</code></div>
<div class="line"><code class="plain">					e.printStackTrace();</code></div>
<div class="line"><code class="plain">				}</code></div>
<div class="line"><code class="plain">				Testuser.create(famousPerson, </code><code class="keyword">new</code><code class="plain"> Callback() {</code></div>
<div class="line"><code class="plain">					</code><code class="color1">@Override</code></div>
<div class="line"><code class="plain">					</code><code class="keyword">public</code><code class="plain"> </code><code class="keyword">void</code><code class="plain"> onSuccess(JSONObject body, HttpResponse response) {</code></div>
<div class="line"><code class="plain">							Log.i(</code><code class="string">"monkeyking"</code><code class="plain">, </code><code class="string">"Monkey King is created."</code><code class="plain">);</code></div>
<div class="line"><code class="plain">					}</code></div>
<div class="line"><code class="plain">					</code><code class="color1">@Override</code></div>
<div class="line"><code class="plain">					</code><code class="keyword">public</code><code class="plain"> </code><code class="keyword">void</code><code class="plain"> onError(Exception exception, JSONObject body, HttpResponse response) {</code></div>
<div class="line"><code class="plain">							exception.printStackTrace();</code></div>
<div class="line"><code class="plain">					}</code></div>
<div class="line"><code class="plain">				});</code></div>
<div class="line"><code class="plain">            }</code></div>
<div class="line"><code class="plain">        });</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div></li></ul></li></ol>    <p>
    </p>
    <p>
    </p>
    <p>
<strong class=" "> </strong>    </p>
    </div>
        </div><a id="editButton" href="https://wiki.appcelerator.org/pages/editpage.action?pageId=46244860"><span>Edit</span></a>
    
        <div class="footer">
            Created with <a href="http://k15t.com/display/web/Scroll-Wiki-EclipseHelp-Exporter-for-Confluence" target="_blank">Scroll EclipseHelp Exporter for Confluence</a>.
        </div>
    </div>
</body>
</html>
