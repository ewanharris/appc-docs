Ext.data.JsonP['Camera_and_Photo_Gallery_APIs']({"guide":" <!doctype html> <html> <head> <title>Camera and Photo Gallery APIs</title> <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"> </meta></head> <body> <div class=\"container\"> <div class=\"header\"/> <div id=\"src-29004913\" class=\"content\"> <h1>Camera and Photo Gallery APIs</h1> <p> </p> <ul class=\"toc-indentation\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Camera_and_Photo_Gallery_APIs-section-src-29004913_CameraandPhotoGalleryAPIs-Objective\">Objective</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Camera_and_Photo_Gallery_APIs-section-src-29004913_CameraandPhotoGalleryAPIs-Contents\">Contents</a> </p> <ul class=\"toc-indentation\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Camera_and_Photo_Gallery_APIs-section-src-29004913_CameraandPhotoGalleryAPIs-Permissions\">Permissions</a> </p> <ul class=\"toc-indentation\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Camera_and_Photo_Gallery_APIs-section-src-29004913_CameraandPhotoGalleryAPIs-Androidpermissions\">Android permissions</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Camera_and_Photo_Gallery_APIs-section-src-29004913_CameraandPhotoGalleryAPIs-RequestingPermissions\">Requesting Permissions</a> </p> </li></ul></li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Camera_and_Photo_Gallery_APIs-section-src-29004913_CameraandPhotoGalleryAPIs-Camera\">Camera</a> </p> <ul class=\"toc-indentation\"/><ul class=\"toc-indentation\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Camera_and_Photo_Gallery_APIs-section-src-29004913_safe-id-Q2FtZXJhYW5kUGhvdG9HYWxsZXJ5QVBJcy1Gcm9udC9yZWFyY2FtZXJhc3VwcG9ydA\">Front/rear camera support</a> </p> </li></ul></li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Camera_and_Photo_Gallery_APIs-section-src-29004913_CameraandPhotoGalleryAPIs-AlternativeAndroidcapturevideoexample\">Alternative Android capture video example</a> </p> </li></ul></li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Camera_and_Photo_Gallery_APIs-section-src-29004913_CameraandPhotoGalleryAPIs-Gallery\">Gallery</a> </p> <ul class=\"toc-indentation\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Camera_and_Photo_Gallery_APIs-section-src-29004913_safe-id-Q2FtZXJhYW5kUGhvdG9HYWxsZXJ5QVBJcy1HZXR0aW5naW1hZ2VzaW50b3RoZXNpbXVsYXRvci9lbXVsYXRvcidzZ2FsbGVyeQ\">Getting images into the simulator/emulator&apos;s gallery</a> </p> </li></ul></li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Camera_and_Photo_Gallery_APIs-section-src-29004913_CameraandPhotoGalleryAPIs-Windowsdevelopmentconsiderations\">Windows development considerations</a> </p> <ul class=\"toc-indentation\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Camera_and_Photo_Gallery_APIs-section-src-29004913_CameraandPhotoGalleryAPIs-Grantaccesstovideostreamandaudiostream\">Grant access to video stream and audio stream</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Camera_and_Photo_Gallery_APIs-section-src-29004913_CameraandPhotoGalleryAPIs-Grantaccesstopictureslibrary\">Grant access to pictures library</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Camera_and_Photo_Gallery_APIs-section-src-29004913_CameraandPhotoGalleryAPIs-DisplayingbuiltincameraforWindows\">Displaying builtin camera for Windows</a> </p> <ul class=\"toc-indentation\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Camera_and_Photo_Gallery_APIs-section-src-29004913_CameraandPhotoGalleryAPIs-ForWindows10Mobile\">For Windows 10 Mobile</a> </p> </li></ul></li></ul></li></ul><ul class=\"\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Camera_and_Photo_Gallery_APIs-section-src-29004913_CameraandPhotoGalleryAPIs-Hands-onpractice\">Hands-on practice</a> </p> <ul class=\"toc-indentation\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Camera_and_Photo_Gallery_APIs-section-src-29004913_CameraandPhotoGalleryAPIs-Goal\">Goal</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Camera_and_Photo_Gallery_APIs-section-src-29004913_CameraandPhotoGalleryAPIs-Steps\">Steps</a> </p> </li></ul></li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Camera_and_Photo_Gallery_APIs-section-src-29004913_CameraandPhotoGalleryAPIs-Summary\">Summary</a> </p> </li></ul> <div class=\"section section-2\" id=\"src-29004913_CameraandPhotoGalleryAPIs-Objective\"> <h2 class=\"heading\"><span>Objective</span></h2> <p>In this chapter, you&apos;ll learn how to capture an image from the camera, use it in an app, and save it to the gallery or filesystem. You&apos;ll also explore the closely related gallery APIs, which let your users grab images from their photo albums for use within your app. </p> </div> <div class=\"section section-2\" id=\"src-29004913_CameraandPhotoGalleryAPIs-Contents\"> <h2 class=\"heading\"><span>Contents</span></h2> <p>The APIs that you use to access the camera and photo gallery are very similar. Both use the same function signature, though the actual method names vary. We&apos;ll start with a look at the camera API then see how you apply the same techniques to the gallery. </p> <div class=\"section section-3\" id=\"src-29004913_CameraandPhotoGalleryAPIs-Permissions\"> <h3 class=\"heading\"><span>Permissions</span></h3> <p>Firstly, it is important to have the required permissions to take photos and capture video. </p> <div class=\"section section-4\" id=\"src-29004913_CameraandPhotoGalleryAPIs-Androidpermissions\"> <h4 class=\"heading\"><span>Android permissions</span></h4> <p>On Android you <strong class=\"\">must</strong> define the required camera permissions in your <i>tiapp.xml</i>: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"title\">Android Camera Permissions</div> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\" data-title=\"Android Camera Permissions\"> <div class=\"line\"><code class=\"plain\">&lt;</code><code class=\"keyword\">uses</code><code class=\"plain\">-permission </code><code class=\"color1\">android:name</code><code class=\"plain\">=</code><code class=\"string\">&quot;android.permission.CAMERA&quot;</code><code class=\"plain\"> /&gt;</code></div> <div class=\"line\"><code class=\"plain\">&lt;</code><code class=\"keyword\">uses</code><code class=\"plain\">-feature </code><code class=\"color1\">android:name</code><code class=\"plain\">=</code><code class=\"string\">&quot;android.hardware.camera&quot;</code><code class=\"plain\"> /&gt;</code></div> </div> </div> <p>Additionally, to capture audio; you <strong class=\"\">must</strong> also define the required audio permissions in your <i>tiapp.xml</i>: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"title\">Android Audio Permission</div> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\" data-title=\"Android Audio Permission\"> <div class=\"line\"><code class=\"plain\">&lt;</code><code class=\"keyword\">uses</code><code class=\"plain\">-permission </code><code class=\"color1\">android:name</code><code class=\"plain\">=</code><code class=\"string\">&quot;android.permission.RECORD_AUDIO&quot;</code><code class=\"plain\"> /&gt;</code></div> </div> </div> </div> <div class=\"section section-4\" id=\"src-29004913_CameraandPhotoGalleryAPIs-RequestingPermissions\"> <h4 class=\"heading\"><span>Requesting Permissions</span></h4> <p>For all platforms you must verify you have the correct permissions to capture media and request them from the user if they are not available. You can do this by using the provided <i>Titanium.Media</i> APIs: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"title\">Requesting Permissions</div> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\" data-title=\"Requesting Permissions\"> <div class=\"line\"><code class=\"comments\">// check if we already have permissions to capture media</code></div> <div class=\"line\"><code class=\"keyword\">if</code><code class=\"plain\"> (!Ti.Media.hasCameraPermissions()) {</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// request permissions to capture media</code></div> <div class=\"line\"><code class=\"plain\"> Ti.Media.requestCameraPermissions(</code><code class=\"keyword\">function</code><code class=\"plain\"> (e) {</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// success! we can capture media!</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (e.success) {</code></div> <div class=\"line\"><code class=\"plain\"> Ti.Media.showCamera({ ... });</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// oops! could not obtain required permissions...</code></div> <div class=\"line\"><code class=\"plain\"> } </code><code class=\"keyword\">else</code><code class=\"plain\"> {</code></div> <div class=\"line\"><code class=\"plain\"> Ti.API.error(</code><code class=\"string\">&apos;could not obtain camera permissions!&apos;</code><code class=\"plain\">);</code></div> <div class=\"line\"><code class=\"plain\"> }</code></div> <div class=\"line\"><code class=\"plain\"> });</code></div> <div class=\"line\"><code class=\"plain\">} </code><code class=\"keyword\">else</code><code class=\"plain\"> {</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// yay! we already have permissions!</code></div> <div class=\"line\"><code class=\"plain\"> Ti.Media.showCamera({ ... });</code></div> <div class=\"line\"><code class=\"plain\">}</code></div> </div> </div> </div> </div> <div class=\"section section-3\" id=\"src-29004913_CameraandPhotoGalleryAPIs-Camera\"> <h3 class=\"heading\"><span>Camera</span></h3> <p>You can access both the rear-facing and front-facing cameras in devices that have them. You can capture still images and video from the camera. Then you can use the resulting images in your app, save them to the file system, upload them, or save them to the gallery. You open the camera by calling the <a class=\"external-link external-link\" href=\"#!/api/Titanium.Media-method-showCamera\"><tt>showCamera()</tt></a> method. When doing so, you define three callback functions that are called for the success, cancel, and error events, as shown here: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> win = Ti.UI.createWindow({</code></div> <div class=\"line\"><code class=\"plain\"> layout: </code><code class=\"string\">&apos;vertical&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> backgroundColor: </code><code class=\"string\">&apos;gray&apos;</code></div> <div class=\"line\"><code class=\"plain\"> }),</code></div> <div class=\"line\"><code class=\"plain\"> photoBtn = Ti.UI.createButton({</code></div> <div class=\"line\"><code class=\"plain\"> title: </code><code class=\"string\">&apos;TAKE PHOTO&apos;</code></div> <div class=\"line\"><code class=\"plain\"> }),</code></div> <div class=\"line\"><code class=\"plain\"> videoBtn = Ti.UI.createButton({</code></div> <div class=\"line\"><code class=\"plain\"> title: </code><code class=\"string\">&apos;RECORD VIDEO&apos;</code></div> <div class=\"line\"><code class=\"plain\"> });</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"comments\">/**</code></div> <div class=\"line\"><code class=\"comments\"> * showCamera: handle required permissions and display camera for video capture</code></div> <div class=\"line\"><code class=\"comments\"> * and photo capture</code></div> <div class=\"line\"><code class=\"comments\"> *</code></div> <div class=\"line\"><code class=\"comments\"> * @param type: capture type, can be Ti.Media.MEDIA_TYPE_VIDEO or Ti.Media.MEDIA_TYPE_PHOTO</code></div> <div class=\"line\"><code class=\"comments\"> * @param callback: callback from camera</code></div> <div class=\"line\"><code class=\"comments\"> * @param error: defined when an error has occurred, otherwise null</code></div> <div class=\"line\"><code class=\"comments\"> * @param result: result from the camera containing captured media information</code></div> <div class=\"line\"><code class=\"comments\"> */</code></div> <div class=\"line\"><code class=\"keyword\">function</code><code class=\"plain\"> showCamera (type, callback) {</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">var</code><code class=\"plain\"> camera = </code><code class=\"keyword\">function</code><code class=\"plain\"> () {</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// call Titanium.Media.showCamera and respond callbacks</code></div> <div class=\"line\"><code class=\"plain\"> Ti.Media.showCamera({</code></div> <div class=\"line\"><code class=\"plain\"> success: </code><code class=\"keyword\">function</code><code class=\"plain\"> (e) {</code></div> <div class=\"line\"><code class=\"plain\"> callback(</code><code class=\"keyword\">null</code><code class=\"plain\">, e);</code></div> <div class=\"line\"><code class=\"plain\"> },</code></div> <div class=\"line\"><code class=\"plain\"> cancel: </code><code class=\"keyword\">function</code><code class=\"plain\"> (e) {</code></div> <div class=\"line\"><code class=\"plain\"> callback(e, </code><code class=\"keyword\">null</code><code class=\"plain\">);</code></div> <div class=\"line\"><code class=\"plain\"> },</code></div> <div class=\"line\"><code class=\"plain\"> error: </code><code class=\"keyword\">function</code><code class=\"plain\"> (e) {</code></div> <div class=\"line\"><code class=\"plain\"> callback(e, </code><code class=\"keyword\">null</code><code class=\"plain\">);</code></div> <div class=\"line\"><code class=\"plain\"> },</code></div> <div class=\"line\"><code class=\"plain\"> saveToPhotoGallery: </code><code class=\"keyword\">true</code><code class=\"plain\">, </code><code class=\"comments\">// save our media to the gallery</code></div> <div class=\"line\"><code class=\"plain\"> mediaTypes: [ type ]</code></div> <div class=\"line\"><code class=\"plain\"> });</code></div> <div class=\"line\"><code class=\"plain\"> };</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// check if we already have permissions to capture media</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (!Ti.Media.hasCameraPermissions()) {</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// request permissions to capture media</code></div> <div class=\"line\"><code class=\"plain\"> Ti.Media.requestCameraPermissions(</code><code class=\"keyword\">function</code><code class=\"plain\"> (e) {</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// success! display the camera</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (e.success) {</code></div> <div class=\"line\"><code class=\"plain\"> camera();</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// oops! could not obtain required permissions</code></div> <div class=\"line\"><code class=\"plain\"> } </code><code class=\"keyword\">else</code><code class=\"plain\"> {</code></div> <div class=\"line\"><code class=\"plain\"> callback(</code><code class=\"keyword\">new</code><code class=\"plain\"> Error(</code><code class=\"string\">&apos;could not obtain camera permissions!&apos;</code><code class=\"plain\">), </code><code class=\"keyword\">null</code><code class=\"plain\">);</code></div> <div class=\"line\"><code class=\"plain\"> }</code></div> <div class=\"line\"><code class=\"plain\"> });</code></div> <div class=\"line\"><code class=\"plain\"> } </code><code class=\"keyword\">else</code><code class=\"plain\"> {</code></div> <div class=\"line\"><code class=\"plain\"> camera();</code></div> <div class=\"line\"><code class=\"plain\"> }</code></div> <div class=\"line\"><code class=\"plain\">}</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">photoBtn.addEventListener(</code><code class=\"string\">&apos;click&apos;</code><code class=\"plain\">, </code><code class=\"keyword\">function</code><code class=\"plain\"> () {</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// attempt to take a photo with the camera</code></div> <div class=\"line\"><code class=\"plain\"> showCamera(Ti.Media.MEDIA_TYPE_PHOTO, </code><code class=\"keyword\">function</code><code class=\"plain\"> (error, result) {</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (error) {</code></div> <div class=\"line\"><code class=\"plain\"> alert(</code><code class=\"string\">&apos;could not take photo&apos;</code><code class=\"plain\">);</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">return</code><code class=\"plain\">;</code></div> <div class=\"line\"><code class=\"plain\"> }</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// validate we taken a photo</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (result.mediaType == Ti.Media.MEDIA_TYPE_PHOTO) {</code></div> <div class=\"line\"><code class=\"plain\"> </code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// create an imageView to display our photo</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">var</code><code class=\"plain\"> imageView = Ti.UI.createImageView({</code></div> <div class=\"line\"><code class=\"plain\"> image: result.media</code></div> <div class=\"line\"><code class=\"plain\"> });</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// add the imageView to the window</code></div> <div class=\"line\"><code class=\"plain\"> win.add(imageView);</code></div> <div class=\"line\"><code class=\"plain\"> }</code></div> <div class=\"line\"><code class=\"plain\"> });</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">videoBtn.addEventListener(</code><code class=\"string\">&apos;click&apos;</code><code class=\"plain\">, </code><code class=\"keyword\">function</code><code class=\"plain\"> () {</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// attempt to capture video with the camera</code></div> <div class=\"line\"><code class=\"plain\"> showCamera(Ti.Media.MEDIA_TYPE_VIDEO, </code><code class=\"keyword\">function</code><code class=\"plain\"> (error, result) {</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (error) {</code></div> <div class=\"line\"><code class=\"plain\"> alert(</code><code class=\"string\">&apos;could not capture video&apos;</code><code class=\"plain\">);</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">return</code><code class=\"plain\">;</code></div> <div class=\"line\"><code class=\"plain\"> }</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// validate we taken a video</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (result.mediaType == Ti.Media.MEDIA_TYPE_VIDEO) {</code></div> <div class=\"line\"><code class=\"plain\"> </code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// create a videoPlayer to display our video</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">var</code><code class=\"plain\"> videoPlayer = Ti.Media.createVideoPlayer({</code></div> <div class=\"line\"><code class=\"plain\"> url: result.media.nativePath,</code></div> <div class=\"line\"><code class=\"plain\"> autoplay: </code><code class=\"keyword\">true</code></div> <div class=\"line\"><code class=\"plain\"> });</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// add the videoPlayer to the window</code></div> <div class=\"line\"><code class=\"plain\"> win.add(videoPlayer);</code></div> <div class=\"line\"><code class=\"plain\"> }</code></div> <div class=\"line\"><code class=\"plain\"> });</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">win.add([ photoBtn, videoBtn ]);</code></div> <div class=\"line\"><code class=\"plain\">win.open();</code></div> </div> </div> <p>The <tt class=\"\">saveToPhotoGallery</tt> property controls whether the photo or video is automatically saved to the device&apos;s photo gallery. Using <tt>Ti.Filesystem</tt> you could save to the filesystem in addition to or in place of saving to the gallery. Because the user can delete items from the gallery separately from your app, you should save media to the filesystem if your app will depend on its availability later. </p> <p>Some other useful properties include: </p> <ul class=\"\"><li class=\"\"> <p><tt>autohide</tt> (boolean) if the camera should auto hide after the media capture is completed (defaults to true) (iOS only) </p> </li><li class=\"\"> <p><tt>animated</tt> (boolean) if the dialog should be animated (defaults to true) upon showing and hiding (Android and iOS only) </p> </li><li class=\"\"> <p><tt>allowEditing</tt> (boolean) if the media should be editable after capture in the UI interface (iOS only) </p> </li><li class=\"\"> <p><tt>mediaTypes</tt> an array of media type constants supported by the capture device UI (iOS only) </p> </li><li class=\"\"> <p><tt>videoMaximumDuration</tt> (float) duration on how long in milliseconds to allow capture before completing (iOS only) </p> </li><li class=\"\"> <p><tt>videoQuality</tt> (Ti.Media constant) to indicate the video quality during capture (iOS only) </p> </li><li class=\"\"> <p><tt>showControls</tt> (boolean) to indicate if the built-in UI controls should be displayed (iOS only) </p> </li><li class=\"\"> <p><tt>overlay</tt> (Ti.UI.View) which is added as an overlay to the camera UI (on top) </p> </li><li class=\"\"> <p><tt>transform</tt> a transformation matrix that applies to the camera UI (not to the media returned) (iOS only) </p> </li></ul> <p>You can check for the availability of the camera with the <tt>Titanium.Media.isCameraSupported</tt> property: it&apos;s false if the device has no camera. The simulator/emulator does not have camera support. Other devices without cameras include 3rd generation and older iPods, the Nook Color, and Kindle Fire. </p> <div class=\"section section-4\" id=\"src-29004913_safe-id-Q2FtZXJhYW5kUGhvdG9HYWxsZXJ5QVBJcy1Gcm9udC9yZWFyY2FtZXJhc3VwcG9ydA\"> <h4 class=\"heading\"><span>Front/rear camera support</span></h4> <p>You can access both the front and rear facing cameras, if a device has such cameras. The code snippet below shows one way you might do this. Key properties are the <tt class=\"\">Ti.Media.CAMERA_REAR</tt> and <tt class=\"\">Ti.Media.CAMERA_FRONT</tt> as well as the <tt>Ti.Media.switchCamera()</tt> method. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">var cameras = Ti.Media.availableCameras;</code></div> <div class=\"line\"><code class=\"keyword\">for</code><code class=\"plain\"> (var i = </code><code class=\"value\">0</code><code class=\"plain\">; i &lt; cameras.length; i++) {</code></div> <div class=\"line\"><code class=\"plain\">\t</code><code class=\"keyword\">if</code><code class=\"plain\"> (cameras[i] == Ti.Media.CAMERA_REAR) {</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\"> cameraType.addEventListener(</code><code class=\"string\">&apos;click&apos;</code><code class=\"plain\">, function () {</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (Ti.Media.camera == Ti.Media.CAMERA_FRONT) {</code></div> <div class=\"line\"><code class=\"plain\"> cameraType.title = </code><code class=\"string\">&apos;front&apos;</code><code class=\"plain\">;</code></div> <div class=\"line\"><code class=\"plain\"> Ti.Media.switchCamera(Ti.Media.CAMERA_REAR);</code></div> <div class=\"line\"><code class=\"plain\"> } </code><code class=\"keyword\">else</code><code class=\"plain\"> {</code></div> <div class=\"line\"><code class=\"plain\"> cameraType.title = </code><code class=\"string\">&apos;rear&apos;</code><code class=\"plain\">;</code></div> <div class=\"line\"><code class=\"plain\"> Ti.Media.switchCamera(Ti.Media.CAMERA_FRONT);</code></div> <div class=\"line\"><code class=\"plain\"> }</code></div> <div class=\"line\"><code class=\"plain\"> });</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">break</code><code class=\"plain\">;</code></div> <div class=\"line\"><code class=\"plain\">\t}</code></div> <div class=\"line\"><code class=\"plain\">}</code></div> </div> </div> </div> <div class=\"section section-4\" id=\"src-29004913_CameraandPhotoGalleryAPIs-AlternativeAndroidcapturevideoexample\"> <h4 class=\"heading\"><span>Alternative Android capture video example</span></h4> <p>On Android you can alternatively create an intent to capture video. This intent is used to start a new activity, which launches the camera to record video. After the user stops recording, the video is saved to the device&apos;s gallery. The callback retrieves the URI of the video media and stores the reference in a global variable. Using the global variable, you can launch the video in a media player or save the content to a different location. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> win = Ti.UI.createWindow({</code></div> <div class=\"line\"><code class=\"plain\"> layout: </code><code class=\"string\">&apos;vertical&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> backgroundColor: </code><code class=\"string\">&apos;gray&apos;</code></div> <div class=\"line\"><code class=\"plain\"> }),</code></div> <div class=\"line\"><code class=\"plain\"> recordButton = Ti.UI.createButton({</code></div> <div class=\"line\"><code class=\"plain\"> title: </code><code class=\"string\">&apos;RECORD VIDEO&apos;</code></div> <div class=\"line\"><code class=\"plain\"> }),</code></div> <div class=\"line\"><code class=\"plain\"> playButton = Ti.UI.createButton({</code></div> <div class=\"line\"><code class=\"plain\"> title: </code><code class=\"string\">&apos;PLAY VIDEO&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> visible: </code><code class=\"keyword\">false</code></div> <div class=\"line\"><code class=\"plain\"> }),</code></div> <div class=\"line\"><code class=\"plain\"> videoIntent = Ti.Android.createIntent({</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// http://developer.android.com/reference/android/provider/MediaStore.html#ACTION_VIDEO_CAPTURE</code></div> <div class=\"line\"><code class=\"plain\"> action: </code><code class=\"string\">&apos;android.media.action.VIDEO_CAPTURE&apos;</code></div> <div class=\"line\"><code class=\"plain\"> }),</code></div> <div class=\"line\"><code class=\"plain\"> videoURL = </code><code class=\"keyword\">null</code><code class=\"plain\">;</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">recordButton.addEventListener(</code><code class=\"string\">&apos;click&apos;</code><code class=\"plain\">, </code><code class=\"keyword\">function</code><code class=\"plain\"> () {</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// start an intent to capture video</code></div> <div class=\"line\"><code class=\"plain\"> win.getActivity().startActivityForResult(videoIntent, </code><code class=\"keyword\">function</code><code class=\"plain\"> (e) {</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// video capture activity returned successfully</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (e.resultCode === Ti.Android.RESULT_OK) {</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// verify we have a video URL</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (e.intent.data != </code><code class=\"keyword\">null</code><code class=\"plain\">) {</code></div> <div class=\"line\"><code class=\"plain\"> videoURL = e.intent.data;</code></div> <div class=\"line\"><code class=\"plain\"> playButton.visible = </code><code class=\"keyword\">true</code><code class=\"plain\">;</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\"> } </code><code class=\"keyword\">else</code><code class=\"plain\"> {</code></div> <div class=\"line\"><code class=\"plain\"> Ti.API.error(</code><code class=\"string\">&apos;could not retrieve media URL!&apos;</code><code class=\"plain\">);</code></div> <div class=\"line\"><code class=\"plain\"> }</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// video capture was cancelled</code></div> <div class=\"line\"><code class=\"plain\"> } </code><code class=\"keyword\">else</code><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (e.resultCode == Ti.Android.RESULT_CANCELED) {</code></div> <div class=\"line\"><code class=\"plain\"> Ti.API.trace(</code><code class=\"string\">&apos;user cancelled video capture session.&apos;</code><code class=\"plain\">);</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// handle all other results as a failure</code></div> <div class=\"line\"><code class=\"plain\"> } </code><code class=\"keyword\">else</code><code class=\"plain\"> {</code></div> <div class=\"line\"><code class=\"plain\"> Ti.API.error(</code><code class=\"string\">&apos;could not record video!&apos;</code><code class=\"plain\">);</code></div> <div class=\"line\"><code class=\"plain\"> }</code></div> <div class=\"line\"><code class=\"plain\"> });</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">playButton.addEventListener(</code><code class=\"string\">&apos;click&apos;</code><code class=\"plain\">, </code><code class=\"keyword\">function</code><code class=\"plain\"> (e) {</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">var</code><code class=\"plain\"> player = Ti.Media.createVideoPlayer({ url: videoURL, autoplay: </code><code class=\"keyword\">true</code><code class=\"plain\"> });</code></div> <div class=\"line\"><code class=\"plain\"> win.add(player);</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">win.add([ recordButton, playButton ]);</code></div> <div class=\"line\"><code class=\"plain\">win.open();</code></div> </div> </div> </div> </div> <div class=\"section section-3\" id=\"src-29004913_CameraandPhotoGalleryAPIs-Gallery\"> <h3 class=\"heading\"><span>Gallery</span></h3> <p>You open the native gallery by calling the <a class=\"external-link external-link\" href=\"#!/api/Titanium.Media-method-openPhotoGallery\"><tt>openPhotoGallery()</tt></a> method. As with the camera, you define three callback functions that are called for the success, cancel, and error events: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"title\">Gallery</div> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\" data-title=\"Gallery\"> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> win = Ti.UI.createWindow(),</code></div> <div class=\"line\"><code class=\"plain\"> btn = Ti.UI.createButton({</code></div> <div class=\"line\"><code class=\"plain\"> title: </code><code class=\"string\">&apos;OPEN GALLERY&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> });</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">btn.addEventListener(</code><code class=\"string\">&apos;click&apos;</code><code class=\"plain\">, </code><code class=\"keyword\">function</code><code class=\"plain\">(){</code></div> <div class=\"line\"><code class=\"plain\"> Ti.Media.openPhotoGallery({</code></div> <div class=\"line\"><code class=\"plain\"> mediaTypes: [ Titanium.Media.MEDIA_TYPE_PHOTO ],</code></div> <div class=\"line\"><code class=\"plain\"> success: </code><code class=\"keyword\">function</code><code class=\"plain\"> (e) {</code></div> <div class=\"line\"><code class=\"plain\"> alert(</code><code class=\"string\">&apos;media.width: &apos;</code><code class=\"plain\"> + e.media.width</code></div> <div class=\"line\"><code class=\"plain\"> + </code><code class=\"string\">&apos;\\nmedia.height: &apos;</code><code class=\"plain\"> + e.media.height</code></div> <div class=\"line\"><code class=\"plain\"> + </code><code class=\"string\">&apos;\\nmedia.length: &apos;</code><code class=\"plain\"> + e.media.length</code></div> <div class=\"line\"><code class=\"plain\"> + </code><code class=\"string\">&apos;\\nmedia.mimeType: &apos;</code><code class=\"plain\"> + e.media.mimeType</code></div> <div class=\"line\"><code class=\"plain\"> + </code><code class=\"string\">&apos;\\nmedia.nativePath: &apos;</code><code class=\"plain\"> + e.media.nativePath);</code></div> <div class=\"line\"><code class=\"plain\"> },</code></div> <div class=\"line\"><code class=\"plain\"> error: </code><code class=\"keyword\">function</code><code class=\"plain\"> (e) {</code></div> <div class=\"line\"><code class=\"plain\"> alert(</code><code class=\"string\">&apos;error opening image: &apos;</code><code class=\"plain\"> + e);</code></div> <div class=\"line\"><code class=\"plain\"> }</code></div> <div class=\"line\"><code class=\"plain\"> });</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">win.add(btn);</code></div> <div class=\"line\"><code class=\"plain\">win.open();</code></div> </div> </div> <p>Some other useful properties include: </p> <ul class=\"\"><li class=\"\"> <p><tt>animated</tt> (boolean) if the dialog should be animated (defaults to true) upon showing and hiding </p> </li><li class=\"\"> <p><tt>allowEditing</tt> (boolean) if the media should be editable after capture in the UI interface </p> </li><li class=\"\"> <p><tt class=\"\">saveToPhotoGallery</tt> (boolean) whether modified media should be saved back to the gallery, generally only useful with <tt>allowEditing=true</tt> </p> </li><li class=\"\"> <p><tt>mediaTypes</tt> an array of media type constants supported by the capture device UI </p> </li><li class=\"\"> <p><tt>showControls</tt> (boolean) to indicate if the built-in UI controls should be displayed </p> </li><li class=\"\"> <p><tt>overlay</tt> (Ti.UI.View) which is added as an overlay to the camera UI (on top) </p> </li><li class=\"\"> <p><tt>transform</tt> a transformation matrix that applies to the camera UI (not to the media returned) </p> </li><li class=\"\"> <p>(iPad only) <tt>popoverView</tt> (Ti.UI.View) to position the photo gallery popover a specific view </p> </li><li class=\"\"> <p>(iPad only) <tt>arrowDirection</tt> control the type of arrow and position of the gallery </p> </li></ul> <div class=\"section section-4\" id=\"src-29004913_safe-id-Q2FtZXJhYW5kUGhvdG9HYWxsZXJ5QVBJcy1HZXR0aW5naW1hZ2VzaW50b3RoZXNpbXVsYXRvci9lbXVsYXRvcidzZ2FsbGVyeQ\"> <h4 class=\"heading\"><span>Getting images into the simulator/emulator&apos;s gallery</span></h4> <p>The photo gallery on the simulator/emulator is of course empty to start. If you&apos;ll be testing photo gallery code, you&apos;ll need to put some images there. You can do so by following this procedure: </p> <ol class=\"\"><li> <p>Open the gallery in the simulator/emulator, then close it. You have to do this at least once to initialize its data storage structures. </p> </li><li> <p>Find an image to save. For example, open the web browser, search for, and display an image. </p> </li><li> <p>Long-press on the image, when you release, you should get a menu of options. </p> </li><li> <p>Tap Save Image (or your device&apos;s equivalent button) to save the image to the gallery. </p> </li></ol> </div> </div> <div class=\"section section-3\" id=\"src-29004913_CameraandPhotoGalleryAPIs-Windowsdevelopmentconsiderations\"> <h3 class=\"heading\"><span>Windows development considerations</span></h3> <p>In order to enable camera and audio recording for Windows Phone, you need to provide appropriate Capabilities in your <tt>tiapp.xml.</tt> Windows Phone users are prompted to grant or deny permission when your application attempt to use it. </p> <div class=\"section section-4\" id=\"src-29004913_CameraandPhotoGalleryAPIs-Grantaccesstovideostreamandaudiostream\"> <h4 class=\"heading\"><span>Grant access to video stream and audio stream</span></h4> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">&lt;</code><code class=\"keyword\">ti</code><code class=\"plain\">:app&gt;</code></div> <div class=\"line\"><code class=\"plain\"> ...</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">windows</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> ...</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">Capabilities</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">DeviceCapability</code><code class=\"plain\"> </code><code class=\"color1\">Name</code><code class=\"plain\">=</code><code class=\"string\">&quot;microphone&quot;</code><code class=\"plain\"> /&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">DeviceCapability</code><code class=\"plain\"> </code><code class=\"color1\">Name</code><code class=\"plain\">=</code><code class=\"string\">&quot;webcam&quot;</code><code class=\"plain\"> /&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/</code><code class=\"keyword\">Capabilities</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> ...</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/</code><code class=\"keyword\">windows</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> ...</code></div> <div class=\"line\"><code class=\"plain\">&lt;/</code><code class=\"keyword\">ti</code><code class=\"plain\">:app&gt;</code></div> </div> </div> </div> <div class=\"section section-4\" id=\"src-29004913_CameraandPhotoGalleryAPIs-Grantaccesstopictureslibrary\"> <h4 class=\"heading\"><span>Grant access to pictures library</span></h4> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">&lt;</code><code class=\"keyword\">ti</code><code class=\"plain\">:app&gt;</code></div> <div class=\"line\"><code class=\"plain\"> ...</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">windows</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> ...</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">Capabilities</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">Capability</code><code class=\"plain\"> </code><code class=\"color1\">Name</code><code class=\"plain\">=</code><code class=\"string\">&quot;picturesLibrary&quot;</code><code class=\"plain\"> /&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/</code><code class=\"keyword\">Capabilities</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> ...</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/</code><code class=\"keyword\">windows</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> ...</code></div> <div class=\"line\"><code class=\"plain\">&lt;/</code><code class=\"keyword\">ti</code><code class=\"plain\">:app&gt;</code></div> </div> </div> <p>For more information about audio configuration in <tt class=\"\">tiapp.xml</tt>, see <a class=\"document-link\" href=\"#!/guide/tiapp.xml_and_timodule.xml_Reference-section-src-29004921_tiapp.xmlandtimodule.xmlReference-Windows-specific\">Windows-specific</a> section in <a class=\"document-link\" href=\"#!/guide/tiapp.xml_and_timodule.xml_Reference\">tiapp.xml and timodule.xml Reference</a>. </p> </div> <div class=\"section section-4\" id=\"src-29004913_CameraandPhotoGalleryAPIs-DisplayingbuiltincameraforWindows\"> <h4 class=\"heading\"><span>Displaying builtin camera for Windows</span></h4> <div class=\"section section-5\" id=\"src-29004913_CameraandPhotoGalleryAPIs-ForWindows10Mobile\"> <h5 class=\"heading\"><span>For Windows 10 Mobile</span></h5> <p>As of Titanium 5.4.0, you can launch &quot;default camera UI&quot; that is builtin to the platform when you use <tt class=\"\">Ti.Media.showCamera(options)</tt> without specifying <tt>overlay</tt> property. This Windows builtin camera UI provides same look &amp; feel that <a class=\"external-link external-link\" href=\"https://www.microsoft.com/en-us/store/apps/windows-camera/9wzdncrfjbbg\" target=\"_blank\">Microsoft Windows Camera</a> app provides. Note that this builtin camera UI is supported as of Windows 10 apps including Mobile. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> imageView = Ti.UI.createImageView();</code></div> <div class=\"line\"><code class=\"plain\">Ti.Media.showCamera({</code></div> <div class=\"line\"><code class=\"plain\"> mediaTypes: [Ti.Media.MEDIA_TYPE_PHOTO],</code></div> <div class=\"line\"><code class=\"plain\"> success: </code><code class=\"keyword\">function</code><code class=\"plain\"> (e) {</code></div> <div class=\"line\"><code class=\"plain\"> imageView.image = e.media;</code></div> <div class=\"line\"><code class=\"plain\"> },</code></div> <div class=\"line\"><code class=\"plain\"> error: </code><code class=\"keyword\">function</code><code class=\"plain\"> (e) {</code></div> <div class=\"line\"><code class=\"plain\"> Ti.API.error(JSON.stringify(e));</code></div> <div class=\"line\"><code class=\"plain\"> }</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> </div> </div> </div> </div> </div> </div> <div class=\"section section-2\" id=\"src-29004913_CameraandPhotoGalleryAPIs-Hands-onpractice\"> <h2 class=\"heading\"><span>Hands-on practice</span></h2> <div class=\"section section-3\" id=\"src-29004913_CameraandPhotoGalleryAPIs-Goal\"> <h3 class=\"heading\"><span>Goal</span></h3> <p>In this activity, you will write an app that will capture an image from the camera and display it in a view. If the device doesn&apos;t have a camera, your app should display the gallery picker instead. </p> </div> <div class=\"section section-3\" id=\"src-29004913_CameraandPhotoGalleryAPIs-Steps\"> <h3 class=\"heading\"><span>Steps</span></h3> <ol class=\"\"><li> <p>Create a new project named PhotoTest. </p> </li><li> <p>On tab1 of the default project, replace the label with an ImageView that is 300x300 points positioned 5 points from the top. </p> </li><li> <p>Add a button that is 100x50 positioned 5 points from the bottom. </p> </li><li> <p>When the button is clicked, show the camera if it&apos;s available, otherwise open the photo gallery. You&apos;ll need three callbacks--write your code to reuse the same three functions to minimize duplicated code. You&apos;ll need these callbacks: </p> <ul class=\"\"><li class=\"\"> <p>Success: set the ImageView&apos;s image property to the media returned from the camera or gallery. Output the <tt>mediaType</tt> to the info console. </p> </li><li> <p>Cancel: don&apos;t do anything in this function </p> </li><li class=\"\"> <p>Error: Display an alert dialog box showing the <tt>error.code</tt> describing why the operation failed. </p> </li></ul></li><li> <p>Open the simulator/emulator and save at least one photo to it, following the steps above. </p> </li><li> <p>Build the app and run it on the simulator/emulator. The gallery should open. </p> </li><li> <p>(Optional) Install the app onto a device and run it from there. The camera should open. </p> </li></ol> </div> </div> <div class=\"section section-2\" id=\"src-29004913_CameraandPhotoGalleryAPIs-Summary\"> <h2 class=\"heading\"><span>Summary</span></h2> <p>In this chapter, you learned how to capture an image from the camera, use it in an app, and save it to the gallery or filesystem. You also explored the closely related gallery APIs, which let your users grab images from their photo albums for use within your app. </p> </div> </div><a id=\"editButton\" href=\"https://wiki.appcelerator.org/pages/editpage.action?pageId=29004913\"><span>Edit</span></a> </div> </body> </html> ","title":"Camera and Photo Gallery APIs"});