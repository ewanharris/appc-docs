<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Custom TSS Queries</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta content="Scroll EclipseHelp Exporter" name="generator"/>

    <link type="text/css" rel="stylesheet"/>
    <link type="text/css" rel="stylesheet"/>
    <link type="text/css" rel="stylesheet" media="print"/>
</head>
<body>
    <div class="container">
        <div class="header"/>

        <div id="41845652" class="content">
            <h1>Custom TSS Queries</h1>
    <p>
Demonstrates how to use custom TSS queries to style Alloy elements.    </p>
    <div class="confbox admonition admonition-info aui-message hint shadowed information-macro has-no-icon">
            <div class="title">App folder location</div>
        
    <p>
<i class=" ">alloy</i>/test/apps/<strong class=" ">advanced/custom_tss_queries</strong>    </p>
    </div>
    
    <p>
You can define custom boolean values for use in your your TSS queries. These are useful for setting styles when running on a specific phone model (for example, on an iPhone 5).  Custom TSS conditionals must be defined in the alloy.js file as properties of the Alloy.Globals object, so that they are available to the XML and TSS parsers.    </p>
    <p>
        <img src="images/download/attachments/41845652/custom_query.png" alt="images/download/attachments/41845652/custom_query.png" class="confluence-embedded-image" width="500"/>
            </p>
    <p>
The sample defines the following boolean properties in alloy.js:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">app/alloy.js</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">Alloy.Globals.someProperty = </code><code class="keyword">true</code><code class="plain">;</code></div>
<div class="line"><code class="plain">Alloy.Globals.isIOS7 = (OS_IOS &amp;&amp; parseInt(Ti.Platform.version, </code><code class="value">10</code><code class="plain">) &gt;= </code><code class="value">7</code><code class="plain">);</code></div>
<div class="line"><code class="plain">Alloy.Globals.isTalliPhone = (OS_IOS &amp;&amp; Ti.Platform.displayCaps.platformHeight == </code><code class="value">568</code><code class="plain">);</code></div>
</div>
</div>    <p>
The app/styles/index.tss file uses the <tt class=" ">Alloy.Globals.someProperty</tt> boolean to conditionally apply styles to various elements.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">app/styles/index.tss</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="string">"Window"</code><code class="plain">:{</code></div>
<div class="line"><code class="plain">    layout:</code><code class="string">"vertical"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    backgroundColor:</code><code class="string">'white'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    top:</code><code class="value">20</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="comments">/* Class selector applied to labels of class="label" */</code></div>
<div class="line"><code class="string">".label"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">    color: </code><code class="string">'blue'</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="comments">/* Component selector applied to all labels, though will be overridden */</code></div>
<div class="line"><code class="string">"Label"</code><code class="plain">:{</code></div>
<div class="line"><code class="plain">    top:</code><code class="value">10</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    text: </code><code class="string">"Default label text"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    font: {</code></div>
<div class="line"><code class="plain">        fontSize: </code><code class="string">'14dp'</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="comments">/* Platform selector applied to all labels, but a lower priority than the custom TSS conditional */</code></div>
<div class="line"><code class="string">"Label[platform=ios]"</code><code class="plain">:{</code></div>
<div class="line"><code class="plain">    text: </code><code class="string">"Alloy.Globals.someProperty!=true"</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="comments">/* Custom TSS overrides component and class selectors if someProperty is true */</code></div>
<div class="line"><code class="string">"Label[if=Alloy.Globals.someProperty]"</code><code class="plain">:{</code></div>
<div class="line"><code class="plain">    text: </code><code class="string">"Custom TSS: Alloy.Globals.someProperty==true"</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="comments">/* ID selector overrides other selectors if platform is iOS */</code></div>
<div class="line"><code class="string">"#title1[platform=ios]"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">    text: </code><code class="string">"Platform: this is iOS"</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="string">"#title1[if=Alloy.Globals.someProperty]"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">    text: </code><code class="string">"Overriding platform with custom TSS"</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="comments">/* Selector overrides only if platform is Android and someProperty is true */</code></div>
<div class="line"><code class="string">"#title2[platform=android if=Alloy.Globals.someProperty]"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">    text: </code><code class="string">"Platform: Android, Alloy.Globals.someProperty==true"</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="string">"#title2[platform=ios if=Alloy.Globals.someProperty]"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">    text: </code><code class="string">"Platform: iOS, Alloy.Globals.someProperty==true"</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="string">"#title2[platform=mobileweb if=Alloy.Globals.someProperty]"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">    text: </code><code class="string">"Platform: MobileWeb, Alloy.Globals.someProperty==true"</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="comments">/* ID selector overrides other selectors if platform is iOS */</code></div>
<div class="line"><code class="string">"#title3"</code><code class="plain">:{</code></div>
<div class="line"><code class="plain">    text: </code><code class="string">"You should see this for label 3"</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <p>
You can test for multiple values by separating them with a comma, which are treated as logical <tt class=" ">OR</tt> expressions. For example, the following is evaluated as <tt class=" ">if(Alloy.Globals.isIOS7 || Alloy.Globals.someOtherVar)</tt>:    </p>
    <p>
<tt class=" ">&lt;View id=&quot;view&quot; if=&quot;Alloy.Globals.isIOS7,Alloy.Globals.someOtherVar&quot;/&gt;</tt>    </p>
    <p>
To use <tt class=" ">AND</tt> conditions, or for more complex logic, process the conditions in alloy.js assigning a single Boolean value in the end:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">app/alloy.js </div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">Alloy.Globals.customVar = ( (OS_IOS &amp;&amp; parseInt(Ti.Platform.version, </code><code class="value">10</code><code class="plain">) &gt;= </code><code class="value">7</code><code class="plain">) || (OS_ANDROID &amp;&amp; parseFloat(Ti.Platform.version,</code><code class="value">10</code><code class="plain">) &gt;= </code><code class="value">4.0</code><code class="plain">.</code><code class="value">3</code><code class="plain">) );</code></div>
</div>
</div>        </div><a id="editButton" href="https://wiki.appcelerator.org/pages/editpage.action?pageId=41845652"><span>Edit</span></a>
    
        <div class="footer">
            Created with <a href="http://k15t.com/display/web/Scroll-Wiki-EclipseHelp-Exporter-for-Confluence" target="_blank">Scroll EclipseHelp Exporter for Confluence</a>.
        </div>
    </div>
</body>
</html>
