Ext.data.JsonP['Widget_Models']({"guide":" <!doctype html> <html> <head> <title>Widget Models</title> <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"> </meta></head> <body> <div class=\"container\"> <div class=\"header\"/> <div id=\"src-41845787\" class=\"content\"> <h1>Widget Models</h1> <p>Demonstrates using data models with a widget. </p> <div class=\"confbox admonition admonition-info aui-message hint shadowed information-macro has-no-icon\"> <div class=\"title\">App Folder Location</div> <p>alloy/test/apps/<strong>widgets/models</strong> </p> </div> <p>The only difference when using models in a widget, compared to non-widget use, is that you use <a class=\"external-link external-link\" href=\"#!/api/Alloy.Widget-method-createModel\">Widget.createModel()</a> and <a class=\"external-link external-link\" href=\"#!/api/Alloy.Widget-method-createCollection\">Widget.createCollection()</a> methods to create models and collections, respectively. These methods are directly analogous to <a class=\"external-link external-link\" href=\"#!/api/Alloy-method-createModel\">Alloy.createModel()</a> and <a class=\"external-link external-link\" href=\"#!/api/Alloy-method-createCollection\">Alloy.createCollection()</a>. You can also use the Model and Collection tags in widget views. </p> <p> <img src=\"images/download/attachments/41845787/widget_model.png\" alt=\"images/download/attachments/41845787/widget_model.png\" class=\"confluence-embedded-image\"> </img></p> <p>The sample defines a widget named <strong class=\"\">alloy.datatable</strong> that contains a <tt class=\"\">&lt;TableView/&gt;</tt> and a <tt class=\"\">&lt;Collection/&gt;</tt> element that creates a new Collection instance from the songs.js model file. Each <tt class=\"\">&lt;TableViewRow/&gt;</tt> element is bound to the value of the <tt class=\"\">info</tt> field defined by the songs collection. When a user selects a table row, the view-controller&apos;s <strong class=\"\"> <tt>handleTableClick</tt> </strong> method is called. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"title\">app/widgets/alloy.datatable/views/widget.xml</div> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\" data-title=\"app/widgets/alloy.datatable/views/widget.xml\"> <div class=\"line\"><code class=\"plain\">&lt;</code><code class=\"keyword\">Alloy</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">Collection</code><code class=\"plain\"> </code><code class=\"color1\">src</code><code class=\"plain\">=</code><code class=\"string\">&quot;songs&quot;</code><code class=\"plain\">/&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">TableView</code><code class=\"plain\"> </code><code class=\"color1\">id</code><code class=\"plain\">=</code><code class=\"string\">&quot;table&quot;</code><code class=\"plain\"> </code><code class=\"color1\">dataCollection</code><code class=\"plain\">=</code><code class=\"string\">&quot;songs&quot;</code><code class=\"plain\"> </code><code class=\"color1\">onClick</code><code class=\"plain\">=</code><code class=\"string\">&quot;handleTableClick&quot;</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">TableViewRow</code><code class=\"plain\"> </code><code class=\"color1\">title</code><code class=\"plain\">=</code><code class=\"string\">&quot;{info}&quot;</code><code class=\"plain\">/&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/</code><code class=\"keyword\">TableView</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\">&lt;/</code><code class=\"keyword\">Alloy</code><code class=\"plain\">&gt;</code></div> </div> </div> <p>The widget&apos;s view-controller populates the &quot;songs&quot; data collection with data using the Backbone <a class=\"external-link external-link\" href=\"http://docs.appcelerator.com/backbone/0.9.2/#Collection-reset\" target=\"_blank\">reset()</a> method. The <tt>handleTableClick()</tt> function uses the Backbone <a class=\"external-link external-link\" href=\"http://docs.appcelerator.com/backbone/0.9.2/#Events-trigger\" target=\"_blank\">trigger()</a> method to generate a &quot;rowClick&quot; event that&apos;s handled by the main application (see below). </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"title\">app/widgets/alloy.datatable/controllers/widget.js</div> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\" data-title=\"app/widgets/alloy.datatable/controllers/widget.js\"> <div class=\"line\"><code class=\"keyword\">function</code><code class=\"plain\"> handleTableClick(e) {</code></div> <div class=\"line\"><code class=\"plain\"> $.trigger(</code><code class=\"string\">&apos;rowClick&apos;</code><code class=\"plain\">, e);</code></div> <div class=\"line\"><code class=\"plain\">}</code></div> <div class=\"line\"><code class=\"plain\">Widget.Collections.songs.reset([</code></div> <div class=\"line\"><code class=\"plain\"> { info: </code><code class=\"string\">&apos;Beastie Boys - Super Disco Breakin\\&apos;&apos;</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\"> { info: </code><code class=\"string\">&apos;Pixies - Debaser&apos;</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\"> { info: </code><code class=\"string\">&apos;N.E.R.D. - Thrasher&apos;</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\"> { info: </code><code class=\"string\">&apos;Skrillex - Bangarang&apos;</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\"> { info: </code><code class=\"string\">&apos;Big Gigantic - Hopscotch&apos;</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\"> { info: </code><code class=\"string\">&apos;Infected Mushroom - Heavyweight&apos;</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\"> { info: </code><code class=\"string\">&apos;Nine Inch Nails - Into the Void&apos;</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\"> { info: </code><code class=\"string\">&apos;Ronald Jenkees - Disorganized Fun&apos;</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\"> { info: </code><code class=\"string\">&apos;Kazu Matsui - Stone Monkey&apos;</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\"> { info: </code><code class=\"string\">&apos;Apox - Stay Triumphant&apos;</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\"> { info: </code><code class=\"string\">&apos;Swedish House Mafia - Greyhound&apos;</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\"> { info: </code><code class=\"string\">&apos;G Love - Milk and Sugar&apos;</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\"> { info: </code><code class=\"string\">&apos;Elton John - Better Off Dead&apos;</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\"> { info: </code><code class=\"string\">&apos;Opiuo - King Prawn&apos;</code><code class=\"plain\">}</code></div> <div class=\"line\"><code class=\"plain\">]);</code></div> </div> </div> <p>The main application view that contains a <tt class=\"\">&lt;Widget/&gt;</tt> element that includes the <strong>alloy.datatable</strong> widget. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"title\">app/views/index.xml</div> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\" data-title=\"app/views/index.xml\"> <div class=\"line\"><code class=\"plain\">&lt;</code><code class=\"keyword\">Alloy</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">Window</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">Widget</code><code class=\"plain\"> </code><code class=\"color1\">src</code><code class=\"plain\">=</code><code class=\"string\">&quot;alloy.datatable&quot;</code><code class=\"plain\"> </code><code class=\"color1\">id</code><code class=\"plain\">=</code><code class=\"string\">&quot;dtable&quot;</code><code class=\"plain\">/&gt; </code></div> <div class=\"line\"><code class=\"plain\"> &lt;/</code><code class=\"keyword\">Window</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\">&lt;/</code><code class=\"keyword\">Alloy</code><code class=\"plain\">&gt;</code></div> </div> </div> <p>The main view-controller uses the Backbone <a class=\"external-link external-link\" href=\"http://docs.appcelerator.com/backbone/0.9.2/#Events-on\" target=\"_blank\">on()</a> function to bind a function handler to the &quot;rowClick&quot; event generated by the TableView. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"title\">app/controllers/index.js</div> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\" data-title=\"app/controllers/index.js\"> <div class=\"line\"><code class=\"plain\">$.dtable.on(</code><code class=\"string\">&apos;rowClick&apos;</code><code class=\"plain\">, </code><code class=\"keyword\">function</code><code class=\"plain\">(e) {</code></div> <div class=\"line\"><code class=\"plain\"> alert(e.row.title);</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> </div> </div> </div><a id=\"editButton\" href=\"https://wiki.appcelerator.org/pages/editpage.action?pageId=41845787\"><span>Edit</span></a> </div> </body> </html> ","title":"Widget Models"});