Ext.data.JsonP['iOS_Map_Kit']({"guide":" <!doctype html> <html> <head> <title>iOS Map Kit</title> <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"> </meta></head> <body> <div class=\"container\"> <div class=\"header\"/> <div id=\"src-37540542\" class=\"content\"> <h1>iOS Map Kit</h1> <p> </p> <ul class=\"toc-indentation\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/iOS_Map_Kit-section-src-37540542_iOSMapKit-Introduction\">Introduction</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/iOS_Map_Kit-section-src-37540542_iOSMapKit-Gettingstarted\">Getting started</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/iOS_Map_Kit-section-src-37540542_iOSMapKit-Views\">Views</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/iOS_Map_Kit-section-src-37540542_iOSMapKit-Annotations\">Annotations</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/iOS_Map_Kit-section-src-37540542_iOSMapKit-Routes\">Routes</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/iOS_Map_Kit-section-src-37540542_iOSMapKit-Camera\">Camera</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/iOS_Map_Kit-section-src-37540542_iOSMapKit-Eventhandling\">Event handling</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/iOS_Map_Kit-section-src-37540542_iOSMapKit-Furtherreading\">Further reading</a> </p> </li></ul> <div class=\"section section-2\" id=\"src-37540542_iOSMapKit-Introduction\"> <h2 class=\"heading\"><span>Introduction</span></h2> <p>The ti.map module provides native map support using the iOS Map Kit framework to use native iOS map features in Titanium. </p> </div> <div class=\"section section-2\" id=\"src-37540542_iOSMapKit-Gettingstarted\"> <h2 class=\"heading\"><span>Getting started</span></h2> <p>The Ti.Map module is included as part of the Titanium SDK. To include it in your project, edit your <tt>tiapp.xml</tt> file to use the module: </p> <ul class=\"\"><li class=\"\"> <p>Using the GUI Overview version of the <tt class=\"\">tiapp.xml</tt> editor, in the <strong>Modules</strong> section, click the add button (green plus sign), select the ti.map module, then click the OK button to add it. </p> </li><li> <p>If you are using a text editor, add the following to your modules section: </p> </li></ul> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">...</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">modules</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;!-- Add this line to your &lt;</code><code class=\"keyword\">modules</code><code class=\"plain\">&gt; section --&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">module</code><code class=\"plain\">&gt;ti.map&lt;/</code><code class=\"keyword\">module</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/</code><code class=\"keyword\">modules</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\">...</code></div> </div> </div> <ul class=\"\"><li class=\"\"> <p>To use the <tt class=\"\">userLocation</tt> property of the map-view, add either the <a class=\"external-link external-link\" href=\"https://developer.apple.com/library/prerelease/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW26\" target=\"_blank\"> <tt class=\"\">NSLocationWhenInUseUsageDescription</tt> </a> or <a class=\"external-link external-link\" href=\"https://developer.apple.com/library/prerelease/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW18\" target=\"_blank\"> <tt>NSLocationAlwaysUsageDescription</tt> </a> key to the iOS plist section. For iOS 11+, also add the <span style=\"color: #6a6a6a;\"> <span style=\"color: #000000;\"> <a class=\"external-link external-link\" href=\"https://developer.apple.com/documentation/corelocation/choosing_the_authorization_level_for_location_services/requesting_always_authorization?language=objc\" target=\"_blank\">NSLocationAlwaysAndWhenInUseUsageDescription</a> </span> key for best user experience: </span> </p> </li></ul> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">...</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">ios</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">plist</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">dict</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">key</code><code class=\"plain\">&gt;NSLocationAlwaysUsageDescription&lt;/</code><code class=\"keyword\">key</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">string</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> Specify the reason for accessing the user&apos;s location information.</code></div> <div class=\"line\"><code class=\"plain\"> This appears in the alert dialog when asking the user for permission to</code></div> <div class=\"line\"><code class=\"plain\"> access their location.</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/</code><code class=\"keyword\">string</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;!-- iOS 11+ only. Ignored on older iOS versions --&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">key</code><code class=\"plain\">&gt;NSLocationAlwaysAndWhenInUseUsageDescription&lt;/</code><code class=\"keyword\">key</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">string</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> Specify additional information on accessing the user location. Refer</code></div> <div class=\"line\"><code class=\"plain\"> to the Apple docs for details.</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/</code><code class=\"keyword\">string</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/</code><code class=\"keyword\">dict</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/</code><code class=\"keyword\">plist</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/</code><code class=\"keyword\">ios</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\">...</code></div> </div> </div> <p>Within your application&apos;s JavaScript files, instantiate the module with the <tt>require(&apos;ti.map&apos;)</tt> method: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> MapModule = require(</code><code class=\"string\">&apos;ti.map&apos;</code><code class=\"plain\">);</code></div> </div> </div> <p>Then, you can make subsequent API calls using the previously created <tt>MapModule</tt> object . </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"comments\">// Create a default Map.View class</code></div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> mapView = MapModule.createView({</code></div> <div class=\"line\"><code class=\"plain\"> mapType:MapModule.NORMAL_TYPE</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> </div> </div> </div> <div class=\"section section-2\" id=\"src-37540542_iOSMapKit-Views\"> <h2 class=\"heading\"><span>Views</span></h2> <p>The <tt class=\"\">View</tt> class is the core UI component of the ti.map module. It allows Titanium to use the iOS map kit framework to view geographic data and add annotations and routes. As it is a native UI component, users will also have access to features like scrolling and multi-touch zoom. In its most basic form, the <tt>View</tt> can simply display a basic map given a geographic position via latitude and longitude. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"comments\">// Add in the module</code></div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> MapModule = require(</code><code class=\"string\">&apos;ti.map&apos;</code><code class=\"plain\">);</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> win = Ti.UI.createWindow({ backgroundColor: </code><code class=\"string\">&apos;white&apos;</code><code class=\"plain\"> });</code></div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> oneThird = Ti.Platform.displayCaps.platformHeight / 3;</code></div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> map1 = MapModule.createView({</code></div> <div class=\"line\"><code class=\"plain\"> userLocation: </code><code class=\"keyword\">true</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> mapType: MapModule.NORMAL_TYPE,</code></div> <div class=\"line\"><code class=\"plain\"> animate: </code><code class=\"keyword\">true</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> region: { latitude: -33.87365, longitude: 151.20689, latitudeDelta: 0.1, longitudeDelta: 0.1 },</code></div> <div class=\"line\"><code class=\"plain\"> height: </code><code class=\"string\">&apos;33%&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> top: 0,</code></div> <div class=\"line\"><code class=\"plain\"> width: Ti.UI.FILL</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> map2 = MapModule.createView({</code></div> <div class=\"line\"><code class=\"plain\"> userLocation: </code><code class=\"keyword\">true</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> mapType: MapModule.HYBRID_TYPE,</code></div> <div class=\"line\"><code class=\"plain\"> animate: </code><code class=\"keyword\">true</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> region: { latitude: -33.87365, longitude: 151.20689, latitudeDelta: 0.1, longitudeDelta: 0.1 },</code></div> <div class=\"line\"><code class=\"plain\"> height: </code><code class=\"string\">&apos;33%&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> top: oneThird,</code></div> <div class=\"line\"><code class=\"plain\"> width: Ti.UI.FILL</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> map3 = MapModule.createView({</code></div> <div class=\"line\"><code class=\"plain\"> userLocation: </code><code class=\"keyword\">true</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> mapType: MapModule.SATELLITE_TYPE,</code></div> <div class=\"line\"><code class=\"plain\"> animate: </code><code class=\"keyword\">true</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> region: { latitude: -33.87365, longitude: 151.20689, latitudeDelta: 0.1, longitudeDelta: 0.1 },</code></div> <div class=\"line\"><code class=\"plain\"> height: </code><code class=\"string\">&apos;33%&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> top: 2 * oneThird,</code></div> <div class=\"line\"><code class=\"plain\"> width: Ti.UI.FILL</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">win.add(map1);</code></div> <div class=\"line\"><code class=\"plain\">win.add(map2);</code></div> <div class=\"line\"><code class=\"plain\">win.add(map3);</code></div> <div class=\"line\"><code class=\"plain\">win.open();</code></div> </div> </div> <p> <img src=\"images/download/attachments/37540542/MultiViewMap-New.jpg\" alt=\"images/download/attachments/37540542/MultiViewMap-New.jpg\" class=\"confluence-embedded-image\" width=\"320\"> </img></p> <p>The previous example displays three map views of the same region in the same window with different map types set. From the top to bottom, you have an example of <tt class=\"\">NORMAL_TYPE</tt>, <tt class=\"\">HYBRID_TYPE</tt> and <tt>SATELLITE_TYPE</tt>. </p> <p>As seen above, changing a few lines of code alters the appearance of each map. The following properties are unique to Map View to manipulate the appearance and behavior of the View class: </p> <ul class=\"\"><li class=\"\"> <p><tt>mapType</tt> - Indicates what type of map should be displayed. Choses are: </p> <ul class=\"\"><li class=\"\"> <p><tt>&lt;MapObject&gt;.STANDARD_TYPE - </tt>Basic map with labels. </p> </li><li class=\"\"> <p><tt>&lt;MapObject&gt;.SATELLITE_TYPE - </tt>Satellite imagery without map labels. </p> </li><li class=\"\"> <p><tt>&lt;MapObject&gt;.HYBRID_TYPE</tt> - SATELLITE_TYPE with map labels. </p> </li></ul></li><li class=\"\"> <p><tt class=\"\">region</tt> - This is an object that contains the four properties defining the visible area of the <tt class=\"\">View</tt>. The same latitude and longitude of a <tt class=\"\">region</tt> can be represented with a different level of zoom via the <tt class=\"\">latitudeDelta </tt>and <tt>longitudeDelta</tt> properties. </p> <ul class=\"\"><li class=\"\"> <p><tt>latitude</tt>- The latitude of your map&apos;s target region. </p> </li><li class=\"\"> <p><tt>longitude</tt> - The longitude of your map&apos;s target region. </p> </li><li class=\"\"> <p><tt class=\"\">latitudeDelta</tt> - The measure of latitude north and south from your target regions&apos;s latitude that will be visible in the <tt>View</tt>. The smaller the delta value, the closer the zoom on your map. </p> </li><li class=\"\"> <p><tt class=\"\">longitudeDelta</tt> - The measure of longitude east and west from your target regions&apos;s longitude that will be visible in the <tt>View.</tt> </p> </li></ul></li><li class=\"\"> <p><tt>animate</tt> - A boolean that indicates whether or not map actions, like opening and adding annotations, should be animated. </p> </li><li class=\"\"> <p><tt>userLocation</tt> - A boolean that indicates if the map should show the user&apos;s current device location as a pin on the map. </p> </li><li class=\"\"> <p><tt class=\"\">camera</tt> - Specify a Camera object to view the map in a 3D perspective. For more details, see the <a class=\"document-link\" href=\"#!/guide/iOS_Map_Kit-section-src-37540542_iOSMapKit-Camera\">Camera section</a>. </p> </li><li class=\"\"> <p><tt>rotatesEnabled</tt> - A boolean that indicates if the map can be rotated by the user. </p> </li></ul> <p>There are two more components that add a significant amount of functionality to your map <tt class=\"\">View, </tt><tt class=\"\">Annotation</tt> and <tt>Route</tt> instances. They allow us to add places of interest to our maps as well as plot paths between them. </p> </div> <div class=\"section section-2\" id=\"src-37540542_iOSMapKit-Annotations\"> <h2 class=\"heading\"><span>Annotations</span></h2> <p>Annotations, created with the <tt class=\"\">createAnnotation</tt> method, mark places of interest on our <tt class=\"\">View </tt>with &quot;pins&quot;, images, and text. They can be added when a <tt class=\"\">View</tt> is created via the <tt class=\"\">annotations</tt> array property, or anytime afterwards with the <tt>addAnnotation</tt> method. Users can even interact with them to learn more about annotated locations. </p> <p>Adding an annotation to a <tt>View</tt> is simple. Let&apos;s modify the previous example to show only one view of Sydney with some landmarks. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> MapModule = require(</code><code class=\"string\">&apos;ti.map&apos;</code><code class=\"plain\">);</code></div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> win = Ti.UI.createWindow();</code></div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> opera = MapModule.createAnnotation({</code></div> <div class=\"line\"><code class=\"plain\"> latitude: -33.8569,</code></div> <div class=\"line\"><code class=\"plain\"> longitude: 151.2153,</code></div> <div class=\"line\"><code class=\"plain\"> centerOffset: { x: 80, y: 25 },</code></div> <div class=\"line\"><code class=\"plain\"> image: </code><code class=\"string\">&apos;SydneyOperaHouse.png&apos;</code><code class=\"plain\">, </code><code class=\"comments\">// 80x80px in this example</code></div> <div class=\"line\"><code class=\"plain\"> title: </code><code class=\"string\">&apos;Sydney Opera House&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> subtitle: </code><code class=\"string\">&apos;Sydney, New South Wales, Australia&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// For events, use the Map View&apos;s click event</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// and monitor the clicksource property for &apos;rightButton&apos;. </code></div> <div class=\"line\"><code class=\"plain\"> rightButton: Ti.UI.iOS.SystemButton.CONTACT_ADD</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> bridge = MapModule.createAnnotation({</code></div> <div class=\"line\"><code class=\"plain\"> latitude: -33.852222,</code></div> <div class=\"line\"><code class=\"plain\"> longitude: 151.210556,</code></div> <div class=\"line\"><code class=\"plain\"> pincolor: MapModule.ANNOTATION_PURPLE, </code></div> <div class=\"line\"><code class=\"plain\"> title: </code><code class=\"string\">&apos;Sydney Harbour Bridge&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> subtitle: </code><code class=\"string\">&apos;Port Jackson&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// For eventing, use the Map View&apos;s click event</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// and monitor the clicksource property for &apos;leftButton&apos;.</code></div> <div class=\"line\"><code class=\"plain\"> leftButton: Ti.UI.iOS.SystemButton.INFO_DARK</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> mapview = MapModule.createView({</code></div> <div class=\"line\"><code class=\"plain\"> mapType: MapModule.NORMAL_TYPE,</code></div> <div class=\"line\"><code class=\"plain\"> region: { latitude: -33.87365, longitude: 151.20689, latitudeDelta: 0.1, longitudeDelta: 0.1 },</code></div> <div class=\"line\"><code class=\"plain\"> annotations: [bridge, opera]</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">win.add(mapview);</code></div> <div class=\"line\"><code class=\"plain\">win.open();</code></div> </div> </div> <p> <img src=\"images/download/attachments/37540542/Annotation.jpg\" alt=\"images/download/attachments/37540542/Annotation.jpg\" class=\"confluence-embedded-image\" width=\"320\"> </img></p> <p>The previous example creates two annotations and adds them to the view. Note that the View&apos;s annotations property accepts an array. Even if there is only one annotation, we still need to pass it to the <tt>View</tt> as an entry in an array. The map view displays three custom annotations: </p> <ul class=\"\"><li class=\"\"> <p>The Sydney Harbour Bridge annotation uses the default pin image, and the callout window contains the iOS info system button, set with the <tt>leftButton</tt> property. </p> </li><li class=\"\"> <p>The Sydney Opera House annotation uses an image of the opera house instead of the default pin image, set with the <tt class=\"\">image</tt> property. The callout window contains the iOS add system button, set with the <tt>rightButton</tt> property. </p> </li></ul> <p>L et&apos;s take a look at some of the properties that can be used to customize an annotation. </p> <ul class=\"\"><li class=\"\"> <p><tt class=\"\">canShowCallout</tt> - Set to <tt class=\"\">false</tt> to disable showing the callout window when the annotation is clicked. Default is <tt>true</tt>. </p> </li><li class=\"\"> <p><tt>centerOffset</tt> - Repositions the annotation from its actual location. Specify a point where positive offset values move the annotation view down and right, while negative values move it up and left. </p> </li><li class=\"\"> <p><tt class=\"\">customView</tt> &#x2013;A custom view to be used in place of the default pin image. This property takes precedence over the <tt>image</tt> property. The annotation does not respond to any user interaction or events. </p> </li><li class=\"\"> <p><tt class=\"\">draggable</tt> - A boolean variable that indicates whether or not the annotation can be dragged and replaced in the <tt>View</tt>. </p> </li><li class=\"\"> <p><tt>image</tt> - The URL to an image to be used in place of the default pin image. </p> </li><li class=\"\"> <p><tt class=\"\">leftButton</tt>/<tt class=\"\">rightButton</tt> - Place an <a class=\"external-link external-link\" href=\"#!/api/Titanium.UI.iPhone.SystemButton\">iOS system button</a> in the left or right side of the annotation&apos;s callout window. Listen to the map view&apos;s <tt class=\"\">click</tt> event and check the <tt class=\"\">clicksource</tt> property for either <tt class=\"\">leftButton</tt> or <tt>rightButton</tt> to see if the user interacted with this component. </p> </li><li class=\"\"> <p><tt>pincolor </tt> - The color of the default pin representing an annotation. It can have the following values: </p> <ul class=\"\"><li class=\"\"> <p><tt>&lt;MapObject&gt;.ANNOTATION_GREEN</tt> </p> </li><li class=\"\"> <p><tt>&lt;MapObject&gt;.ANNOTATION_PURPLE</tt> </p> </li><li class=\"\"> <p><tt>&lt;MapObject&gt;.ANNOTATION_RED</tt> </p> </li></ul></li><li class=\"\"> <p><tt>subtitle</tt> - The subtitle text that appears on your annotation when clicked. </p> </li><li class=\"\"> <p><tt>title</tt> - The main title text that appears on your annotation when clicked. </p> </li></ul> <p>The next section discusses the <tt class=\"\">Route</tt> class, a feature to create paths between locations on a <tt>View</tt>. </p> </div> <div class=\"section section-2\" id=\"src-37540542_iOSMapKit-Routes\"> <h2 class=\"heading\"><span>Routes</span></h2> <p>Routes, created with the <tt class=\"\">createRoute</tt> method, allow us to draw paths between locations on a <tt>View</tt>. These paths can be driving directions, bike paths, or any other reason you have to connect point A to point B. In the example below, a route is created going between three points: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> MapModule = require(</code><code class=\"string\">&apos;ti.map&apos;</code><code class=\"plain\">);</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> win = Ti.UI.createWindow({ backgroundColor: </code><code class=\"string\">&apos;white&apos;</code><code class=\"plain\"> });</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> appc = MapModule.createAnnotation({</code></div> <div class=\"line\"><code class=\"plain\"> latitude: 37.389569,</code></div> <div class=\"line\"><code class=\"plain\"> longitude: -122.050212,</code></div> <div class=\"line\"><code class=\"plain\"> title: </code><code class=\"string\">&apos;Appcelerator HQ&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> subtitle: </code><code class=\"string\">&apos;Mountain View, CA&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> pincolor: MapModule.ANNOTATION_GREEN</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> apple = MapModule.createAnnotation({</code></div> <div class=\"line\"><code class=\"plain\"> latitude: 37.331689,</code></div> <div class=\"line\"><code class=\"plain\"> longitude: -122.030731,</code></div> <div class=\"line\"><code class=\"plain\"> title: </code><code class=\"string\">&apos;Apple HQ&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> subtitle: </code><code class=\"string\">&apos;Cupertino, CA&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> pincolor: MapModule.ANNOTATION_RED</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> google = MapModule.createAnnotation({</code></div> <div class=\"line\"><code class=\"plain\"> latitude: 37.422502,</code></div> <div class=\"line\"><code class=\"plain\"> longitude: -122.0855498,</code></div> <div class=\"line\"><code class=\"plain\"> title: </code><code class=\"string\">&apos;Google HQ&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> subtitle: </code><code class=\"string\">&apos;Mountain View, CA&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> pincolor: MapModule.ANNOTATION_RED</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> route = MapModule.createRoute({</code></div> <div class=\"line\"><code class=\"plain\"> width: 4,</code></div> <div class=\"line\"><code class=\"plain\"> color: </code><code class=\"string\">&apos;#f00&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> points: [</code></div> <div class=\"line\"><code class=\"plain\"> { latitude: google.latitude, longitude: google.longitude },</code></div> <div class=\"line\"><code class=\"plain\"> { latitude: appc.latitude, longitude: appc.longitude },</code></div> <div class=\"line\"><code class=\"plain\"> { latitude: apple.latitude, longitude: apple.longitude }</code></div> <div class=\"line\"><code class=\"plain\"> ]</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> mapview = MapModule.createView({</code></div> <div class=\"line\"><code class=\"plain\"> mapType: MapModule.NORMAL_TYPE,</code></div> <div class=\"line\"><code class=\"plain\"> region: { latitude: 37.389569, longitude: -122.050212, latitudeDelta: 0.2, longitudeDelta: 0.2 },</code></div> <div class=\"line\"><code class=\"plain\"> annotations: [google, appc, apple]</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">mapview.addRoute(route);</code></div> <div class=\"line\"><code class=\"plain\">win.add(mapview);</code></div> <div class=\"line\"><code class=\"plain\">win.open();</code></div> </div> </div> <p>After creating the three annotation points, the application creates a route object, using the <tt>createRoute</tt> method. Let&apos;s take a look at each of the route properties. </p> <ul class=\"\"><li class=\"\"> <p><tt>points</tt> - Array of latitude and longitude coordinates that represent each point in the route. As geometry dictates, you must have a least two points to draw a line, or route in this case. </p> </li><li class=\"\"> <p><tt>color</tt> - Specifies the color of the line. </p> </li><li class=\"\"> <p><tt>width </tt> - Specifies the width of the line in pixels. </p> </li><li class=\"\"> <p><tt class=\"\">level</tt> - Specifies which overlay level to place the route. Set to either <tt class=\"\"> &lt;MapObject&gt;.OVERLAY_LEVEL_ABOVE_LABELS</tt> (above map labels) or <tt>&lt;MapObject&gt;.OVERLAY_LEVEL_ABOVE_ROADS</tt> (below labels but above roads). </p> </li></ul> <p>Once the route object is created, the application can add it to the view using the <tt>addRoute</tt> method. </p> </div> <div class=\"section section-2\" id=\"src-37540542_iOSMapKit-Camera\"> <h2 class=\"heading\"><span>Camera</span></h2> <p>You can view the map using a 3D perspective by specifying a Camera object that describes the coordinate of the location you want to look at and the pitch, altitude and heading of the camera. To create a Camera object, use the <tt>createCamera</tt> method and pass in a dictionary with the following properties: </p> <ul class=\"\"><li class=\"\"> <p><tt>centerCoordinate</tt>: point that you want to look at. </p> </li><li class=\"\"> <p><tt>altitude</tt>: how high above the ground to position the camera in meters. </p> </li><li class=\"\"> <p><tt class=\"\">heading</tt>: angle relative to the center coordinate to position the camera in degrees. <tt class=\"\">0</tt> means due North, <tt class=\"\">90</tt> mean due East, <tt>180</tt> mean due South, and so forth. </p> </li><li class=\"\"> <p><tt class=\"\">pitch</tt>: angle to tilt the camera downwards in degrees. This property is set to <tt>0</tt> (flat, no tilt) if the map type is either satellite or hybrid. </p> </li></ul> <p>After you have created your Camera object, you can either set it to the View&apos;s <tt class=\"\">camera</tt> property or pass the object to the View&apos;s <tt>animateCamera</tt> method. The property changes the perspective without an animation, while the method animates the perspective change. The map view needs to be on screen before using these APIs. </p> <p>You can customize the look of the map by specifying the following Map View properties: </p> <ul class=\"\"><li class=\"\"> <p><tt>pitchEnabled</tt> - A boolean specifying whether to use the Camera&apos;s pitch information. </p> </li><li class=\"\"> <p><tt>showsBuildings</tt> - A boolean specifying whether to display extruding building information if available. </p> </li><li class=\"\"> <p><tt>showsPointsOfInterest</tt> - A boolean specifying whether to display points of interest. </p> </li></ul> <p>The example below views the Eiffel Tower looking towards the Seine River. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> MapModule = require(</code><code class=\"string\">&apos;ti.map&apos;</code><code class=\"plain\">);</code></div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> win = Ti.UI.createWindow();</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"comments\">// Camera view centered on the Eiffel Tower</code></div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> pariscam = MapModule.createCamera({</code></div> <div class=\"line\"><code class=\"plain\"> altitude: 300, </code></div> <div class=\"line\"><code class=\"plain\"> centerCoordinate: {</code></div> <div class=\"line\"><code class=\"plain\"> longitude: 2.2945,</code></div> <div class=\"line\"><code class=\"plain\"> latitude: 48.8582</code></div> <div class=\"line\"><code class=\"plain\"> }, </code></div> <div class=\"line\"><code class=\"plain\"> heading: -45, </code></div> <div class=\"line\"><code class=\"plain\"> pitch: 60</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"comments\">// Map centered on the Eiffel Tower</code></div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> mapview = MapModule.createView({</code></div> <div class=\"line\"><code class=\"plain\"> mapType: MapModule.NORMAL_TYPE,</code></div> <div class=\"line\"><code class=\"plain\"> animate: </code><code class=\"keyword\">true</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> region: { latitude: 48.8582, longitude: 2.2945, latitudeDelta: 0.02, longitudeDelta: 0.02 }</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"comments\">// Change the view perspective after the map view appears on the display</code></div> <div class=\"line\"><code class=\"keyword\">function</code><code class=\"plain\"> animateCamera() {</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// Remove the event listener or else you cannot pan the view</code></div> <div class=\"line\"><code class=\"plain\"> mapview.removeEventListener(</code><code class=\"string\">&apos;complete&apos;</code><code class=\"plain\">, animateCamera);</code></div> <div class=\"line\"><code class=\"plain\">\t</code><code class=\"comments\">// Does not animate the camera change</code></div> <div class=\"line\"><code class=\"plain\">\t</code><code class=\"comments\">//mapview.camera = pariscam;</code></div> <div class=\"line\"><code class=\"plain\">\t</code><code class=\"comments\">// Animates the camera change</code></div> <div class=\"line\"><code class=\"plain\">\tmapview.animateCamera({</code></div> <div class=\"line\"><code class=\"plain\"> camera: pariscam,</code></div> <div class=\"line\"><code class=\"plain\"> curve: Ti.UI.ANIMATION_CURVE_EASE_IN,</code></div> <div class=\"line\"><code class=\"plain\"> duration: 500</code></div> <div class=\"line\"><code class=\"plain\">\t});</code></div> <div class=\"line\"><code class=\"plain\">};</code></div> <div class=\"line\"><code class=\"plain\">mapview.addEventListener(</code><code class=\"string\">&apos;complete&apos;</code><code class=\"plain\">, animateCamera);</code></div> <div class=\"line\"><code class=\"plain\">win.add(mapview);</code></div> <div class=\"line\"><code class=\"plain\">win.open();</code></div> </div> </div> <p> <img src=\"images/download/attachments/37540542/ParisCamera.png\" alt=\"images/download/attachments/37540542/ParisCamera.png\" class=\"confluence-embedded-image\" width=\"320\"> </img></p> </div> <div class=\"section section-2\" id=\"src-37540542_iOSMapKit-Eventhandling\"> <h2 class=\"heading\"><span>Event handling</span></h2> <p>The Map View object provides a few extra events that provide additional control for using the Map module: </p> <ul class=\"\"><li class=\"\"> <p><tt class=\"\">click</tt> - This event only fires when the user selects or deselects an Annotation object and does not respond to any other user interaction. Check the event object&apos;s <tt class=\"\">annotation</tt> property to see which annotation was clicked and the <tt>clicksource</tt> property to see what part of the annotation the user clicked. </p> </li><li class=\"\"> <p><tt>complete</tt> - This event fires when the Map View finishes rendering. </p> </li><li class=\"\"> <p><tt class=\"\">pinchangedragstate </tt> - This event fires when the pin&apos;s drag state changes if the pin&apos;s <tt class=\"\">draggable</tt> property is set to true. Check the event object&apos;s <tt class=\"\">annotation</tt> property to see which annotation was clicked and the <tt>newState</tt> property for one of the following: </p> <ul class=\"\"><li> <p>&lt; MapModule&gt;.ANNOTATION_DRAG_STATE_START &#x2013; indicates the user started dragging the pin. </p> </li><li> <p>&lt;MapModule&gt;.ANNOTATION_DRAG_STATE_END &#x2013; indicates the user stopped dragging the pin. </p> </li></ul></li><li class=\"\"> <p><tt>regionchanged</tt> - This event fires when the user either changes the zoom level or pans the Map View. The event returns the new latitude and longitude coordinates as well as delta values. </p> </li></ul> <p>For example, the following code listens to each of the previous events and outputs information to the console when each event fires: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> MapModule = require(</code><code class=\"string\">&apos;ti.map&apos;</code><code class=\"plain\">);</code></div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> win = Ti.UI.createWindow();</code></div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> appc = MapModule.createAnnotation({</code></div> <div class=\"line\"><code class=\"plain\"> latitude: 37.389569,</code></div> <div class=\"line\"><code class=\"plain\"> longitude: -122.050212,</code></div> <div class=\"line\"><code class=\"plain\"> title: </code><code class=\"string\">&apos;Appcelerator HQ&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> subtitle: </code><code class=\"string\">&apos;Mountain View, CA&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> pincolor: MapModule.ANNOTATION_GREEN,</code></div> <div class=\"line\"><code class=\"plain\"> draggable: </code><code class=\"keyword\">true</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> mapview = MapModule.createView({</code></div> <div class=\"line\"><code class=\"plain\"> mapType: MapModule.HYBRID_TYPE,</code></div> <div class=\"line\"><code class=\"plain\"> region: { latitude: 37.389569, longitude: -122.050212, latitudeDelta: 0.2, longitudeDelta: 0.2 },</code></div> <div class=\"line\"><code class=\"plain\"> annotations: [appc]</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"plain\">mapview.addEventListener(</code><code class=\"string\">&apos;pinchangedragstate&apos;</code><code class=\"plain\">, </code><code class=\"keyword\">function</code><code class=\"plain\"> (e) {</code></div> <div class=\"line\"><code class=\"plain\"> Ti.API.info(e.type);</code></div> <div class=\"line\"><code class=\"plain\"> Ti.API.info(JSON.stringify(e.newState));</code></div> <div class=\"line\"><code class=\"plain\">}); </code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">mapview.addEventListener(</code><code class=\"string\">&apos;click&apos;</code><code class=\"plain\">, </code><code class=\"keyword\">function</code><code class=\"plain\"> (e) {</code></div> <div class=\"line\"><code class=\"plain\"> Ti.API.info(e.type);</code></div> <div class=\"line\"><code class=\"plain\"> Ti.API.info(JSON.stringify(e.clicksource));</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">mapview.addEventListener(</code><code class=\"string\">&apos;regionchanged&apos;</code><code class=\"plain\">, </code><code class=\"keyword\">function</code><code class=\"plain\"> (e) {</code></div> <div class=\"line\"><code class=\"plain\"> Ti.API.info(e.type);</code></div> <div class=\"line\"><code class=\"plain\"> Ti.API.info(e.latitude + </code><code class=\"string\">&apos;,&apos;</code><code class=\"plain\"> + e.longitude);</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">mapview.addEventListener(</code><code class=\"string\">&apos;complete&apos;</code><code class=\"plain\">, </code><code class=\"keyword\">function</code><code class=\"plain\"> (e) {</code></div> <div class=\"line\"><code class=\"plain\"> Ti.API.info(e.type);</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">win.add(mapview);</code></div> <div class=\"line\"><code class=\"plain\">win.open();</code></div> </div> </div> <p>The application responds to the user&apos;s interaction of selecting the annotation and panning as seen by the console output. </p> <p>The Annotation and Route objects do not have events. To support click events on the Annotation object, use the Map View click event as described before. </p> </div> <div class=\"section section-2\" id=\"src-37540542_iOSMapKit-Furtherreading\"> <h2 class=\"heading\"><span>Further reading</span></h2> <ul class=\"\"><li> <p><a class=\"external-link external-link\" href=\"#!/api/Modules.Map\">Titanium Map Module API Reference Documentation</a> </p> </li></ul> </div> </div><a id=\"editButton\" href=\"https://wiki.appcelerator.org/pages/editpage.action?pageId=37540542\"><span>Edit</span></a> </div> </body> </html> ","title":"iOS Map Kit"});