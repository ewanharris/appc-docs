<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Sending and Scheduling Push Notifications</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta content="Scroll EclipseHelp Exporter" name="generator"/>

    <link type="text/css" rel="stylesheet"/>
    <link type="text/css" rel="stylesheet"/>
    <link type="text/css" rel="stylesheet" media="print"/>
</head>
<body>
    <div class="container">
        <div class="header"/>

        <div id="43298780" class="content">
            <h1>Sending and Scheduling Push Notifications</h1>
    <p>
This guide explains how to send and schedule push notifications in Appcelerator Dashboard.    </p>
    <p>
    </p>
<ul class="toc-indentation "><li class=" ">    <p>
<a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-OverviewofSendingPushNotifications">Overview of Sending Push Notifications</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-Sendingpushnotifications">Sending push notifications</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-AboutNotificationPayloads">About Notification Payloads</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p>
<a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-CustomJSONpayloads">Custom JSON payloads</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-AboutJSONPayloadsDeliveredtoDevices">About JSON Payloads Delivered to Devices </a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-NotificationFeatures">Notification Features</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p>
<a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-InteractiveNotifications(iOS8andlater)">Interactive Notifications (iOS 8 and later)</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-SilentPushNotifications(iOS7andlater)">Silent Push Notifications (iOS 7 and later)</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-badgesNotificationBadges">Notification Badges</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-soundsNotificationSounds">Notification Sounds</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-androidAndroid-specificpayloadfields">Android-specific payload fields</a>    </p>
</li></ul></li></ul></li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-Troubleshootingcommonerrors">Troubleshooting common errors</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p>
<a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-'Subscriptionnotfound'error">'Subscription not found' error</a>    </p>
</li></ul></li></ul>    <div class="section section-2 " id="43298780_SendingandSchedulingPushNotifications-OverviewofSendingPushNotifications">
        <h2 class="heading "><span>Overview of Sending Push Notifications</span></h2>
    <p>
    <span id="43298780_SendingandSchedulingPushNotifications-overview"><a class="confluence-anchor-link" name="43298780_SendingandSchedulingPushNotifications-overview"/></span>
    </p>
    <p>
Dashboard let you send push notifications to your Android and iOS application users. Arrow Push acts the <i class=" ">push provider</i> on behalf of your application; that is, it communicates with the Google Cloud Messaging for Android (GCM) service or Apple Push Notification Service (APNS).    </p>
    <p>
Before you can send a push notification from Dashboard, the following must be done first:    </p>
<ul class=" "><li class=" ">    <p>
In Dashboard, <a class="external-link external-link" href="#!/guide/Configuring_push_services">configure Arrow Push</a> to communicate with GCM or APNS.    </p>
</li><li class=" ">    <p>
Your application needs to do the following:    </p>
<ul class=" "><li class=" ">    <p>
<a class="external-link external-link" href="#!/guide/Subscribing_to_push_notifications-section-37551717_Subscribingtopushnotifications-Obtainingadevicetoken">Obtain a device token</a> from APNS or GCM, respectively.    </p>
</li><li class=" ">    <p>
Subscribe the user to at least one push notification <i class=" ">channel</i>. Channels provide a publish-subscribe model for push notifications. There are two ways an application can subscribe a user to receive push notifications: <a class="external-link external-link" href="#!/guide/Subscribing_to_push_notifications-section-37551717_Subscribingtopushnotifications-SubscribingtoPushNotificationswithUserSessions">session-based subscriptions</a> and <a class="external-link external-link" href="#!/guide/Subscribing_to_push_notifications-section-37551717_Subscribingtopushnotifications-SubscribingtoPushNotificationswithDeviceTokens">token-based subscriptions</a>.    </p>
</li></ul></li></ul>    <p>
How your application subscribes its users (session- or token-base subscriptions) affect, to a degree, your options for delivering notifications. In short, if you need to send notifications to specific Arrow users, use session-based subscriptions. For instance, a mobile banking app would want to notify individual account holders. If you don't need to target specific users, token-based subscriptions are a good approach, as it doesn't require the additional step of setting up an Arrow account.    </p>
    </div>
    <div class="section section-2 " id="43298780_SendingandSchedulingPushNotifications-Sendingpushnotifications">
        <h2 class="heading "><span>Sending push notifications</span></h2>
    <p>
To send a push notification, you provide Dashboard with the following information:    </p>
<ul class=" "><li class=" ">    <p>
<strong class=" ">Notification recipients and channel &ndash; </strong>If your application users were subscribed using <i class=" ">session-based subscriptions</i>, you can send a notification to specific Arrow users subscribed to a particular channel. For token-based subscriptions, you can send notifications to all users subscribed to particular channel, or all users regardless of their channel subscriptions.    </p>
</li><li class=" ">    <p>
<strong class=" ">Notification schedule &ndash; </strong>You can send a notification immediately, or schedule it to be sent at a future date and time. Scheduled notifications can be one-time or recurring.    </p>
</li><li class=" ">    <p>
<strong class=" ">Notification payload &ndash; </strong>The content of the notification, which consists minimally of an alert string to display, and optionally a sound to play or badge display. See <a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-AboutNotificationPayloads">About Notification Payloads</a>.    </p>
</li></ul>    <p>
To send a notification to users located in a geographic area, the application must have first provided their current location to Arrow. For details, see <a class="external-link external-link" href="#!/guide/Subscribing_to_push_notifications-section-37551717_Subscribingtopushnotifications-UpdatingSubscriptionswithDeviceLocation">Updating Subscriptions with Device Location</a>.    </p>
    <p>
Dashboard provides two views for sending notifications, <strong class=" ">Standard</strong> and <strong class=" ">Advanced.</strong> The Standard view provides an easy way to send notifications without having to understand the payload structure. In the  Advanced view you manually create the JSON payload. The advanced form provides additional flexibility, such as including custom payload fields.    </p>
    <p>
If you prefer can use the <a class="external-link external-link" href="/arrowdb/latest/#!/api/PushNotifications-method-notify">PushNotification.notify</a> or <a class="external-link external-link" href="/arrowdb/latest/#!/api/PushNotifications-method-notify_token">PushNotification.notify_tokens</a> REST APIs to send push notifications.    </p>
    <p>
<strong class=" ">To send a push notification from Dashboard:</strong>    </p>
<ol class=" "><li class=" ">    <p>
In Dashboard, select your application from the Apps menu.    </p>
</li><li class=" ">    <p>
From the left-side navigation, select <strong class=" ">Cloud &gt; Push Notifications</strong>.    </p>
</li><li class=" ">    <p>
Click <strong class=" ">Send Push Notification</strong> to open the Send Push Notification form<strong class=" ">. </strong>    </p>
</li><li class=" ">    <p>
Select either the <strong class=" ">Standard</strong> or <strong class=" ">Advanced</strong> tab.    </p>
</li><li class=" ">    <p>
Select <strong class=" ">Recipients</strong> and (optionally) the notification <strong class=" ">Channel Name</strong>:    </p>
<ol class=" "><li class=" ">    <p>
To send a notification to all users regardless of their channel subscriptions, select <strong class=" ">All Users</strong><strong class=" "> </strong>and leave the <strong class=" ">Channel Name</strong> field blank.    </p>
</li><li class=" ">    <p>
To send a notification to all users subscribed to a particular channel, select <strong class=" ">All Users</strong> and enter the channel name in the <strong class=" ">Channel Name</strong> field.    </p>
</li><li class=" ">    <p>
To send a notification to specific users who are subscribed to a particular channel<i class=" ">,</i> select <strong class=" ">Specific Users</strong>, then:    </p>
<ol class=" "><li class=" ">    <p>
Click the add<strong class=" "> (+)</strong> button in the <strong class=" ">To Users</strong> field.    </p>
</li><li class=" ">    <p>
Select the desired recipients from the list of users. To locate a particular user, enter their username in the search field.    </p>
</li><li class=" ">    <p>
In the <strong class=" ">Channel Name</strong> field enter the name of the target channel subscription. Note: You must specify a channel when sending a notification to specific users.    </p>
</li></ol></li><li class=" ">    <p>
To send a notification to all users located within a geographic selection, select <strong class=" ">Geographic Selection,</strong> then:    </p>
<ol class=" "><li class=" ">    <p>
Click the add (<strong class=" ">+</strong>) button in the <strong class=" ">Place</strong> field and select an existing <a class="external-link external-link" href="#!/guide/Managing_Places">Place</a>. This defines the center points of the geographic selection. The selected Place must have a defined latitude and longitude.    </p>
</li><li class=" ">    <p>
In the <strong class=" ">Radius</strong> field, enter the distance (in Miles or Meters) from the selected Place to define the size of the geographic selection.    </p>
</li></ol></li></ol></li><li class=" ">    <p>
To specify when to deliver the notification, in the <strong class=" ">Send When</strong> field select one of the following options:    </p>
<ol class=" "><li class=" ">    <p>
To send the notification immediately, select <strong class=" ">Send Now.</strong>    </p>
</li><li class=" ">    <p>
To schedule a one-time notification, select <strong class=" ">One-Time</strong> and then select the delivery date and time (All times are in UTC.)    </p>
</li><li class=" ">    <p>
To schedule a recurring notification, select <strong class=" ">Recurring,</strong> select the start date and time, the end date, and the recurrence interval: <strong class=" ">Daily, Weekly,</strong> or <strong class=" ">Monthly.</strong> (All times are in UTC.)    </p>
</li></ol></li><li class=" ">    <p>
To define the notification payload using the <strong class=" ">Standard</strong> view:    </p>
<ol class=" "><li class=" ">    <p>
In the <strong class=" ">Alert</strong> field enter the notification message to display on the device.    </p>
</li><li class=" ">    <p>
In the <strong class=" ">Badge</strong> field, enter a badge value. See <a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-badges">Notification Badges</a> for details.    </p>
</li><li class=" ">    <p>
In the <strong class=" ">Sound</strong> field, select <strong class=" ">None, Default,</strong> or <strong class=" ">Custom. </strong>See <a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-sounds">Notification Sounds</a> for details.    </p>
</li><li class=" ">    <p>
For iOS devices:    </p>
<ol class=" "><li class=" ">    <p>
In the <strong class=" ">Content-Available</strong> field, check the box to indicate that new content is available. This is used to support Newsstand apps and background content downloads.    </p>
</li><li class=" ">    <p>
In the <strong class=" ">Category</strong> field, enter the name of the category to use for interactive notifications. See <a class="external-link external-link" href="#!/guide/iOS_Interactive_Notifications">iOS Interactive Notifications</a>.    </p>
</li></ol></li><li class=" ">    <p>
For Android devices:    </p>
<ol class=" "><li class=" ">    <p>
in the <strong class=" ">Vibrate</strong> field select No or Yes to have the device vibrate or not upon receipt of the notification.    </p>
</li><li class=" ">    <p>
In the <strong class=" ">Title</strong> field (Android, only) select the title to display with the Alert message. See <a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-title">Notification Titles</a> for details.    </p>
</li><li class=" ">    <p>
In the <strong class=" ">Icon</strong> field (Android, only), specify the name of the image file to display as the notification icon. See <a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-icon">Notification Icons</a> for details.    </p>
</li></ol></li></ol></li><li class=" ">    <p>
To define the notification payload using the <strong class=" ">Advanced</strong> view:    </p>
<ol class=" "><li class=" ">    <p>
In the <strong class=" ">Custom JSON</strong> field enter a valid JSON string (see     <span style="color: #000000;">
<a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-CustomJSONpayloads">Custom JSON Payloads</a> for details).<br/>    </span>
    <span style="color: #000000;">
        <img src="images/download/attachments/43298780/advanced_form2.png" alt="images/download/attachments/43298780/advanced_form2.png" class="confluence-embedded-image confluence-content-image-border" width="600"/>
    <br/>    </span>
    </p>
</li></ol></li><li class=" ">    <p>
    <span style="color: #000000;">
Click <strong class=" ">Save Changes</strong>.     </span>
    </p>
</li></ol>    </div>
    <div class="section section-2 " id="43298780_SendingandSchedulingPushNotifications-AboutNotificationPayloads">
        <h2 class="heading "><span>About Notification Payloads</span></h2>
    <p>
The content, or <i class=" ">payload</i>, of a push notification is a JSON-encoded object whose fields contain the payload values. The JSON object typically contains one of the  &quot;standard&quot; notification fields. Standard fields are supported by both iOS and Android devices. Some fields are platform-specific, such as <tt class=" ">icon</tt> or <tt class=" ">title</tt>, that are only used by Android, or <tt class=" ">category</tt> and <tt class=" ">content-available</tt>, that are only used by iOS 8 devices and later.    </p>
    <p>
Standard fields include the following:    </p>
<ul class=" "><li class=" ">    <p>
<tt class=" ">alert</tt> &ndash;  The notification message displayed to the user.    </p>
</li><li class=" ">    <p>
<tt class=" ">badge</tt> &ndash; A number to display with the notification. See <a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-badges">Notification badges</a>.    </p>
</li><li class=" ">    <p>
<tt class=" ">sound</tt> &ndash; The name of an audio file to play when the notification arrives, minus its extension. See <a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-sounds">Notification sounds</a>.    </p>
</li></ul>    <p>
Android devices support the following additional fields:    </p>
<ul class=" "><li class=" ">    <p>
<tt class=" ">icon</tt> &ndash; The name of the image file to display as the icon, minus its extension.    </p>
</li><li class=" ">    <p>
<tt class=" ">title</tt> &ndash; Title displayed above the alert text. Defaults to the application name.    </p>
</li><li class=" ">    <p>
<tt class=" ">vibrate</tt> &ndash; A boolean that the device to vibrate momentarily upon receipt.    </p>
</li></ul>    <p>
See Android-specific notification fields for more information about specifying these fields.    </p>
    <p>
iOS 8 devices and later support the following additional fields:    </p>
<ul class=" "><li class=" ">    <p>
<tt class=" ">category</tt> &ndash;     <span style="color: #000000;">
The name of the category to use for interactive notifications. See     </span>
<a class="external-link external-link" href="#!/guide/iOS_Interactive_Notifications">iOS Interactive Notifications</a>    <span style="color: #000000;">
 for more information.    </span>
    </p>
</li><li class=" ">    <p>
<tt class=" ">content-available</tt> &ndash;  If set to <strong class=" ">1</strong>, indicates that new content is available.     <span style="color: #000000;">
This is used to support Newsstand apps and background content downloads.    </span>
    </p>
</li></ul>    <p>
The payload can also include custom fields that your application can read and use as desired. See <a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-CustomJSONpayloads">Custom JSON Payloads</a> for an example of using custom fields.    </p>
    <div class="section section-3 " id="43298780_SendingandSchedulingPushNotifications-CustomJSONpayloads">
        <h3 class="heading "><span>Custom JSON payloads</span></h3>
    <p>
Dashboard provides two forms, Standard and Advanced, for you to compose the payload. In the Standard form, you use common form controls to compose the payload, without having to write JSON code. In the the Advanced form you manually enter the JSON-encoded string that's sent in the notification. The JSON object can contain any of the standard fields discussed in <a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-AboutNotificationPayloads">About Notification Payloads</a>, or custom fields specific to your application. For example, the following payload contains <tt class=" ">alert</tt> and <tt class=" ">sound</tt> fields, as well as a custom field named <tt class=" ">high_score</tt>.    </p>
    <p>
        <img src="images/download/attachments/43298780/custom_json.png" alt="images/download/attachments/43298780/custom_json.png" class="confluence-embedded-image confluence-content-image-border" width="599"/>
            </p>
    <p>
Below is a more advanced custom JSON payload:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="string">"alert"</code><code class="plain">: </code><code class="string">"Sample alert"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    </code><code class="string">"badge"</code><code class="plain">: </code><code class="string">"+2"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    </code><code class="string">"category"</code><code class="plain">: </code><code class="string">"sampleCategory"</code><code class="plain">, </code></div>
<div class="line"><code class="plain">    </code><code class="string">"icon"</code><code class="plain">: </code><code class="string">"little_star"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    </code><code class="string">"sound"</code><code class="plain">: </code><code class="string">"door_bell"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    </code><code class="string">"title"</code><code class="plain">: </code><code class="string">"Example"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    </code><code class="string">"vibrate"</code><code class="plain">: </code><code class="keyword">true</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    </code><code class="string">"custom_field_1"</code><code class="plain">: </code><code class="string">"Arrow Push Rocks!"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    </code><code class="string">"custom_field_2"</code><code class="plain">: </code><code class="string">"Hi Push"</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <p>
When the device receives this payload, it will do the following:    </p>
<ul class=" "><li class=" ">    <p>
Display the &quot;Sample alert&quot; message.    </p>
</li><li class=" ">    <p>
Increment the current badge value by two.    </p>
</li><li class=" ">    <p>
Play the &quot;door_bell&quot; audio file.    </p>
</li><li class=" ">    <p>
On Android devices:    </p>
<ul class=" "><li class=" ">    <p>
The notification title will be set to &quot;Example&quot;    </p>
</li><li class=" ">    <p>
The device will vibrate    </p>
</li><li class=" ">    <p>
The &quot;little_star&quot; icon will be displayed in the notification area.    </p>
</li></ul></li><li class=" ">    <p>
On iOS 8 devices and later:    </p>
<ul class=" "><li class=" ">    <p>
The user notification actions associated with the &quot;sampleCategory&quot; user notification category.    </p>
</li></ul></li></ul>    </div>
    <div class="section section-3 " id="43298780_SendingandSchedulingPushNotifications-AboutJSONPayloadsDeliveredtoDevices">
        <h3 class="heading "><span>About JSON Payloads Delivered to Devices</span></h3>
    <p>
The notification payload  that Arrow Push delivers to GCM or APNS is slightly modified from the original JSON payload you provide to Dashboard. Also, the payloads are slightly different for Android and iOS devices.    </p>
    <p>
For Android, all Android-specific fields are contained in an <strong class=" "><tt class=" ">android</tt></strong> dictionary, while all other iOS-only and custom fields are top-level keys of the payload. For example, the payload shown in <a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-CustomJSONpayloads">Custom JSON payloads</a> will be delivered to an Android application as follows:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="string">"android"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">        </code><code class="string">"title"</code><code class="plain">: </code><code class="string">"Example"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">        </code><code class="string">"alert"</code><code class="plain">: </code><code class="string">"Sample alert"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">        </code><code class="string">"icon"</code><code class="plain">: </code><code class="string">"little_star"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">        </code><code class="string">"badge"</code><code class="plain">: </code><code class="string">"+2"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">        </code><code class="string">"sound"</code><code class="plain">: </code><code class="string">"door_bell"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">        </code><code class="string">"vibrate"</code><code class="plain">: </code><code class="keyword">true</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    },</code></div>
<div class="line"><code class="plain">    </code><code class="string">"category"</code><code class="plain">: </code><code class="string">"sampleCategory"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    </code><code class="string">"custom_field_1"</code><code class="plain">: </code><code class="string">"Arrow Push Services Rocks!"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    </code><code class="string">"custom_field_2"</code><code class="plain">: </code><code class="string">"Hi Push"</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <p>
For iOS devices, all iOS-specific fields are contained in an <strong class=" "><tt class=" ">aps</tt></strong> dictionary, while all Android-specific and custom fields are top-level keys of the payload. For example, For example, the payload shown in <a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-CustomJSONpayloads">Custom JSON payloads</a> will be delivered to an iOS application as follows:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="string">"aps"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">        </code><code class="string">"alert"</code><code class="plain">: </code><code class="string">"Sample alert"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">        </code><code class="string">"badge"</code><code class="plain">: </code><code class="string">"+2"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">        </code><code class="string">"category"</code><code class="plain">: </code><code class="string">"sampleCategory"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">        </code><code class="string">"sound"</code><code class="plain">: </code><code class="string">"door_bell"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    },</code></div>
<div class="line"><code class="plain">    </code><code class="string">"title"</code><code class="plain">: </code><code class="string">"Example"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    </code><code class="string">"icon"</code><code class="plain">: </code><code class="string">"little_star"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    </code><code class="string">"vibrate"</code><code class="plain">: </code><code class="keyword">true</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    </code><code class="string">"custom_field_1"</code><code class="plain">: </code><code class="string">"Arrow Push Rocks!"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    </code><code class="string">"custom_field_2"</code><code class="plain">: </code><code class="string">"Hi Push"</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <p>
    </p>
    </div>
    <div class="section section-3 " id="43298780_SendingandSchedulingPushNotifications-NotificationFeatures">
        <h3 class="heading "><span>Notification Features</span></h3>
    <div class="section section-4 " id="43298780_SendingandSchedulingPushNotifications-InteractiveNotifications(iOS8andlater)">
        <h4 class="heading "><span>Interactive Notifications (iOS 8 and later)</span></h4>
    <p>
    <span style="color: #484848;">
As of Titanium SDK v3.4.0 you can create interactive notifications, which users running iOS 8 or later can respond to without launching the application to the foreground.     </span>
    </p>
    <p>
    <span style="color: #484848;">
        <img src="images/download/attachments/43298780/InteractiveBannerMessage.png" alt="images/download/attachments/43298780/InteractiveBannerMessage.png" class="confluence-embedded-image"/>
        </span>
    </p>
    <p>
Your Titanium application defines one or more a <i class=" ">notification categories</i>, each of which consists of one or more <i class=" ">notification actions</i>. When you <a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-Sendingpushnotifications">create a push notification</a> in Dashboard, the <strong class=" ">Category</strong> form field lets you specify the category of interactive notification to display when the push notification arrives.    </p>
    <p>
<strong class=" ">To create an interactive notification:</strong>    </p>
<ol class=" "><li class=" ">    <p>
In your Titanium application:    </p>
<ol class=" "><li class=" ">    <p>
<a class="external-link external-link" href="#!/guide/iOS_Interactive_Notifications-section-40930452_iOSInteractiveNotifications-CreateaNotificationAction">Create and configure notification actions</a>.    </p>
</li><li class=" ">    <p>
<a class="external-link external-link" href="#!/guide/iOS_Interactive_Notifications-section-40930452_iOSInteractiveNotifications-CreateaNotificationCategory">Create notification categories</a> and assign notification actions to them.    </p>
</li><li class=" ">    <p class="_mce_tagged_br">
<a class="external-link external-link" href="#!/guide/iOS_Interactive_Notifications-section-40930452_iOSInteractiveNotifications-RegisterNotificationCategories">Register the application</a> for the desired notification categories, and to receive push notifications.    </p>
</li><li class=" ">    <p>
Register an event listener for the <tt class=" ">remotenotificationaction</tt> event, to respond to user actions when they interact with the notification.    </p>
</li></ol></li><li class=" ">    <p>
In Dashboard, send a new push notification and set the <strong class=" ">Category</strong> field to the desired notification category to use.    </p>
        <img src="images/download/attachments/43298780/push_notification.png" alt="images/download/attachments/43298780/push_notification.png" class="confluence-embedded-image"/>
        </li></ol>    <p>
When the notification arrives, the device displays the set of actions defined by the category. The <a class="external-link external-link" href="#!/api/Titanium.App.iOS-event-remotenotificationaction">remotenotificationaction</a> event fires when the user interacts with the notification.    </p>
    </div>
    <div class="section section-4 " id="43298780_SendingandSchedulingPushNotifications-SilentPushNotifications(iOS7andlater)">
        <h4 class="heading "><span>Silent Push Notifications (iOS 7 and later)</span></h4>
    <p>
The <strong class=" ">Content-Available</strong> form field lets you silently notify a Titanium or native iOS/Android application, without alerting the user at all. A silent push is often used to alert the application that new content is available to download. Once the download (or other task) initiated by the silent push is complete, the application can display a notification to the user that new content is available.    </p>
    <p>
        <img src="images/download/attachments/43298780/content-available.png" alt="images/download/attachments/43298780/content-available.png" class="confluence-embedded-image"/>
            </p>
    <p>
For detailed steps on enabling silent push notifications in your Titanium application, see <a class="external-link external-link" href="#!/guide/iOS_Background_Services-section-37539664_iOSBackgroundServices-SilentPush">Silent Push</a> in the Titanium SDK guides.    </p>
    </div>
    <div class="section section-4 " id="43298780_SendingandSchedulingPushNotifications-badgesNotificationBadges">
        <h4 class="heading "><span>Notification Badges</span></h4>
    <p>
A <strong class=" ">badge</strong> is a number displayed over the application icon (on iOS), or in the notification area (on Android). You can specify a specific badge value to display (<strong class=" ">2</strong> or <strong class=" ">10</strong>, for example), or a number prefixed by plus (<strong class=" ">+</strong>) or minus (<strong class=" ">-</strong>) symbol (<strong class=" ">+3</strong> or <strong class=" ">-6</strong>, for example). When prefixed, the currently displayed badge number is incremented or decremented by the specified amount, respectively.     <span style="color: #000000;">
To remove an application badge on iOS, specify a badge value of     </span>
<strong class=" ">0</strong>    <span style="color: #000000;">
 (zero).    </span>
    </p>
    <p>
        <img src="images/download/attachments/43298780/ios_notifiy.png" alt="images/download/attachments/43298780/ios_notifiy.png" class="confluence-embedded-image confluence-content-image-border" width="300"/>
            </p>
    <p>
        <img src="images/download/attachments/43298780/android_badge.png" alt="images/download/attachments/43298780/android_badge.png" class="confluence-embedded-image"/>
            </p>
    </div>
    <div class="section section-4 " id="43298780_SendingandSchedulingPushNotifications-soundsNotificationSounds">
        <h4 class="heading "><span>Notification Sounds</span></h4>
    <p>
The <tt class=" ">sound</tt> field in a notification payload specifies the name (minus the extension) of a local sound file resource to play the notification arrives. When a push notification arrives, you can specify a custom sound to play, the default system sound, or no sound.    </p>
<ul class=" "><li class=" ">    <p>
For Android applications built with Titanium, place the file in the <tt class=" ">/Resources/sound</tt> directory.    </p>
</li><li class=" ">    <p>
For iOS applications built with Titanium, place the file in the <tt class=" ">/Resources</tt> directory.    </p>
</li><li class=" ">    <p>
For native Android applications, place the file in the <tt class=" ">/assets/sound</tt> directory.    </p>
</li><li class=" ">    <p>
For native iOS applications, place the file in the main bundle.    </p>
</li></ul>    </div>
    <div class="section section-4 " id="43298780_SendingandSchedulingPushNotifications-androidAndroid-specificpayloadfields">
        <h4 class="heading "><span>Android-specific payload fields</span></h4>
    <p>
In addition to the standard notification fields <tt class=" ">(alert, badge,</tt> and <tt class=" ">sound)</tt> Android devices support the following fields:    </p>
<ul class=" "><li class=" ">    <p>
<tt class=" ">title</tt>    </p>
</li><li class=" ">    <p>
<tt class=" ">icon</tt>    </p>
</li><li class=" ">    <p>
<tt class=" ">vibrate</tt>    </p>
</li></ul>    <p>
Titanium application may also specify any of the properties in <a class="external-link external-link" href="#!/api/Titanium.Android.Notification">Titanium.Android.Notification</a>, except for <tt class=" ">contentIntent</tt> or <tt class=" ">deleteIntent</tt>. For instance, you can add a <tt class=" ">tickerText</tt> field to the notification payload     <span style="color: #484848;">
that scrolls the specified text across the notification area.    </span>
    </p>
    <div class="section section-5 " id="43298780_SendingandSchedulingPushNotifications-titleTitlefield">
        <h5 class="heading "><span>Title field</span></h5>
    <p>
<strong class=" ">Title</strong> &ndash; A string to display above the alert message in the notification area. If not specified in the payload, the application's name is displayed, as specified by the <strong class=" ">&lt;name&gt;</strong> element in your <a class="external-link external-link" href="#!/guide/tiapp.xml_and_timodule.xml_Reference">project's tiapp.xml</a> file.    </p>
    <p>
        <img src="images/download/attachments/43298780/title_alert.png" alt="images/download/attachments/43298780/title_alert.png" class="confluence-embedded-image confluence-content-image-border" width="341"/>
            </p>
    </div>
    <div class="section section-5 " id="43298780_SendingandSchedulingPushNotifications-Iconfield">
        <h5 class="heading "><span>Icon field</span></h5>
    <p>
    <span id="43298780_SendingandSchedulingPushNotifications-icon"><a class="confluence-anchor-link" name="43298780_SendingandSchedulingPushNotifications-icon"/></span>
The <tt class=" ">icon</tt> payload field specifies an image to display with the notification on Android devices. (For image specifications, see <a class="document-link " href="#!/guide/Icons_and_Splash_Screens-section-29004897_IconsandSplashScreens-NotificationIcons">Icons and Splash Screens: Notification Icons</a>.) It's value is the name of a local image file, minus the extension of the icon to display. The file must be placed your project's <strong class=" ">/res/drawable</strong> folder for native Android applications, or the <strong class=" ">/Resources</strong> folder Titanium applications. By default, the application's icon is displayed with the notification.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	</code><code class="string">"alert"</code><code class="plain">: </code><code class="string">"You're a star!"</code></div>
<div class="line"><code class="plain">	</code><code class="string">"icon"</code><code class="plain"> : </code><code class="string">"little_star"</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <p>
        <img src="images/download/attachments/43298780/icon_location.png" alt="images/download/attachments/43298780/icon_location.png" class="confluence-embedded-image confluence-content-image-border" width="355"/>
            </p>
    </div>
    <div class="section section-5 " id="43298780_SendingandSchedulingPushNotifications-vibrateVibratefield">
        <h5 class="heading "><span>Vibrate field</span></h5>
    <p>
A boolean that specifies whether the device should vibrate when the notification arrives.    </p>
    </div>
    </div>
    </div>
    </div>
    <div class="section section-2 " id="43298780_SendingandSchedulingPushNotifications-Troubleshootingcommonerrors">
        <h2 class="heading "><span>Troubleshooting common errors</span></h2>
    <p>
This section lists errors that may occur when sending push notifications.    </p>
    <div class="section section-3 " id="43298780_SendingandSchedulingPushNotifications-'Subscriptionnotfound'error">
        <h3 class="heading "><span>'Subscription not found' error</span></h3>
    <p>
In general, this error indicates that the recipients you selected are not subscribed to the specified channel. If you're sending a notification to specific Arrow users, make sure that those users are subscribed to the specified channel. Or, if you're sending a token-based notification (not to specific users) make sure that channel name you specified has at least one subscriber. See <a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-Viewingsubscribeddevices">Viewing subscribed devices</a> for more information.    </p>
    <p>
When <a class="document-link " href="#!/guide/Sending_and_Scheduling_Push_Notifications-section-43298780_SendingandSchedulingPushNotifications-SendingandSchedulingPushNotifications-sendSendingpushnotifications">sending</a> a geo-based push notification, this error can also indicate that no devices were found in the selected geographic area. Try the following:    </p>
<ul class=" "><li class=" ">    <p>
Make sure your application is sending its current location to Arrow. See <a class="external-link external-link" href="#!/guide/Subscribing_to_push_notifications-section-37551717_Subscribingtopushnotifications-UpdatingSubscriptionswithDeviceLocation">Updating Subscriptions with Device Location</a>. Devices must report their location to Arrow to enable geo-based push.    </p>
</li><li class=" ">    <p>
Try using a larger <strong class=" ">Radius</strong> value to encompass a larger geographic area.    </p>
</li></ul>    <p>
    </p>
    </div>
    </div>
        </div><a id="editButton" href="https://wiki.appcelerator.org/pages/editpage.action?pageId=43298780"><span>Edit</span></a>
    
        <div class="footer">
            Created with <a href="http://k15t.com/display/web/Scroll-Wiki-EclipseHelp-Exporter-for-Confluence" target="_blank">Scroll EclipseHelp Exporter for Confluence</a>.
        </div>
    </div>
</body>
</html>
