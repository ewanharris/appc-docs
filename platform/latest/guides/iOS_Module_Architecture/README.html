<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>iOS Module Architecture</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta content="Scroll EclipseHelp Exporter" name="generator"/>

    <link type="text/css" rel="stylesheet"/>
    <link type="text/css" rel="stylesheet"/>
    <link type="text/css" rel="stylesheet" media="print"/>
</head>
<body>
    <div class="container">
        <div class="header"/>

        <div id="43288765" class="content">
            <h1>iOS Module Architecture</h1>
<ul class="toc-indentation "><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-Introduction">Introduction</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-Module">Module</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-ModuleClass">Module Class</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-ModuleLifecycle">Module Lifecycle</a>    </p>
</li></ul></li><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-Proxy">Proxy</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-ProxyClass">Proxy Class</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-ProxyMethods">Proxy Methods</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-ProxyProperties">Proxy Properties</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-TypeConversions">Type Conversions</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-ReturningObjectValues">Returning Object Values</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-ReturningPrimitiveValues">Returning Primitive Values</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-ReturningComplexValues">Returning Complex Values</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-ReturningFiles">Returning Files</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-ReturningBlobs">Returning Blobs</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-ReturningCGRect">Returning CGRect</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-ReturningCGPoint">Returning CGPoint</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-ReturningNSRange">Returning NSRange</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-ReturningUIColor">Returning UIColor</a>    </p>
</li></ul></li><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-SettingProxyValues">Setting Proxy Values</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-HandlingEvents">Handling Events</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-MemoryManagement">Memory Management</a>    </p>
</li></ul></li><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-ViewProxyandView">View Proxy and View</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-ViewProxyClass">View Proxy Class</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-ViewClass">View Class</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-ViewProperties">View Properties</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-ViewMethods">View Methods</a>    </p>
</li></ul></li><li class=" ">    <p>
<a class="document-link " href="#!/guide/iOS_Module_Architecture-section-43288765_iOSModuleArchitecture-MoreExamples">More Examples</a>    </p>
</li></ul>    <div class="section section-2 " id="43288765_iOSModuleArchitecture-Introduction">
        <h2 class="heading "><span>Introduction</span></h2>
    <p>
The Titanium SDK is based on a modular architecture, which can be utilized to extend the SDK by building modules.  The module architecture contains the following key interface components:    </p>
<ul class=" "><li class=" ">    <p>
<strong class=" "><i class=" ">Proxy</i></strong>: A base class that represents the native binding between your JavaScript code and native code    </p>
</li><li class=" ">    <p>
<strong class=" "><i class=" ">Module</i></strong>: A special type of Proxy that describes a specific API set or namespace    </p>
</li><li class=" ">    <p>
<strong class=" "><i class=" ">ViewProxy</i></strong>: A specialized Proxy that knows how to render Views    </p>
</li><li class=" ">    <p>
<strong class=" "><i class=" ">View</i></strong>: The visual representation of a UI component which Titanium can render    </p>
</li></ul>    <p>
When building a Module, you can only have one Module class but you can have zero or more Proxies, Views and ViewProxies.    </p>
    <p>
To return <u class=" ">visual</u> data between JavaScript and native code, create a View and a ViewProxy.  Each View requires a View Proxy.  The ViewProxy represents the model data (which is kept inside the proxy itself in case the View needs to be released) and is responsible for exposing the APIs and events that the View supports.    </p>
    <p>
To return <u class=" ">non-visual</u> data between JavaScript and native code, create a Proxy. The Proxy knows how to handle any method and property, and dispatching and firing events.    </p>
    <p>
These components require special class names and method signatures.  Each components is described in further detail below.    </p>
    </div>
    <div class="section section-2 " id="43288765_iOSModuleArchitecture-Module">
        <h2 class="heading "><span>Module</span></h2>
    <p>
A Module is a class that provides an API point with a particular ID. That ID can then be used to <tt class=" ">require</tt> the module from JavaScript.  Each module must have one module and only one module class can be defined.    </p>
    <p>
Module's can also expose properties and methods to JavaScript.  See the Proxy section for more information.    </p>
    <div class="section section-3 " id="43288765_iOSModuleArchitecture-ModuleClass">
        <h3 class="heading "><span>Module Class</span></h3>
    <p>
To create a Module, the class name and filename is the module ID in camel case notation and suffixed with <tt class=" ">Module</tt>. The class must extend the <tt class=" ">TiModule</tt> class.  Note that when you create a new module, you already have a boilerplate module class.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">ComExampleTestModule.h</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">#</code><code class="keyword">import</code><code class="plain"> </code><code class="string">"TiModule.h"</code></div>
<div class="line"><code class="color2">@interface</code><code class="plain"> ComExampleTestModule : TiModule</code></div>
<div class="line"><code class="color1">@end</code></div>
</div>
</div>    <p>
To access the module from JavaScript, pass the module ID to the <tt class=" ">require</tt> method.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">var module = require(</code><code class="string">'com.example.test'</code><code class="plain">);</code></div>
</div>
</div>    <p>
    </p>
    </div>
    <div class="section section-3 " id="43288765_iOSModuleArchitecture-ModuleLifecycle">
        <h3 class="heading "><span>Module Lifecycle</span></h3>
    <p>
The module provides several places for you to hook into the application's lifecycle.    </p>
    <p>
When you create a iOS module, the boiler plate code provides you with the default <tt class=" ">startup</tt> and <tt class=" ">shutdown</tt> methods to execute code when the module is loaded or unloaded from the application, respectively.    </p>
    <p>
You can also use the <tt class=" ">load</tt> method to execute code before the application starts.  This allows the application to register callbacks for lifespan events, such as <tt class=" ">application:didFinishLaunchingWithOptions</tt>.    </p>
    <p>
For items you want to inject right into the runtime, use the<tt class=" "> </tt><tt class=" ">performSelectorDuringRunLoopStart</tt> method to assign a callback that executes every time a run loop starts before the file is executed.  The selector is a class method that takes one argument, which is the <tt class=" ">TiBindingRunLoop</tt> method.  This is useful for modifying the runtime or for debugging by capturing exceptions before the application has been parsed.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">+(</code><code class="keyword">void</code><code class="plain">)doALittleDance:(TiBindingRunLoop)runLoop</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    NSLog(@</code><code class="string">"I'm doing a little dance for %@"</code><code class="plain">,runLoop);</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="comments">// Binds the previous method before the application starts.</code></div>
<div class="line"><code class="comments">// Function executes when the runtime loop starts.</code></div>
<div class="line"><code class="plain">+(</code><code class="keyword">void</code><code class="plain">)load</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    NSLog(@</code><code class="string">"I'mma do a little dance."</code><code class="plain">);</code></div>
<div class="line"><code class="plain">    [self performSelectorDuringRunLoopStart:</code><code class="color1">@selector</code><code class="plain">(doALittleDance:)];</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    </div>
    </div>
    <div class="section section-2 " id="43288765_iOSModuleArchitecture-Proxy">
        <h2 class="heading "><span>Proxy</span></h2>
    <p>
A Proxy can expose methods and properties to JavaScript. Each of these can be an NSObject, nil or a proxy.  Proxies also have built-in event management    </p>
    <div class="section section-3 " id="43288765_iOSModuleArchitecture-ProxyClass">
        <h3 class="heading "><span>Proxy Class</span></h3>
    <p>
To declare a Proxy, the class name and filename must be prefixed with the module ID in camel case notation and suffixed with <tt class=" ">Proxy</tt>. The class must extend the <tt class=" ">TiProxy</tt> class.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">ComExampleTestFooProxy.h</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">#</code><code class="keyword">import</code><code class="plain"> </code><code class="string">"TiProxy.h"</code></div>
<div class="line"><code class="color2">@interface</code><code class="plain"> ComExampleTestFooProxy : TiProxy</code></div>
<div class="line"><code class="color1">@end</code></div>
</div>
</div><div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">ComExampleTestFooProxy.m</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">#</code><code class="keyword">import</code><code class="plain"> </code><code class="string">"ComExampleTestFooProxy.h"</code></div>
<div class="line"><code class="color1">@implementation</code><code class="plain"> ComExampleTestFooProxy</code></div>
<div class="line"><code class="color1">@end</code></div>
</div>
</div>    <p>
When you declare a Proxy in this manner, it exposes a create method to JavaScript to allow you to create an instance of the Proxy using the module reference.  The create method is the name of the class without the module ID prefix and <tt class=" ">Proxy</tt> suffix, with a <tt class=" ">create</tt> prefix.  For example, the previous class will have a <tt class=" ">createFoo()</tt> method.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">var module = require(</code><code class="string">'com.example.test'</code><code class="plain">);</code></div>
<div class="line"><code class="plain">var fooProxy = module.createFoo();</code></div>
</div>
</div>    <p>
    </p>
    </div>
    <div class="section section-3 " id="43288765_iOSModuleArchitecture-ProxyMethods">
        <h3 class="heading "><span>Proxy Methods</span></h3>
    <p>
Proxies expose methods and properties by simply using standard Objective-C syntax. To expose a method, a Proxy must have one of the following valid signatures:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="comments">// This signature is used when the method returns a value to the caller.</code></div>
<div class="line"><code class="comments">// The returned result can be either a valid NSObject, nil or a Proxy (or subclass thereof).</code></div>
<div class="line"><code class="plain">-(id)methodName:(id)args</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div><div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="comments">// This signature should be used if your method returns no value.</code></div>
<div class="line"><code class="plain">-(</code><code class="keyword">void</code><code class="plain">)methodName:(id)args</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <p>
    </p>
    <p>
Both signatures take a single argument (args) as a NSArray. However, generally, we recommend using the id declaration. This will make it easier to typecast the incoming value to another value, which we'll describe below.    </p>
    <p>
If you function takes no arguments, you can simply ignore the incoming args value.    </p>
    <p>
Titanium provides several convenience macros for typecasting incoming values to a specific type and extracting them from the array.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">ENSURE_SINGLE_ITEM(args,type)</code></div>
</div>
</div><ul class=" "><li class=" ">    <p>
The first parameter is the name of the argument.    </p>
</li><li class=" ">    <p>
The second parameter is the type name that the value should be.    </p>
</li></ul>    <p>
This macro will do two actions:    </p>
<ol class=" "><li class=" ">    <p>
Pull out the first argument, that is, <tt class=" ">[args objectAtIndex:0]</tt>.    </p>
</li><li class=" ">    <p>
Cast the return value to the type passed in the second argument.    </p>
</li></ol>    <p>
This macro can only be used for single-argument methods. If you have multiple arguments, you should simply used the normal array accessor methods.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">ENSURE_UI_THREAD_0_ARGS</code></div>
</div>
</div>    <p>
This macro can be used to ensure that the current method only runs on the UI thread (main thread). If the method is invoked on a non-main thread, it will simply re-queue the method on the UI thread. This method is equivalent to [NSThread performSelectorOnMainThread].    </p>
    <p>
You can only use this method if you have no return result.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">ENSURE_UI_THREAD_1_ARG(arg)</code></div>
</div>
</div>    <p>
This macro can be used to ensure that the current method, with argument, only runs on the UI Thread. It is the same as the previous macro with the exception that it will ensure that the arguments are passed along, too.    </p>
    <p>
Titanium provides a Utility library for converting and checking certain values. This library is in TiUtils and can be imported with:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">#</code><code class="keyword">import</code><code class="plain"> </code><code class="string">"TiUtils.h"</code></div>
</div>
</div>    <p>
Some common conversion utility examples:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">CGFloat f = [TiUtils floatValue:arg];</code></div>
<div class="line"><code class="plain">NSInteger f = [TiUtils intValue:arg];</code></div>
<div class="line"><code class="plain">NSString *value = [TiUtils stringValue:arg];</code></div>
<div class="line"><code class="plain">NSString *value = [TiUtils stringValue:@</code><code class="string">"key"</code><code class="plain"> properties:dict def:@</code><code class="string">"default"</code><code class="plain">];</code></div>
<div class="line"><code class="plain">TiColor *bgcolor = [TiUtils colorValue:arg];</code></div>
</div>
</div>    </div>
    <div class="section section-3 " id="43288765_iOSModuleArchitecture-ProxyProperties">
        <h3 class="heading "><span>Proxy Properties</span></h3>
    <p>
To expose a JavaScript property in a Proxy, you can define a property using the Objective-C <tt class=" ">@property</tt> notation with the <tt class=" ">copy</tt> attribute:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">SomeProxy.h</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="color2">@interface</code><code class="plain"> SomeProxy: TiUIView {</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="color1">@property</code><code class="plain">(copy) NSString* propertyName;</code></div>
<div class="line"><code class="color1">@end</code></div>
</div>
</div>    <p>
    </p>
    <p>
To expose a property in a Proxy with a custom setter or getter, declare the variable in the class's header file and implement the setter and getter methods:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">SomeProxy.h</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="color2">@interface</code><code class="plain"> SomeProxy: TiUIView {</code></div>
<div class="line"><code class="plain">    NSString *foo;</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="color1">@end</code></div>
</div>
</div><div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">SomeProxy.m</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">-(</code><code class="keyword">void</code><code class="plain">)setPropertyName:(id)value</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    ENSURE_STRING(value);</code></div>
<div class="line"><code class="plain">    foo = [value retain];</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="plain">-(NSString *)propertyName</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">  </code><code class="keyword">return</code><code class="plain"> foo;</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <p>
In the setter method, the method name must be the property name with the first letter capitalized and prefixed with <tt class=" ">set</tt>. Titanium will pass a single value as the converted value as the first argument (instead of an NSArray like a method).    </p>
    <p>
In the getter method, your property method must return a value as either a NSObject, nil or TiProxy (or subclass).    </p>
    </div>
    <div class="section section-3 " id="43288765_iOSModuleArchitecture-TypeConversions">
        <h3 class="heading "><span>Type Conversions</span></h3>
    <div class="section section-4 " id="43288765_iOSModuleArchitecture-ReturningObjectValues">
        <h4 class="heading "><span>Returning Object Values</span></h4>
    <p>
The following Objective-C types can be returned without conversion:    </p>
    <div class="tablewrap">
        <table class="confluenceTable">
        <thead class=" "/><tfoot class=" "/><tbody class=" ">    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
NSString    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
NSDictionary    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
NSArray    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
NSNumber    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
NSDate    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
NSNull    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-4 " id="43288765_iOSModuleArchitecture-ReturningPrimitiveValues">
        <h4 class="heading "><span>Returning Primitive Values</span></h4>
    <p>
To return a primitive value from either a method or property, you should return an NSNumber with the appropriate wrapped primitive value. Titanium provides a set of macros to make this easier:    </p>
    <div class="tablewrap">
        <table class="confluenceTable">
        <thead class=" "/><tfoot class=" "/><tbody class=" ">    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
<strong class=" ">Macro</strong>    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
<strong class=" ">Description</strong>    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
NUMINT    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Equivalent to [NSNumber numberWithInt:value]    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
NUMBOOL    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Equivalent to [NSNumber numberWithInt:value]    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
NUMLONG    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Equivalent to [NSNumber numberWithLong:value]    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
NUMLONGLONG    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Equivalent to [NSNumber numberWithLongLong:value]    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
NUMDOUBLE    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Equivalent to [NSNumber numberWithDouble:value]    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
NUMFLOAT    </p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
        <p>
Equivalent to [NSNumber numberWithFloat:value]    </p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    <div class="section section-4 " id="43288765_iOSModuleArchitecture-ReturningComplexValues">
        <h4 class="heading "><span>Returning Complex Values</span></h4>
    <p>
There are two approaches to returning complex values:    </p>
<ul class=" "><li class=" ">    <p>
The first approach is to set values in a NSDictionary and it. When returning a NSDictionary, Titanium converts this to a JavaScript object with each key/value being mapped into JavaScript object property/values.    </p>
</li><li class=" ">    <p>
The second approach is to create a specialized Proxy. The Proxy should then be returned which will be exposed as a JavaScript object with functions and properties. Invocation against the returned Proxy will be invoked against your returned proxy instance. When you return a Proxy instance, you must autorelease it if you created it in your method.    </p>
</li></ul>    </div>
    <div class="section section-4 " id="43288765_iOSModuleArchitecture-ReturningFiles">
        <h4 class="heading "><span>Returning Files</span></h4>
    <p>
To return a reference to a filesystem file, you should return an instance of a TiFile proxy. This will automatically handle exposing the native file and it's methods and properties. To return a file, you can use the following example:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="keyword">return</code><code class="plain"> [[[TiFile alloc] initWithPath:path] autorelease];</code></div>
</div>
</div>    </div>
    <div class="section section-4 " id="43288765_iOSModuleArchitecture-ReturningBlobs">
        <h4 class="heading "><span>Returning Blobs</span></h4>
    <p>
To return a reference to a blob data (such as a NSData), you should return an instance of a TiBlob. This will automatically handle exposing some native blob operations. To return a blob, you can use the following examples:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="keyword">return</code><code class="plain"> [[[TiBlob alloc] initWithData:nsdata mimetype:@</code><code class="string">"application/octet-stream"</code><code class="plain">] autorelease];</code></div>
<div class="line"><code class="keyword">return</code><code class="plain"> [[[TiBlob alloc] initWithImage:image] autorelease];</code></div>
<div class="line"><code class="keyword">return</code><code class="plain"> [[[TiBlob alloc] initWithFile:file] autorelease];</code></div>
</div>
</div>    <p>
In the first example above, the second argument should map to the mime type of the raw data content. If the data is binary, you can use the &quot;application/octet-stream&quot; value.    </p>
    </div>
    <div class="section section-4 " id="43288765_iOSModuleArchitecture-ReturningCGRect">
        <h4 class="heading "><span>Returning CGRect</span></h4>
    <p>
To return a CGRect, Titanium provides a proxy named TiRect. You can use the following example:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">TiRect *result = [[[TiRect alloc] init] autorelease];</code></div>
<div class="line"><code class="plain">[result setRect:rect];</code></div>
<div class="line"><code class="keyword">return</code><code class="plain"> result;</code></div>
</div>
</div>    </div>
    <div class="section section-4 " id="43288765_iOSModuleArchitecture-ReturningCGPoint">
        <h4 class="heading "><span>Returning CGPoint</span></h4>
    <p>
To return a CGPoint, Titanium provides a proxy named TiRect. You can use the following example:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="keyword">return</code><code class="plain"> [[[TiPoint alloc] initWithPoint:point] autorelease];</code></div>
</div>
</div>    </div>
    <div class="section section-4 " id="43288765_iOSModuleArchitecture-ReturningNSRange">
        <h4 class="heading "><span>Returning NSRange</span></h4>
    <p>
To return an NSRange, create an NSDictionary using the NSRange values and return the NSDictionary.<br/>TiRange was used to return an NSRange in the past. TiRange has been removed from the SDK as of version 2.1.0 in favor of NSDictionary.<br/>You can use the following example:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="keyword">return</code><code class="plain"> [NSDictionary dictionaryWithObjectsAndKeys:NUMINT(range.location),@</code><code class="string">"location"</code><code class="plain">,NUMINT(range.length),@</code><code class="string">"length"</code><code class="plain">, nil];</code></div>
</div>
</div>    </div>
    <div class="section section-4 " id="43288765_iOSModuleArchitecture-ReturningUIColor">
        <h4 class="heading "><span>Returning UIColor</span></h4>
    <p>
To return a UIColor, Titanium provides a proxy named TiColor. You can use the following example:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="keyword">return</code><code class="plain"> [[[TiColor alloc] initWithColor:color name:@</code><code class="string">"#fff"</code><code class="plain">] autorelease];</code></div>
</div>
</div>    <p>
The second argument (name) should be the textual name (if provided) of the UIColor.    </p>
    </div>
    </div>
    <div class="section section-3 " id="43288765_iOSModuleArchitecture-SettingProxyValues">
        <h3 class="heading "><span>Setting Proxy Values</span></h3>
    <p>
When you create a proxy from JavaScript, you typically pass an optional dictionary of key/value pairs. By using this pattern, Titanium provides built-in functionality to help make proxy programming easier.    </p>
    <p>
Let's use a simple example:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">var my_module = require(</code><code class="string">'com.example.test'</code><code class="plain">);</code></div>
<div class="line"><code class="plain">var foo = my_module.createFoo({</code></div>
<div class="line"><code class="plain">  </code><code class="string">"bar"</code><code class="plain">:</code><code class="string">"123"</code></div>
<div class="line"><code class="plain">});</code></div>
</div>
</div>    <p>
Titanium will automatically correctly define and dispatch proxy factory creation methods like above. You simply need to define a Proxy with the same name as your module and the name of your method plus the Proxy suffix.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">ComExampleTestFooProxy.h</code></div>
<div class="line"><code class="plain">ComExampleTestFooProxy.m</code></div>
</div>
</div>    <p>
Your module does not need to define the createFoo method. Using this convention, Titanium already knows how to do that for you.    </p>
    <p>
In your proxy, you would then want to define a setter method to handle the bar property. Upon construction (the init), Titanium will automatically call the setter for all properties passed in the constructor.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">#</code><code class="keyword">import</code><code class="plain"> </code><code class="string">"ComExampleTestFooProxy.h"</code><code class="plain">#</code><code class="keyword">import</code><code class="plain"> </code><code class="string">"TiUtils.h"</code></div>
<div class="line"><code class="color1">@implementation</code><code class="plain"> ComExampleTestFooProxy</code></div>
<div class="line"><code class="plain">-(</code><code class="keyword">void</code><code class="plain">)setBar:(id)value</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">   NSString *str = [TiUtils stringValue:value];</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="color1">@end</code></div>
</div>
</div>    <p>
In the above example, we simply define the setter and use the TiUtils to convert the value into a stringValue. Using this utility ensures that no matter what type of value passed into the argument, we'll get the string representation. So, if the user was to pass the number 123, it would still return an NSString with the value @&quot;123&quot;.    </p>
    <p>
Proxies are also special about how they handle and hold their properties. Proxies will always store values passed in a special internal NSDictionary called 'dynprops'. This means that you can always use the following method to retrieve the value of the proxy without having to define getters and setters for each of your properties:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">id value = [self valueForUndefinedKey:@</code><code class="string">"bar"</code><code class="plain">];</code></div>
</div>
</div>    <p>
If you use valueForUndefinedKey, you will always retrieve the original property value. However, if you want to invoke a potential getter (which may or may not return the original property value in JavaScript), you should use the following:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">id value = [self valueForKey:@</code><code class="string">"bar"</code><code class="plain">];</code></div>
</div>
</div>    <p>
In the above code example, if we had defined a method like the following below it would be invoked instead of retrieving our internal original property.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">-(id)bar</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">  </code><code class="keyword">return</code><code class="plain"> @</code><code class="string">"456"</code><code class="plain">;</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <p>
Properties don't have to be passed in the constructor for them to be internally set and your setter invoked.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">foo.bar = </code><code class="value">789</code><code class="plain">;</code></div>
</div>
</div>    <p>
When you invoke the property of a proxy, the following will happen:    </p>
<ul class=" "><li class=" ">    <p>
If you have defined a setter, it will be invoked.    </p>
</li><li class=" ">    <p>
If you have not defined a setter, the property and value will be stored internally in the dynprops.    </p>
</li></ul>    <p>
If you implement a setter, you should also manually store the property yourself in dynprops. You can do this by calling the following method:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">-(</code><code class="keyword">void</code><code class="plain">)setBar:(id)value</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">  [self replaceValue:value forKey:@</code><code class="string">"bar"</code><code class="plain"> notification:NO];</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <p>
The third argument (notification) tells Titanium whether you want the setter to be invoked from this property change. Since we're already inside our setter, we don't want an infinite recursion so we pass NO.    </p>
    </div>
    <div class="section section-3 " id="43288765_iOSModuleArchitecture-HandlingEvents">
        <h3 class="heading "><span>Handling Events</span></h3>
    <p>
Proxies automatically handle firing events and managing event listeners. Internally, when you call <tt class=" ">addEventListener()</tt> or <tt class=" ">removeEventListener()</tt> from JavaScript against a proxy instance, the proxy will automatically handle the code for managing the event listeners.    </p>
    <p>
If you want to be notified upon an add or remove, you should override the methods:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">-(</code><code class="keyword">void</code><code class="plain">)_listenerAdded:(NSString*)type count:(</code><code class="keyword">int</code><code class="plain">)count</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="plain">-(</code><code class="keyword">void</code><code class="plain">)_listenerRemoved:(NSString*)type count:(</code><code class="keyword">int</code><code class="plain">)count</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <p>
The <tt class=" ">_listenerAdded</tt> method will be invoked with the event name (type) and the total number of existing listener with the same type (including the new event listener). This is convenient, for example, when you would like to enable some action only once at least one listener is listening for the event. This can be useful for conserving system resources.    </p>
    <p>
The <tt class=" ">_listenerRemoved</tt> method will be invoked with the event name (type) and the total number of remaining listeners with the same type (excluding the removed listener). This is useful when you want to cleanup system resources once no listeners are actively listening for events. To send an event to any event listener, you use the convenience method:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">-(</code><code class="keyword">void</code><code class="plain">)fireEvent:(NSString*)type withObject:(id)obj;</code></div>
</div>
</div>    <p>
The first argument is the default and most common way to fire an event. The first argument (type) is the event name. The second argument (obj) is an NSDictionary of event properties. The second argument can also be nil if no additional event properties are needed. The event properties will be part of the event argument which is the first argument in all event functions.    </p>
    <p>
For example:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">-(</code><code class="keyword">void</code><code class="plain">)mymethod{NSDictionary *event = [NSDictionary dictionaryWithObjectsAndKeys:@</code><code class="string">"foo"</code><code class="plain">,@</code><code class="string">"name"</code><code class="plain">,nil];</code></div>
<div class="line"><code class="plain">[self fireEvent:@</code><code class="string">"foo"</code><code class="plain"> withObject:event];}</code></div>
</div>
</div>    <p>
In this example, we'd adding one additional event property named 'name' with the value of 'foo'. In JavaScript, this would be retrieved like:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">foo.addEventListener(</code><code class="string">'foo'</code><code class="plain">,function(e){</code></div>
<div class="line"><code class="plain">  alert(</code><code class="string">"name is "</code><code class="plain">+e.name);</code></div>
<div class="line"><code class="plain">});</code></div>
</div>
</div>    <p>
In addition to any additional event arguments passed, Titanium automatically provides the following built-in properties on all events fired:    </p>
<ul class=" "><li class=" ">    <p>
source &mdash; The source object (proxy) that fired the event    </p>
</li><li class=" ">    <p>
type &mdash; The type of event    </p>
</li></ul>    <p>
You can also check for the existing of a listener (recommended) before firing an event. This is done with the <tt class=" ">_hasListeners</tt> method.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">(</code><code class="keyword">void</code><code class="plain">)fireMyEvent</code></div>
<div class="line"><code class="plain">{</code><code class="keyword">if</code><code class="plain"> ([self _hasListeners:@</code><code class="string">"foo"</code><code class="plain">])</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="comments">// fire event</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <p>
It is generally recommended that you only construct your event object and fire the event if you have listeners to conserve processing power.    </p>
    </div>
    <div class="section section-3 " id="43288765_iOSModuleArchitecture-MemoryManagement">
        <h3 class="heading "><span>Memory Management</span></h3>
    <p>
Proxies act like any Objective-C class and all memory management rules must be considered. When returning a new proxy instance from a method, you must autorelease the instance. Titanium will retain a reference to the proxy which maps to a reference to the resulting JavaScript variable reference. However, once the JavaScript variable is no longer referenceable, it will be released and your proxy will be sent the dealloc message.    </p>
    <p>
You must take special care to retain/release your objects in Titanium just like you would in any Objective-C based programs. Improper retain/release will cause crashes and undesired results.    </p>
    <p>
    </p>
    </div>
    </div>
    <div class="section section-2 " id="43288765_iOSModuleArchitecture-ViewProxyandView">
        <h2 class="heading "><span>View Proxy and View</span></h2>
    <p>
To display UI elements with a module, create both a View Proxy and a View.  A View Proxy is a special Proxy that is used for Views &mdash; objects which interact with the UI to draw things on the screen.    </p>
    <p>
The View Proxy holds the data (model) and acts like a controller for dispatching property changes and methods against the view. The View handles the internal logic for interacting with UIKit and handling UIKit events. The View is a model delegate to the View Proxy, and as long as referenced, receives property changes.    </p>
    <p>
The View Proxy does not always retain a valid reference to a View. The View is only created on demand, as needed. Once the View is created and retained by the View Proxy, all property change events on the View Proxy will be forwarded to the View.    </p>
    <p>
To call the method to create the view from JavaScript, call the module's <tt class=" ">create*View</tt><tt class=" ">()</tt> method.  The name of the method is the name of the view class without the module ID, then prefixed with <tt class=" ">create</tt>.  For example, if the class was called <tt class=" ">ComExampleTestFooView</tt>, the method would be called <tt class=" ">createFooView()</tt>.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">var module = require(</code><code class="string">'com.example.test'</code><code class="plain">);</code></div>
<div class="line"><code class="plain">var fooView = module.createFooView(</code><code class="comments">/* params */</code><code class="plain">);</code></div>
<div class="line"><code class="plain">var win = Ti.UI.createWindow();</code></div>
<div class="line"><code class="plain">win.add(fooView);</code></div>
<div class="line"><code class="plain">win.open();</code></div>
</div>
</div>    <p>
For Alloy projects, you can also use the <tt class=" ">Module</tt> element.  Set the <tt class=" ">module</tt> attribute to the module ID and set the <tt class=" ">method</tt> attribute to a method that returns a View.  You can optionally pass in initialization parameters for the create method.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">&lt;Alloy&gt;</code></div>
<div class="line"><code class="plain">    &lt;View&gt;</code></div>
<div class="line"><code class="plain">        &lt;Module module=</code><code class="string">"com.example.test"</code><code class="plain"> method=</code><code class="string">"createFooView"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">    &lt;/View&gt;</code></div>
<div class="line"><code class="plain">&lt;/Alloy&gt;</code></div>
</div>
</div>    <div class="section section-3 " id="43288765_iOSModuleArchitecture-ViewProxyClass">
        <h3 class="heading "><span>View Proxy Class</span></h3>
    <p>
To declare a View Proxy, the class name and filename must be prefixed with the module ID in camel case notation and suffixed with <tt class=" ">ViewProxy</tt>. The class must extend the <a class="external-link external-link" href="http://docs.appcelerator.com/module-apidoc/latest/ios/Classes/TiViewProxy.html" target="_blank"><tt class=" ">TiViewProxy</tt></a> class.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">ComExampleTestFooViewProxy.h</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">#</code><code class="keyword">import</code><code class="plain"> </code><code class="string">"TiViewProxy.h"</code></div>
<div class="line"><code class="color2">@interface</code><code class="plain"> ComExampleTestFooViewProxy: TiViewProxy</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="color1">@end</code><code class="plain"> </code></div>
</div>
</div><div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">ComExampleTestMyViewProxy.m</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">#</code><code class="keyword">import</code><code class="plain"> </code><code class="string">"ComExampleTestFooViewProxy.h"</code></div>
<div class="line"><code class="color1">@implementation</code><code class="plain"> ComExampleTestFooViewProxy</code></div>
<div class="line"><code class="color1">@end</code></div>
</div>
</div>    <p>
    </p>
    <p>
To get a reference to the View, call the View Proxy's <tt class=" ">view</tt> method:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">UIView *view = [self view];</code></div>
</div>
</div>    </div>
    <div class="section section-3 " id="43288765_iOSModuleArchitecture-ViewClass">
        <h3 class="heading "><span>View Class</span></h3>
    <p>
To declare a View Proxy, the class name and filename must be prefixed with the module ID in camel case notation and suffixed with <tt class=" ">View</tt>. The class must extend the <tt class=" ">TiUIView</tt> class.  The <tt class=" ">TiUIView</tt> class extends <tt class=" ">UIView</tt> and provides Titanium specific functionality.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">ComExampleTestFooView.h</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">#</code><code class="keyword">import</code><code class="plain"> </code><code class="string">"TiUIView.h"</code></div>
<div class="line"><code class="color2">@interface</code><code class="plain"> ComExampleTestFooView : TiUIView</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="color1">@end</code></div>
</div>
</div><div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">ComExampleTestFooView.m</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">#</code><code class="keyword">import</code><code class="plain"> </code><code class="string">"ComExampleTestFooView.h"</code></div>
<div class="line"><code class="color1">@implementation</code><code class="plain"> ComExampleTestFooView</code></div>
<div class="line"><code class="color1">@end</code></div>
</div>
</div>    <p>
The View will be attached to the UIView hierarchy as needed by the View Proxy. However, if you have sub-views you will need to attach them to yourself (TiUIView) as necessary. This is typically done by assigning your view to an instance variable and keeping a reference to it and only creating and attaching when the reference is nil.    </p>
    </div>
    <div class="section section-3 " id="43288765_iOSModuleArchitecture-ViewProperties">
        <h3 class="heading "><span>View Properties</span></h3>
    <p>
Properties that can be set on views can either be defined in the View class or the ViewProxy class.    </p>
    <p>
The view property setters are named using a special required convention.    </p>
    <p>
To define a property in a <u class=" "><strong class=" ">View</strong></u>, capitalize the first character of the property, then prefix it with <tt class=" ">set</tt> and suffix it with an underscore (<tt class=" ">_</tt>).    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">ComExampleTestView.m</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">-(</code><code class="keyword">void</code><code class="plain">)setFoo_:(id)value</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <p>
To define a property in a <u class=" "><strong class=" ">View Proxy</strong></u>, capitalize the first character of the property, then prefix it with <tt class=" ">set</tt>. Do <u class=" "><strong class=" ">NOT</strong></u> add an underscore to the end.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">ComExampleTestViewProxy.m</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">-(</code><code class="keyword">void</code><code class="plain">)setFoo:(id)value</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <p>
When you have properties in your View Proxy that should be handled by an active View, you don't need to define them in your View. Instead, you can define them using the syntax above in your View and they be automatically dispatched. In the event that your View is attached after properties have been set, the View Proxy will automatically forward all property change events (results in calling each setter method) to the View upon construction.    </p>
    <p>
<strong class=" ">Note</strong>: to access the View from the View Proxy, use the View Proxy's <tt class=" ">view</tt> method.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">UIView *view = [self view];</code></div>
</div>
</div>    <p>
    </p>
    </div>
    <div class="section section-3 " id="43288765_iOSModuleArchitecture-ViewMethods">
        <h3 class="heading "><span>View Methods</span></h3>
    <p>
The View Proxy must declare and dispatch any methods that it wants the View to also handle. For example:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">(</code><code class="keyword">void</code><code class="plain">)show:(id)args</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">  [[self view] performSelectorOnMainThread:</code><code class="color1">@selector</code><code class="plain">(show:)</code></div>
<div class="line"><code class="plain">    withObject:args waitUntilDone:NO];</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <p>
You can also use a convenience macro that does the equivalent:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">USE_VIEW_FOR_UI_METHOD(methodName)</code></div>
</div>
</div>    <p>
The following code example is the same as the show method above:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">USE_VIEW_FOR_UI_METHOD(show)</code></div>
</div>
</div>    </div>
    </div>
    <div class="section section-2 " id="43288765_iOSModuleArchitecture-MoreExamples">
        <h2 class="heading "><span>More Examples</span></h2>
    <p>
For more examples of using the module API, see the <a class="external-link external-link" href="https://github.com/appcelerator-modules/ti.moddevguide" target="_blank">ti.moddevguide Github project</a>.    </p>
    </div>
        </div><a id="editButton" href="https://wiki.appcelerator.org/pages/editpage.action?pageId=43288765"><span>Edit</span></a>
    
        <div class="footer">
            Created with <a href="http://k15t.com/display/web/Scroll-Wiki-EclipseHelp-Exporter-for-Confluence" target="_blank">Scroll EclipseHelp Exporter for Confluence</a>.
        </div>
    </div>
</body>
</html>
