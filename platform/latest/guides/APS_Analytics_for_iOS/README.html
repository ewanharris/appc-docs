<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>APS Analytics for iOS</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta content="Scroll EclipseHelp Exporter" name="generator"/>

    <link type="text/css" rel="stylesheet"/>
    <link type="text/css" rel="stylesheet"/>
    <link type="text/css" rel="stylesheet" media="print"/>
</head>
<body>
    <div class="container">
        <div class="header"/>

        <div id="43298730" class="content">
            <h1>APS Analytics for iOS</h1>
    <p>
    </p>
    <div class="confbox admonition admonition-warning aui-message problem shadowed information-macro">
            <div class="title">Pro or Enterprise Subscription Required</div>
        
    <p>
This Appcelerator Platform feature requires a Pro or Enterprise Subscription.    </p>
    </div>
    
    <p>
    </p>
<ul class="toc-indentation "><li class=" ">    <p>
<a class="document-link " href="#!/guide/APS_Analytics_for_iOS-section-43298730_APSAnalyticsforiOS-Introduction">Introduction</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/APS_Analytics_for_iOS-section-43298730_APSAnalyticsforiOS-Terminology">Terminology</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/APS_Analytics_for_iOS-section-43298730_APSAnalyticsforiOS-GettingStarted">Getting Started</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p>
<a class="document-link " href="#!/guide/APS_Analytics_for_iOS-section-43298730_APSAnalyticsforiOS-AdvancedInitializationOptions">Advanced Initialization Options</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p>
<a class="document-link " href="#!/guide/APS_Analytics_for_iOS-section-43298730_APSAnalyticsforiOS-SessionTimeout">Session Timeout</a>    </p>
</li></ul></li></ul></li><li class=" ">    <p>
<a class="document-link " href="#!/guide/APS_Analytics_for_iOS-section-43298730_APSAnalyticsforiOS-CreatingCustomEvents">Creating Custom Events</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p>
<a class="document-link " href="#!/guide/APS_Analytics_for_iOS-section-43298730_APSAnalyticsforiOS-FeatureEvents">Feature Events</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/APS_Analytics_for_iOS-section-43298730_APSAnalyticsforiOS-NavigationEvents">Navigation Events</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p>
<a class="document-link " href="#!/guide/APS_Analytics_for_iOS-section-43298730_APSAnalyticsforiOS-Transitionevents">Transition events</a>    </p>
</li></ul></li><li class=" ">    <p>
<a class="document-link " href="#!/guide/APS_Analytics_for_iOS-section-43298730_APSAnalyticsforiOS-GeoEvents">Geo Events</a>    </p>
</li></ul></li></ul>    <p>
This page describes how to use the Appcelerator Platform Service (APS) Analytics for native iOS applications, built with Objective-C and the iOS APIs.    </p>
    <div class="confbox panel panel">
            <div class="title">Not developing a native iOS application with Objective-C?</div>
        <p>
See the following topics to use the Appcelerator Analytics Service on other platforms:    </p>
    <p>
        <img src="images/download/attachments/43298732/android_icon.png" alt="images/download/attachments/43298732/android_icon.png" class="confluence-embedded-image"/>
            </p>
    <p>
For native Android applications built with Java, see <a class="document-link " href="#!/guide/APS_Analytics_for_Android">APS Analytics for Android</a>.    </p>
    <p>
        <img src="images/download/attachments/43298732/titanium_icon.png" alt="images/download/attachments/43298732/titanium_icon.png" class="confluence-embedded-image"/>
            </p>
    <p>
For Titanium Applications, see <a class="document-link " href="#!/guide/Appcelerator_Analytics">Appcelerator Analytics</a>.    </p>
    </div>
    <div class="section section-2 " id="43298730_APSAnalyticsforiOS-Introduction">
        <h2 class="heading "><span>Introduction</span></h2>
    <p>
Appcelerator Analytics collects and presents information in real time about how your application's user acquisition, engagement and usage. By default, it provides the number of applications installs, the number of sessions, and the average application session length organized by application name, platform and geography. Your application can send custom     <span style="color: #484848;">
analytic     </span>
     <span style="color: #484848;">
events, which are collected and logged by Analytics, to learn how users use your application. You can also create     </span>
 <i class=" ">event funnels</i>     <span style="color: #484848;">
&mdash;ordered sets of custom events that correspond to a business process or application flow you want to track as a whole.    </span>
    </p>
    <div class="confbox admonition admonition-note aui-message warning shadowed information-macro has-no-icon">
        
    <p>
This document provides an overview of the features provided by Analytics, and how to use them using the Titanium SDK. <strong class=" ">If you are developing an iOS application with Objective-C or Swift or an Android application with Java</strong>, see <a class="document-link " href="#!/guide/APS_Analytics_for_iOS">APS Analytics for iOS</a> or <a class="document-link " href="#!/guide/APS_Analytics_for_Android">APS Analytics for Android</a> for details on using Analytics.    </p>
    </div>
    
    <p>
<strong class=" ">See also:</strong>    </p>
<ul class=" "><li class=" ">    <p>
For platform-specific details about how analytics captured, see <a class="document-link " href="#!/guide/Analytics_Architecture">Analytics Architecture</a>.    </p>
</li><li class=" ">    <p>
For information about viewing analytics data, see <a class="document-link " href="#!/guide/Managing_Client_Applications-section-43298774_ManagingClientApplications-AnalyticsTab">A</a><a class="document-link " href="#!/guide/Managing_Client_Applications-section-43298774_ManagingClientApplications-AnalyticsTab">pplication Details Screen: Analytics Tab</a>.    </p>
</li></ul>    </div>
    <div class="section section-2 " id="43298730_APSAnalyticsforiOS-Terminology">
        <h2 class="heading "><span>Terminology</span></h2>
    <p>
<strong class=" ">Analytics</strong> refers to data about how your application has been used, as well as information about how users interact with your application. Analytics data is transmitted in the form of <i class=" ">events</i>.    </p>
    <p>
<strong class=" ">Events</strong>  are operational milestones in the application. Some events are generated automatically, such as those that mark an installation, or the beginning and end of a session. Others may be  <strong class=" ">custom events</strong>, which have a meaning specific to an application, such as tapping a specific button, or opening a certain window.    </p>
    <p>
There are two types custom events:  <strong class=" ">feature events</strong> and  <strong class=" ">navigation events</strong> .  A  feature event  represents an action a user could take in an application, such as 'liking an item' or launching a video'.  A  <strong class=" ">navigation event</strong>  is used to track a users's navigation from one area of the UI to another. Applications use the Titanium or APSAnalytics API to create custom events.    </p>
    <p>
<strong class=" ">Event funnels</strong> let you define custom, ordered event sequences that let you track a specific user process, such as finding a product and making a purchase.    </p>
    <p>
The <strong class=" ">Analytics dashboard</strong> organizes, analyzes, and presents analytics data captured for your applications. You also use the Analytics dashboard to create and view event funnels.    </p>
    <div class="confbox admonition admonition-note aui-message warning shadowed information-macro">
        
    <p>
Navigation events are not currently available through the Analytics UI, only through raw data export.    </p>
    </div>
    
    </div>
    <div class="section section-2 " id="43298730_APSAnalyticsforiOS-GettingStarted">
        <h2 class="heading "><span>Getting Started</span></h2>
    <p>
To integrate the Performance service with a new or existing iOS application:    </p>
<ol class=" "><li class=" ">    <p>
Go to the <a class="external-link external-link" href="https://platform.appcelerator.com/" target="_blank">Appcelerator Dashboard</a> and create a new native iOS application.    </p>
</li><li class=" ">    <p>
Download the Services SDK and get your Analytics application key.    </p>
</li><li class=" ">    <p>
Unpack the <tt class=" ">appcelerator-sdk-ios-&lt;VERSION&gt;.zip</tt> file.    </p>
</li><li class=" ">    <p>
Drag the <tt class=" ">Appcelerator.framework</tt> folder into your Xcode project's root folder if you are using Xcode 6 and above, or the  <tt class=" ">Frameworks</tt>  folder if you are using Xcode 5 or below.    </p>
</li><li class=" ">    <p>
Select <strong class=" ">Copy items into destination&hellip;</strong> and click <strong class=" ">Finish</strong>.    </p>
</li><li class=" ">    <p>
Select your project in the Project Navigator and click the <strong class=" ">Build Phases</strong> tab.    </p>
</li><li class=" ">    <p>
Expand the <strong class=" ">Link Binary With Libraries</strong> section and add the  <tt class=" ">libsqlite3.dylib</tt> and <tt class=" ">libz.dylib</tt> frameworks.    </p>
</li><li class=" ">    <p>
Click the <strong class=" ">Build Settings</strong> tab, then click the <strong class=" ">All</strong> button in the top-left corner of the tab.    </p>
</li><li class=" ">    <p>
Expand the <strong class=" ">Linking</strong> section and add <tt class=" ">-ObjC</tt>  to <strong class=" ">Other Linker Flags</strong>  .    </p>
</li><li class=" ">    <p>
In your application delegate implementation file, import <tt class=" ">Appcelerator/Appcelerator.h .  </tt>    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">AppDelegate.m</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">#</code><code class="keyword">import</code><code class="plain"> &lt;Appcelerator/Appcelerator.h&gt;</code></div>
</div>
</div></li><li class=" ">    <p>
In the application delegate's <tt class=" ">application:didFinishLaunchingWithOptions</tt> method, enable the service by calling the APSServiceManager's <tt class=" ">enableWithAppKey:</tt> method.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">AppDelegate.m</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    [[APSServiceManager sharedInstance] enableWithAppKey:@</code><code class="string">"APS_APP_KEY"</code><code class="plain">];</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">return</code><code class="plain"> YES;</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <div class="confbox admonition admonition-tip aui-message success shadowed information-macro">
        
    <p class="diff-block-target diff-block-context">
To get your APS App key:    </p>
<ol class=" "><li class="diff-block-target diff-block-context ">    <p>
Go to the <a class="external-link external-link" href="https://platform.appcelerator.com/" target="_blank">Appcelerator Dashboard</a>.    </p>
</li><li class="diff-block-target diff-block-context ">    <p>
Select your application from the <strong class=" ">Apps</strong> drop-down menu.    </p>
</li><li class="diff-block-target diff-block-context ">    <p>
Click the <strong class=" ">Overview</strong> tab.    </p>
</li><li class="diff-block-target diff-block-context ">    <p>
Click the <strong class=" ">Services</strong> button.    </p>
</li><li class="diff-block-target diff-block-context ">    <p>
Click <strong class=" ">Show Key</strong> under the Analytics, Performance and Cloud section.    </p>
</li></ol>    </div>
    
</li></ol>    <p>
The iOS application can now send user session events and make additional method calls using the  <a class="external-link external-link" href="http://docs.appcelerator.com/aps-sdk-apidoc/latest/ios/Classes/APSAnalytics.html" target="_blank"> <tt class=" ">APSAnalytics</tt>  class </a> .    </p>
    <div class="section section-3 " id="43298730_APSAnalyticsforiOS-AdvancedInitializationOptions">
        <h3 class="heading "><span>Advanced Initialization Options</span></h3>
    <div class="section section-4 " id="43298730_APSAnalyticsforiOS-SessionTimeout">
        <h4 class="heading "><span>Session Timeout</span></h4>
    <p>
By default, after the application has been backgrounded for 30 seconds, the Analytics service ends the current user session and starts a new one when the application enter the foreground again.  To adjust the timeout, use the <tt class=" ">sessionTimeout</tt> property.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="comments">// Sets the timeout to 15 seconds instead of 30 seconds.</code></div>
<div class="line"><code class="plain">[APSAnalytics sharedInstance].sessionTimeout = </code><code class="value">15</code><code class="plain">;</code></div>
</div>
</div>    </div>
    </div>
    </div>
    <div class="section section-2 " id="43298730_APSAnalyticsforiOS-CreatingCustomEvents">
        <h2 class="heading "><span>Creating Custom Events</span></h2>
    <p>
You use the the  <a class="external-link external-link" href="#!/api/Titanium.Analytics">A</a> <a class="external-link external-link" href="http://docs.appcelerator.com/aps-sdk-apidoc/latest/ios/Classes/APSAnalytics.html" target="_blank">PSAnalytics API </a>  to log and report custom events. There are two main types of events you can capture:  <a class="document-link " href="#!/guide/APS_Analytics_for_iOS-section-43298730_APSAnalyticsforiOS-FeatureEvents">Feature Events</a> and  <a class="document-link " href="#!/guide/APS_Analytics_for_iOS-section-43298730_APSAnalyticsforiOS-NavigationEvents">Navigation Events</a> . Feature events are for capturing a user action, such as selecting a specific menu option, or launching a video. Navigation events track a user's movement through an application, such as going from the application's home screen, and then to a search screen.    </p>
    <div class="confbox admonition admonition-note aui-message warning shadowed information-macro">
        
    <p>
Currently, the optional <tt class=" ">data</tt> parameter of the Titanium.Analytics methods, which is used to log a dictionary object, cannot be accessed through the Dashboard.    </p>
    </div>
    
    <div class="section section-3 " id="43298730_APSAnalyticsforiOS-FeatureEvents">
        <h3 class="heading "><span>Feature Events</span></h3>
    <p>
You use the <tt class=" ">sendAppFeatureEvent:payload</tt> method to generate a feature event that captures a specific application or user activity. A feature event should represent an action, such as launching a video, or 'new item', 'launch video', and so forth. The name you assign to a feature event should incorporate the application state into the event name, rather than long descriptive names. The following naming convention is suggested, where <i class=" ">group.event</i> refers to the parent event:    </p>
    <p>
<tt class=" ">group.event.sub-event</tt>    </p>
    <p>
Feature event names should be as generic as possible. For instance, if you want to track when users select a certain menu option, use a name like <strong class=" ">     <span style="color: #000000;">
&quot;user.menu.selection&quot;,    </span>
 </strong>     <span style="color: #000000;">
 not <strong class=" ">&quot;joeuser.menu.selection&quot;</strong>. The first option is better because it groups all the same types of event into a single metric that's easy to view on Dashboard. The person analyzing the data only has to look at a single number to get an overview of how many users have selected that menu option. The second might be fine for very small user bases, but if you have more than 100 users it means that the person analyzing the data would have to look through 100 different event names to be able to generate any useful data.    </span>
     <span style="color: #000000;">
     </span>
    </p>
    <p>
For example, to track a user's menu selection you might use the following code, where the 10 digit number uniquely identifies the selection in your code:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">Good Practice: Track the State with the Naming Syntax</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">[[APSAnalytics sharedInstance] sendAppFeatureEvent:@</code><code class="string">"select.item.12345678910"</code><code class="plain"> payload:nil];</code></div>
</div>
</div>    <p>
You should avoid using long, descriptive event names, as shown below:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">Bad Practice: Avoid Long Descriptions</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain"> [[APSAnalytics sharedInstance] sendAppFeatureEvent:@</code><code class="string">"Select Item THIS IS THE DESCRIPTION OF THE EVENT -12345678910"</code><code class="plain"> payload:nil];</code></div>
</div>
</div>    </div>
    <div class="section section-3 " id="43298730_APSAnalyticsforiOS-NavigationEvents">
        <h3 class="heading "><span>Navigation Events</span></h3>
    <p>
Use the <tt class=" ">sendAppNavEventFrom:to:withName:payload</tt> method to track a user's navigation within your application from one screen to another. The method's first and second parameters are strings that specify the &quot;from&quot; and &quot;to&quot; locations, respectively. It's third parameter is the name you want to assign to the event.    </p>
    <div class="confbox admonition admonition-note aui-message warning shadowed information-macro">
        
    <p>
Currently, navigation events do not appear in Dashboard. As a workaround, consider using <a class="document-link " href="#!/guide/APS_Analytics_for_iOS-section-43298730_APSAnalyticsforiOS-Transitionevents">transition events</a>.    </p>
    </div>
    
    <p>
In the following example, an event is generated when the user navigates from the application's home screen to an edit message screen:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">Best Practice: Track User Navigations Using a navEvent</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">[[APSAnalytics sharedInstance] sendAppNavEventFrom:@</code><code class="string">"Home"</code><code class="plain"> to:@</code><code class="string">"Edit Message"</code><code class="plain"> withName:@</code><code class="string">"nav.editmessage"</code><code class="plain"> payload:nil];</code></div>
</div>
</div>    <p>
Avoid passing a single long, descriptive string to <tt class=" ">navEvent()</tt>, for example:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">Bad Practice: Do Not Track User Navigations Using featureEvent</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">[[APSAnalytics sharedInstance] sendAppFeatureEvent:@</code><code class="string">"Home -&gt; Edit Message"</code><code class="plain"> payload:nil];</code></div>
</div>
</div>    <div class="section section-4 " id="43298730_APSAnalyticsforiOS-Transitionevents">
        <h4 class="heading "><span>Transition events</span></h4>
    <p>
Currently, <a class="document-link " href="#!/guide/APS_Analytics_for_iOS-section-43298730_APSAnalyticsforiOS-NavigationEvents">navigation events</a> are not collected and presented in the Appcelerator Dashboard. As a workaround to this temporary issue, you can create &quot;transition&quot; events that serve the same purpose. A transition event is a <a class="document-link " href="#!/guide/APS_Analytics_for_iOS-section-43298730_APSAnalyticsforiOS-FeatureEvents">feature event</a> whose name uniquely identifies the user's navigation (&quot;screen1-to-screen2&quot;, for example). You can create an  <a class="document-link " href="#!/guide/Appcelerator_Analytics-section-43298693_AppceleratorAnalytics-CreatingandViewingEventFunnels">event funnel</a> in Dashboard from these events to analyze navigation within your application.    </p>
    <p>
For example, suppose you wanted to track user navigation between pages of a multi-step sign-up process. As the user moves from one step to the next, the application generates a feature event whose name follows the pattern &quot;step<i class=" ">N</i>-to-step<i class=" ">N+1</i>&quot;, where <i class=" ">N</i> is the step number.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="comments">// Transition 1:</code></div>
<div class="line"><code class="plain">- (</code><code class="keyword">void</code><code class="plain">)gotoStepTwo {</code></div>
<div class="line"><code class="plain">    </code><code class="comments">// Generate transition event</code></div>
<div class="line"><code class="plain">    [[APSAnalytics sharedInstance] sendAppFeatureEvent:@</code><code class="string">"step1-to-step2"</code><code class="plain"> payload:nil];</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="comments">// Transition 2:</code></div>
<div class="line"><code class="plain">- (</code><code class="keyword">void</code><code class="plain">)gotoStepThree {</code></div>
<div class="line"><code class="plain">    </code><code class="comments">// Generate transition event</code></div>
<div class="line"><code class="plain">    [[APSAnalytics sharedInstance] sendAppFeatureEvent:@</code><code class="string">"step2-to-step3"</code><code class="plain"> payload:nil];</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="comments">// Transition 3:</code></div>
<div class="line"><code class="plain">- (</code><code class="keyword">void</code><code class="plain">)gotoStepFour {</code></div>
<div class="line"><code class="plain">    </code><code class="comments">// Generate transition event</code></div>
<div class="line"><code class="plain">    [[APSAnalytics sharedInstance] sendAppFeatureEvent:@</code><code class="string">"step3-to-step4"</code><code class="plain"> payload:nil];</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
</div>    <p class="p1">
When you create the funnel, you order the events in their logical order to mirror the process.    </p>
    </div>
    </div>
    <div class="section section-3 " id="43298730_APSAnalyticsforiOS-GeoEvents">
        <h3 class="heading "><span>Geo Events</span></h3>
    <p>
Use the <tt class=" ">sendAppGeoEvent</tt> to send real-time geographic data to the Analytics service.  Pass the method a <tt class=" ">CLLocation</tt> object containing the location data.  For example, you can use <a class="external-link external-link" href="https://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/occ/intfm/CLLocationManagerDelegate/locationManager:didUpdateLocations:" target="_blank"> <tt class=" ">locationManager:</tt>  <tt class=" ">didUpdateLocations</tt>  </a>  delegate method to send geo-events when the device receives new location data.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">GeoController.m</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="comments">// Delegate method from the CLLocationManagerDelegate protocol</code></div>
<div class="line"><code class="plain">- (</code><code class="keyword">void</code><code class="plain">)locationManager:(CLLocationManager *)manager</code></div>
<div class="line"><code class="plain">     didUpdateLocations:(NSArray *)locations</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    CLLocation *newLocation = [locations lastObject];</code></div>
<div class="line"><code class="plain">    [[APSAnalytics sharedInstance] sendAppGeoEvent:newLocation];</code></div>
<div class="line"><code class="plain">    NSLog(@</code><code class="string">"%f, %f"</code><code class="plain">, newLocation.coordinate.latitude, newLocation.coordinate.longitude);</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="color1">@end</code></div>
</div>
</div>    </div>
    </div>
        </div><a id="editButton" href="https://wiki.appcelerator.org/pages/editpage.action?pageId=43298730"><span>Edit</span></a>
    
        <div class="footer">
            Created with <a href="http://k15t.com/display/web/Scroll-Wiki-EclipseHelp-Exporter-for-Confluence" target="_blank">Scroll EclipseHelp Exporter for Confluence</a>.
        </div>
    </div>
</body>
</html>
