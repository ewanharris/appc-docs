Ext.data.JsonP['Creating_Your_First_Titanium_App']({"guide":" <!doctype html> <html> <head> <title>Creating Your First Titanium App</title> <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"> </meta></head> <body> <div class=\"container\"> <div class=\"header\"/> <div id=\"src-37541502\" class=\"content\"> <h1>Creating Your First Titanium App</h1> <p> </p> <ul class=\"toc-indentation\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Creating_Your_First_Titanium_App-section-src-37541502_CreatingYourFirstTitaniumApp-Introduction\">Introduction</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Creating_Your_First_Titanium_App-section-src-37541502_CreatingYourFirstTitaniumApp-Createanewproject\">Create a new project</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Creating_Your_First_Titanium_App-section-src-37541502_CreatingYourFirstTitaniumApp-Createthedatamodel\">Create the data model</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Creating_Your_First_Titanium_App-section-src-37541502_CreatingYourFirstTitaniumApp-Initializethebookcollection\">Initialize the book collection</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Creating_Your_First_Titanium_App-section-src-37541502_CreatingYourFirstTitaniumApp-AddaTableView\">Add a TableView</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Creating_Your_First_Titanium_App-section-src-37541502_CreatingYourFirstTitaniumApp-Createabookdetailview\">Create a book detail view</a> </p> <ul class=\"toc-indentation\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Creating_Your_First_Titanium_App-section-src-37541502_CreatingYourFirstTitaniumApp-Displaybookdetailsviewonselection\">Display book details view on selection</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Creating_Your_First_Titanium_App-section-src-37541502_CreatingYourFirstTitaniumApp-Modifythebookdetaillayout\">Modify the book detail layout</a> </p> </li></ul></li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Creating_Your_First_Titanium_App-section-src-37541502_CreatingYourFirstTitaniumApp-Addplatform-specificstylestotheTableView\">Add platform-specific styles to the TableView</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Creating_Your_First_Titanium_App-section-src-37541502_CreatingYourFirstTitaniumApp-AddaNavigationWindowforiOS\">Add a NavigationWindow for iOS</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Creating_Your_First_Titanium_App-section-src-37541502_CreatingYourFirstTitaniumApp-Allowusertoaddbooks\">Allow user to add books</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/Creating_Your_First_Titanium_App-section-src-37541502_CreatingYourFirstTitaniumApp-Nextsteps\">Next steps</a> </p> </li></ul> <div class=\"section section-2\" id=\"src-37541502_CreatingYourFirstTitaniumApp-Introduction\"> <h2 class=\"heading\"><span>Introduction</span></h2> <p>This tutorial walks you through the process of building a simple Titanium application for iPhone and Android that lets users enter and view their favorite books. It touches on the following topics: </p> <ul class=\"\"><li> <p>Alloy framework </p> </li><li> <p>Working with Backbone models and collections </p> </li><li> <p>Displaying data in a TableView </p> </li><li> <p>Using platform-specific resources and styles </p> </li><li> <p>Handling events </p> </li></ul> <p>You can<strong> <a class=\"external-link external-link\" href=\"https://github.com/appcelerator-developer-relations/FaveBooks\" target=\"_blank\">download</a> </strong>a completed version of the project. </p> <p> <img src=\"images/download/attachments/37541502/complete-ios.png\" alt=\"images/download/attachments/37541502/complete-ios.png\" class=\"confluence-embedded-image\" width=\"300\"> <img src=\"images/download/attachments/37541502/complete-android.png\" alt=\"images/download/attachments/37541502/complete-android.png\" class=\"confluence-embedded-image\" width=\"300\"> </img></img></p> <p> </p> </div> <div class=\"section section-2\" id=\"src-37541502_CreatingYourFirstTitaniumApp-Createanewproject\"> <h2 class=\"heading\"><span>Create a new project</span></h2> <p>To start, you&apos;ll create a new Alloy project in Studio. </p> <p><strong>To create a new Alloy project:</strong> </p> <ol class=\"\"><li class=\"\"> <p>In Studio, select <strong class=\"\">File</strong> &gt;<strong class=\"\"> New </strong>&gt;<strong> Mobile App Project</strong>. </p> </li><li class=\"\"> <p>Select the <strong>Default Alloy Project</strong> type and click Next. </p> </li><li class=\"\"> <p>On the <strong class=\"\">Project Location</strong> screen, enter <strong class=\"\">FaveBooks</strong> for the Project name and <strong class=\"\">com.<i class=\"\">your- domain</i>.favebooks. </strong>Replace <i>your-domain</i> with your personal or organization&apos;s domain. Leave the other fields at their default values. </p> </li><li class=\"\"> <p>Click <strong>OK</strong>. </p> </li></ol> <p>The new project opens in Studio. </p> </div> <div class=\"section section-2\" id=\"src-37541502_CreatingYourFirstTitaniumApp-Createthedatamodel\"> <h2 class=\"heading\"><span>Create the data model</span></h2> <p>The heart of the FaveBooks app is the data containing the user&#x2019;s books, so we&#x2019;ll start by defining our data model. Alloy uses Backbone to provide its <a class=\"document-link\" href=\"#!/guide/Alloy_Models\">data modeling and collection features</a>. </p> <p><strong>To create the data model:</strong> </p> <ol class=\"\"><li class=\"\"> <p>Right-click or Control-click on the top-level project folder and select <strong class=\"\">New </strong>&gt;<strong> Alloy Model</strong>, or press Cmd+Shift+M (Mac) or Ctrl+Shift+M (Windows). </p> </li><li> <p>In the New Model dialog, make the following entries: </p> <ul class=\"\"><li class=\"\"> <p>For <strong class=\"\">Model name</strong>, enter <strong>books</strong>. </p> </li><li class=\"\"> <p>Select <strong class=\"\">sql</strong> from the <strong>Adapter</strong> menu. </p> </li><li class=\"\"> <p>In the <strong class=\"\">Schema</strong> table, add two fields named <strong class=\"\">title</strong> and <strong class=\"\">author</strong> and set their types to <strong>text</strong>. </p> <img src=\"images/download/attachments/37541502/new_model.png\" alt=\"images/download/attachments/37541502/new_model.png\" class=\"confluence-embedded-image\"> </img></li></ul></li><li> <p>Click OK. </p> </li></ol> <p>This creates a new file in the <strong class=\"\">app/models</strong> directory called <strong class=\"\">books.js</strong>. This file describes the data model you just created. The <tt>config</tt> section, in particular, defines the data columns, adapter type, and collection name. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">exports.definition = {</code></div> <div class=\"line\"><code class=\"plain\"> config: {</code></div> <div class=\"line\"><code class=\"plain\"> columns: {</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"string\">&quot;title&quot;</code><code class=\"plain\">: </code><code class=\"string\">&quot;text&quot;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"string\">&quot;author&quot;</code><code class=\"plain\">: </code><code class=\"string\">&quot;text&quot;</code></div> <div class=\"line\"><code class=\"plain\"> },</code></div> <div class=\"line\"><code class=\"plain\"> adapter: {</code></div> <div class=\"line\"><code class=\"plain\"> type: </code><code class=\"string\">&quot;sql&quot;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> collection_name: </code><code class=\"string\">&quot;books&quot;</code></div> <div class=\"line\"><code class=\"plain\"> }</code></div> <div class=\"line\"><code class=\"plain\"> ...</code></div> <div class=\"line\"><code class=\"plain\">}</code></div> </div> </div> </div> <div class=\"section section-2\" id=\"src-37541502_CreatingYourFirstTitaniumApp-Initializethebookcollection\"> <h2 class=\"heading\"><span>Initialize the book collection</span></h2> <p>Next you&apos;ll write code that creates a Collection from the model definition, creates a single book, and saves it to device storage. Eventually you will add features to let users add books, but for now this will give us some data to work with. </p> <p><strong>To initialize the book collection:</strong> </p> <ol class=\"\"><li class=\"\"> <p>Open <strong class=\"\">controllers/index.js</strong> and delete the <tt>doClick()</tt> function definition added by the project wizard. </p> </li><li> <p>Get a reference to our collection: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> myBooks = Alloy.Collections.books;</code></div> </div> </div> </li><li> <p>Create a new model object (book) and assign it a title and author: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> book = Alloy.createModel(</code><code class=\"string\">&apos;books&apos;</code><code class=\"plain\">, { </code></div> <div class=\"line\"><code class=\"plain\"> title : </code><code class=\"string\">&apos;Great Expectations&apos;</code><code class=\"plain\">, </code></div> <div class=\"line\"><code class=\"plain\"> author: </code><code class=\"string\">&apos;Charles Dickens&apos;</code><code class=\"plain\"> </code></div> <div class=\"line\"><code class=\"plain\">});</code></div> </div> </div> </li><li> <p>Add the book to the collection and persist it to the database. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">myBooks.add(book); </code></div> <div class=\"line\"><code class=\"plain\">book.save();</code></div> </div> </div> </li><li class=\"\"> <p>Save your changes to <tt>index</tt>.js. </p> </li></ol> <p>Now that our application has some data, let&#x2019;s display it in a table. </p> </div> <div class=\"section section-2\" id=\"src-37541502_CreatingYourFirstTitaniumApp-AddaTableView\"> <h2 class=\"heading\"><span>Add a TableView</span></h2> <p>In Alloy, collection data can be <a class=\"document-link\" href=\"#!/guide/Alloy_Data_Binding\">synchronized</a> to a view object, or a single model can be bound to a view component. At runtime, Alloy monitors your application&apos;s collections for changes and updates any synchronized view objects with the new data. Specifically, the Backbone add, change, destroy, fetch, remove, and reset events are monitored for changes. In this case, each time we call the <tt>add()</tt> method on the myBooks collection the view is synchronized with the new data. </p> <ol class=\"\"><li class=\"\"> <p>Open <strong>views/index.xml</strong>. </p> </li><li class=\"\"> <p>Delete the <strong class=\"\"> <tt class=\"\">&lt;Label&gt;</tt> </strong>element that was generated by the project wizard and add a <strong class=\"\"> <tt>&lt;TableView&gt;</tt> </strong>element in its place. </p> </li><li class=\"\"> <p>Insert a <strong class=\"\"> <tt class=\"\">&lt;TableViewRow&gt;</tt> </strong>element inside the <tt>&lt;TableView&gt;</tt> element, as shown below: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">&lt;Alloy&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;Window </code><code class=\"keyword\">class</code><code class=\"plain\">=</code><code class=\"string\">&quot;container&quot;</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;!-- Add TableView and TableViewRow --&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;TableView&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;TableViewRow&gt;&lt;/TableViewRow&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/TableView&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/Window&gt;</code></div> <div class=\"line\"><code class=\"plain\">&lt;/Alloy&gt;</code></div> </div> </div> <p>The <tt>&lt;TableViewRow&gt;</tt> element will be repeated for each element in our data set. </p> </li><li class=\"\"> <p>Add a <strong class=\"\"> <tt class=\"\">&lt;Collection&gt;</tt> </strong>element to the top-level <tt class=\"\">&lt;Alloy&gt;</tt> element and set its <strong class=\"\"> <tt class=\"\">src</tt> </strong>property to <strong>books</strong>. This corresponds to the name of the collection we created before. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">&lt;Alloy&gt; </code></div> <div class=\"line\"><code class=\"plain\"> &lt;Collection src=</code><code class=\"string\">&quot;books&quot;</code><code class=\"plain\">/&gt; </code></div> <div class=\"line\"><code class=\"plain\"> &lt;Window </code><code class=\"keyword\">class</code><code class=\"plain\">=</code><code class=\"string\">&quot;container&quot;</code><code class=\"plain\">&gt; </code></div> <div class=\"line\"><code class=\"plain\"> ... </code></div> <div class=\"line\"><code class=\"plain\"> &lt;/Window&gt; </code></div> <div class=\"line\"><code class=\"plain\">&lt;/Alloy&gt;</code></div> </div> </div> </li><li class=\"\"> <p>To synchronize the collection with the view, assign <strong class=\"\"> <tt class=\"\">books</tt> </strong>to the <tt class=\"\">TableView</tt> element&apos;s <strong class=\"\"> <tt>dataCollection</tt> </strong>attribute. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">&lt;Alloy&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;Collection src=</code><code class=\"string\">&quot;books&quot;</code><code class=\"plain\">/&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;Window </code><code class=\"keyword\">class</code><code class=\"plain\">=</code><code class=\"string\">&quot;container&quot;</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;!-- Asssign the collection to the TableView --&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;TableView dataCollection=</code><code class=\"string\">&quot;books&quot;</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;TableViewRow&gt;&lt;/TableViewRow&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/TableView&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/Window&gt;</code></div> <div class=\"line\"><code class=\"plain\">&lt;/Alloy&gt;</code></div> </div> </div> </li><li class=\"\"> <p>Using curly-bracket syntax, assign the title from each book (that is, each model in the collection) to the <tt class=\"\">title</tt> attribute of the <tt class=\"\">&lt;TableViewRow&gt;</tt>. The final contents of <tt>index.xml</tt> should look like the following: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">&lt;Alloy&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;Collection src=</code><code class=\"string\">&quot;books&quot;</code><code class=\"plain\">/&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;Window </code><code class=\"keyword\">class</code><code class=\"plain\">=</code><code class=\"string\">&quot;container&quot;</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;TableView dataCollection=</code><code class=\"string\">&quot;books&quot;</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;TableViewRow title=</code><code class=\"string\">&quot;{title}&quot;</code><code class=\"plain\"> author=</code><code class=\"string\">&quot;{author}&quot;</code><code class=\"plain\">&gt;&lt;/TableViewRow&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/TableView&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/Window&gt;</code></div> <div class=\"line\"><code class=\"plain\">&lt;/Alloy&gt; </code></div> </div> </div> </li><li class=\"\"> <p>Open <strong>styles/index.tss</strong>. </p> </li><li> <p>By default, Android applications built with Titanium use the AppCompat theme, which uses a dark background with light text, while iOS defaults to black text and a black background. In order to see text, change the background to white for iOS only by adding the platform attribute to the container rule. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"string\">&quot;.container[platform=ios]&quot;</code><code class=\"plain\">: {</code></div> <div class=\"line\"><code class=\"plain\">\tbackgroundColor: </code><code class=\"string\">&apos;white&apos;</code></div> <div class=\"line\"><code class=\"plain\">}</code></div> </div> </div> </li></ol> <p>At this point we&#x2019;re now ready to test our app. For comparison, we&#x2019;ll run the app in both an iPhone simulator and an Android emulator. </p> <p><strong>To launch the app in the iPhone simulator</strong>: </p> <ul class=\"\"><li class=\"\"> <p>From the Target menu in the top-right corner of Studio, select <strong class=\"\">iOS Simulator</strong> &gt;<strong> iPhone</strong>. By default, Studio is configured to automatically launch when you select a target platform. Wait for the app to complete launching in the simulator. </p> <img src=\"images/download/attachments/37541502/simulators.png\" alt=\"images/download/attachments/37541502/simulators.png\" class=\"confluence-embedded-image\" width=\"500\"> </img></li></ul> <p> </p> <p><strong>To launch the app in an Android emulator</strong> </p> <ul class=\"\"><li class=\"\"> <p>When the application has finished launching in the iPhone simulator, select <strong class=\"\">Android Emulator </strong>&gt;<strong> titanium_1_WVGA800</strong> to launch the app. </p> </li></ul> <p>The <strong>titanium_1_WVGA800</strong> string corresponds to the name of the Android virtual device that Studio creates by default. If you have installed other AVDs, you can select one of those. </p> <p>The screenshots below show the app running on an iPhone simulator and an Android emulator. As you can see, the table is populated with the book from the collection. </p> <p> <img src=\"images/download/attachments/37541502/first-simulator.png\" alt=\"images/download/attachments/37541502/first-simulator.png\" class=\"confluence-embedded-image\" width=\"100\"> <img src=\"images/download/attachments/37541502/first-emulator.png\" alt=\"images/download/attachments/37541502/first-emulator.png\" class=\"confluence-embedded-image\" width=\"100\"> </img></img></p> <p>Note the following: </p> <ul class=\"\"><li class=\"\"> <p>On iPhone the top of the <tt>TableView</tt> is partly obscured by the iOS status bar. We&#x2019;ll fix this later in this tutorial. </p> </li><li> <p>On the Android, the book is hidden under the app label. We&apos;ll fix this later in this tutorial. </p> </li><li> <p>The table length increases by a row each time you launch the app, since we are saving the (same) book to each time. </p> </li></ul> <p><strong>Android troubleshooting</strong> </p> <p>The initial launch of the Android emulator can be quite slow and Studio may timeout before it can install and launch the application. If this happens just click <strong>Run</strong> in Studio again. Subsequent launches should not time out on the same virtual device. </p> </div> <div class=\"section section-2\" id=\"src-37541502_CreatingYourFirstTitaniumApp-Createabookdetailview\"> <h2 class=\"heading\"><span>Create a book detail view</span></h2> <p>Next you&#x2019;ll add functionality to let the user select a book and view its details (title and author). To do this you&#x2019;ll create a new Alloy controller. An Alloy controller is actually a logical collection of three parts: </p> <ul class=\"\"><li> <p>A view (an XML file) </p> </li><li> <p>A JavaScript controller </p> </li><li> <p>A style file (a Titanium Style Sheet file) </p> </li></ul> <p><strong>To create the book detail view</strong> : </p> <ol class=\"\"><li class=\"\"> <p>Right-click or Control-click on the project folder and select <strong class=\"\">New </strong>&gt;<strong> Alloy Controller</strong>, or press Cmd + Shift + C (Mac) or Ctrl + Shift + C (Windows). </p> </li><li class=\"\"> <p>In the New Controller dialog, enter <strong>bookdetails</strong> in the Controller name text field, and click OK. This creates the following new files: </p> <ul class=\"\"><li class=\"\"> <p><tt>controllers/bookdetails.js</tt> &#x2013; The controller&#x2019;s JavaScript controller. </p> </li><li class=\"\"> <p><tt>views/bookdetails.xml</tt> &#x2013; The controller&#x2019;s view </p> </li><li class=\"\"> <p><tt>styles/bookdetails.tss</tt> &#x2013; Styles for the controller </p> </li></ul></li><li class=\"\"> <p>Open <strong>views/bookdetails.xml</strong> in the editor. </p> </li><li class=\"\"> <p>Replace the <tt class=\"\">&lt;View&gt;</tt> element with a <tt>&lt;Window&gt;</tt> element: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">&lt;Alloy&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;Window </code><code class=\"keyword\">class</code><code class=\"plain\">=</code><code class=\"string\">&quot;container&quot;</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/Window&gt; </code></div> <div class=\"line\"><code class=\"plain\">&lt;/Alloy&gt;</code></div> </div> </div> </li><li class=\"\"> <p>Add two <tt class=\"\">&lt;Label&gt;</tt> elements to the <tt class=\"\">&lt;Window&gt;</tt> element. Give the first one an ID of <strong class=\"\">titleLabel</strong> and the other an ID of <strong>authorLabel</strong>, as shown below. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">&lt;</code><code class=\"keyword\">Alloy</code><code class=\"plain\">&gt; </code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">Window</code><code class=\"plain\"> </code><code class=\"color1\">class</code><code class=\"plain\">=</code><code class=\"string\">&quot;container&quot;</code><code class=\"plain\">&gt; </code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">Label</code><code class=\"plain\"> </code><code class=\"color1\">id</code><code class=\"plain\">=</code><code class=\"string\">&quot;titleLabel&quot;</code><code class=\"plain\">&gt;&lt;/</code><code class=\"keyword\">Label</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">Label</code><code class=\"plain\"> </code><code class=\"color1\">id</code><code class=\"plain\">=</code><code class=\"string\">&quot;authorLabel&quot;</code><code class=\"plain\">&gt;&lt;/</code><code class=\"keyword\">Label</code><code class=\"plain\">&gt; </code></div> <div class=\"line\"><code class=\"plain\"> &lt;/</code><code class=\"keyword\">Window</code><code class=\"plain\">&gt; </code></div> <div class=\"line\"><code class=\"plain\">&lt;/</code><code class=\"keyword\">Alloy</code><code class=\"plain\">&gt;</code></div> </div> </div> </li><li class=\"\"> <p>Open <strong class=\"\">styles/bookdetails.tss</strong> and a background color for iOS to the <tt>.container</tt> rule: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"string\">&quot;.container[platform=ios]&quot;</code><code class=\"plain\"> : { </code></div> <div class=\"line\"><code class=\"plain\"> backgroundColor: </code><code class=\"string\">&apos;white&apos;</code><code class=\"plain\"> </code></div> <div class=\"line\"><code class=\"plain\">}</code></div> </div> </div> </li></ol> <p>Next we&#x2019;ll add an event handler to the <tt>&lt;TableView&gt;</tt> that opens this new window and displays the book&apos;s information. </p> <div class=\"section section-3\" id=\"src-37541502_CreatingYourFirstTitaniumApp-Displaybookdetailsviewonselection\"> <h3 class=\"heading\"><span>Display book details view on selection</span></h3> <p>To respond to user selection, you add an <tt class=\"\">onClick</tt> attribute to the <tt class=\"\">&lt;TableView&gt;</tt> element, and assign it the name of the function to invoke. The function creates a new instance of the <strong class=\"\">bookdetails</strong> Alloy controller, passing it the title and author of the selected book, so it can display those values in the <tt>&lt;Label&gt;</tt> elements you defined there. </p> <p><strong>To display the book details screen on selection</strong>: </p> <ol class=\"\"><li class=\"\"> <p>In the Project Navigator, open <strong>views/index.xml</strong>. </p> </li><li class=\"\"> <p>Add an <strong class=\"\"> <tt class=\"\">onClick</tt> </strong>attribute to the <tt class=\"\">&lt;TableView&gt;</tt> element and set its value to <strong class=\"\"> <tt>showBook</tt> </strong>. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">&lt;TableViewRow title=</code><code class=\"string\">&quot;{title}&quot;</code><code class=\"plain\"> author=</code><code class=\"string\">&quot;{author}&quot;</code><code class=\"plain\"> onClick=</code><code class=\"string\">&quot;showBook&quot;</code><code class=\"plain\">&gt;&lt;/TableViewRow&gt;</code></div> </div> </div> </li><li class=\"\"> <p>Open <strong class=\"\">controllers/index.js</strong> and add a function named <strong class=\"\"> <tt class=\"\">showBook()</tt> </strong>that takes a single argument called <strong class=\"\"> <tt>event</tt> </strong>. This is the event object passed to the function that contains information about the selected item. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"keyword\">function</code><code class=\"plain\"> showBook (event) { </code></div> <div class=\"line\"><code class=\"plain\">}</code></div> </div> </div> </li><li class=\"\"> <p>First, let&#x2019;s add code to extract the title and author of the selected book from the <tt>event.source</tt> object. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"keyword\">function</code><code class=\"plain\"> showBook(event) {</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">var</code><code class=\"plain\"> selectedBook = event.source;</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">var</code><code class=\"plain\"> args = {</code></div> <div class=\"line\"><code class=\"plain\"> title: selectedBook.title,</code></div> <div class=\"line\"><code class=\"plain\"> author: selectedBook.author</code></div> <div class=\"line\"><code class=\"plain\"> };</code></div> <div class=\"line\"><code class=\"plain\">}</code></div> </div> </div> </li><li class=\"\"> <p>Lastly, we create a new instance of the Alloy bookdetails controller, passing it the <tt>args</tt> object containing the title and author data, and open the view. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"keyword\">function</code><code class=\"plain\"> showBook(event) {</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">var</code><code class=\"plain\"> selectedBook = event.source;</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">var</code><code class=\"plain\"> args = {</code></div> <div class=\"line\"><code class=\"plain\"> title: selectedBook.title,</code></div> <div class=\"line\"><code class=\"plain\"> author: selectedBook.author</code></div> <div class=\"line\"><code class=\"plain\"> };</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">var</code><code class=\"plain\"> bookview = Alloy.createController(</code><code class=\"string\">&quot;bookdetails&quot;</code><code class=\"plain\">, args).getView();</code></div> <div class=\"line\"><code class=\"plain\"> bookview.open();</code></div> <div class=\"line\"><code class=\"plain\">} </code></div> </div> </div> </li><li class=\"\"> <p>Lastly, we need to update <strong class=\"\">bookdetails.js</strong> to display the title and author values passed to the <tt>createController()</tt> method, or display a default title and author if none were provided: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> args = arguments[0] || {};</code></div> <div class=\"line\"><code class=\"plain\">$.titleLabel.text = args.title || </code><code class=\"string\">&apos;Default Title&apos;</code><code class=\"plain\">;</code></div> <div class=\"line\"><code class=\"plain\">$.authorLabel.text = args.author || </code><code class=\"string\">&apos;Default author&apos;</code><code class=\"plain\">; </code></div> </div> </div> </li><li> <p>Save your changes. </p> </li></ol> <p>Launch the app in the iPhone simulator or Android emulator. Select a book from the list to open the detail screen. You should see something like the following: </p> <p> <img src=\"images/download/thumbnails/37541502/display_bookdetails-ios.png\" alt=\"images/download/thumbnails/37541502/display_bookdetails-ios.png\" class=\"confluence-embedded-image confluence-thumbnail\" width=\"100\"> <img src=\"images/download/attachments/37541502/display_bookdetails-android.png\" alt=\"images/download/attachments/37541502/display_bookdetails-android.png\" class=\"confluence-embedded-image\" width=\"100\"> </img></img></p> <p>Clearly, this isn&#x2019;t what we want &#x2013; the two labels are occupying at the same space on screen. Next we&apos;ll modify the layout and styles of the book detail screen to fix this. </p> </div> <div class=\"section section-3\" id=\"src-37541502_CreatingYourFirstTitaniumApp-Modifythebookdetaillayout\"> <h3 class=\"heading\"><span>Modify the book detail layout</span></h3> <p>Titanium supports three <a class=\"document-link\" href=\"#!/guide/Layouts_Positioning_and_the_View_Hierarchy-section-src-29004895_LayoutsPositioningandtheViewHierarchy-Layoutmodes\">layout modes</a>: composite (or absolute), vertical, and horizontal. In composite mode, <span style=\"color: #484848;\"> you specify a child view&apos;s coordinates on a grid relative to its parent container&apos;s top/left or bottom/right corner. If not specified, a child view is centered on the display. In this section you&apos;ll apply a vertical layout to the book details view, and then tweak the style. </span> </p> <ol class=\"\"><li class=\"\"> <p>Open <strong>views/bookdetails.xml</strong>. </p> </li><li class=\"\"> <p>Wrap the two <tt class=\"\">&lt;Label&gt;</tt> elements within a <tt>&lt;View&gt;</tt> element, as shown below. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">&lt;View&gt; </code></div> <div class=\"line\"><code class=\"plain\"> &lt;Label id=</code><code class=\"string\">&quot;titleLabel&quot;</code><code class=\"plain\">&gt;&lt;/Label&gt; </code></div> <div class=\"line\"><code class=\"plain\"> &lt;Label id=</code><code class=\"string\">&quot;authorLabel&quot;</code><code class=\"plain\">&gt;&lt;/Label&gt; </code></div> <div class=\"line\"><code class=\"plain\">&lt;/View&gt; </code></div> </div> </div> </li><li class=\"\"> <p>Add a <strong class=\"\"> <tt class=\"\">layout</tt> </strong>attribute to the <tt class=\"\">&lt;View&gt;</tt> element and set its value to <strong class=\"\"> <tt>vertical</tt> </strong>. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">&lt;View layout=</code><code class=\"string\">&apos;vertical&apos;</code><code class=\"plain\">&gt; </code></div> <div class=\"line\"><code class=\"plain\"> &lt;Label id=</code><code class=\"string\">&quot;titleLabel&quot;</code><code class=\"plain\">&gt;&lt;/Label&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;Label id=</code><code class=\"string\">&quot;authorLabel&quot;</code><code class=\"plain\">&gt;&lt;/Label&gt; </code></div> <div class=\"line\"><code class=\"plain\">&lt;/View&gt;</code></div> </div> </div> </li><li class=\"\"> <p>Open <strong>styles/bookdetails.tss</strong> and add the following style rules to align the labels along the left side of the screen, and to set their font sizes. We also add some padding between the two labels by 10. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"string\">&quot;#titleLabel&quot;</code><code class=\"plain\">: {</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">font</code><code class=\"plain\">: {</code></div> <div class=\"line\"><code class=\"plain\"> fontSize: </code><code class=\"string\">&apos;30&apos;</code></div> <div class=\"line\"><code class=\"plain\"> },</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">left</code><code class=\"plain\">: </code><code class=\"string\">&apos;10&apos;</code></div> <div class=\"line\"><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"string\">&quot;#authorLabel&quot;</code><code class=\"plain\">: {</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">font</code><code class=\"plain\">: {</code></div> <div class=\"line\"><code class=\"plain\"> fontSize: </code><code class=\"string\">&apos;20&apos;</code></div> <div class=\"line\"><code class=\"plain\"> },</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">left</code><code class=\"plain\">: </code><code class=\"string\">&apos;10&apos;</code></div> <div class=\"line\"><code class=\"plain\">}</code></div> </div> </div> </li><li class=\"\"> <p>Also, we want to ensure that the labels aren&apos;t overlapped by the app&apos;s name and that the background of the main view doesn&apos;t use a white background with white text by adding the following to <strong>styles/index.tss</strong>: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"string\">&quot;.container[platform=android]&quot;</code><code class=\"plain\"> : { </code></div> <div class=\"line\"><code class=\"plain\"> backgroundColor:</code><code class=\"string\">&quot;black&quot;</code><code class=\"plain\">,\t</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">top</code><code class=\"plain\">: </code><code class=\"string\">&apos;100&apos;</code></div> <div class=\"line\"><code class=\"plain\">}</code></div> </div> </div> </li></ol> <p>Save your changes and build again for iPhone or Android. The title and author should now be positioned vertically within the view, and aligned to the left side of the screen. To get back to the original table, you can click the <strong>Back</strong> button on Android. </p> <p> <img src=\"images/download/thumbnails/37541502/modify_layout-ios.png\" alt=\"images/download/thumbnails/37541502/modify_layout-ios.png\" class=\"confluence-embedded-image confluence-thumbnail\" width=\"100\"> <img src=\"images/download/attachments/37541502/modify_layout-android.png\" alt=\"images/download/attachments/37541502/modify_layout-android.png\" class=\"confluence-embedded-image\" width=\"100\"> </img></img></p> <p>On iOS, the application is stuck here. Instructions on adding an iOS navigation controller is detailed in a <a class=\"document-link\" href=\"#!/guide/Creating_Your_First_Titanium_App-section-src-37541502_CreatingYourFirstTitaniumApp-AddaNavigationWindowforiOS\">later section</a> of this tutorial. </p> </div> </div> <div class=\"section section-2\" id=\"src-37541502_CreatingYourFirstTitaniumApp-Addplatform-specificstylestotheTableView\"> <h2 class=\"heading\"><span>Add platform-specific styles to the TableView</span></h2> <p>If you test the app on an Android device with a high-resolution display, you&#x2019;ll notice that the default height of each table row is a bit small to comfortably read or select with a finger. For instance, the screenshot below was taken with a Pixel 2 emulator. <img src=\"images/download/attachments/37541502/platform_specific_changes-android.png\" alt=\"images/download/attachments/37541502/platform_specific_changes-android.png\" class=\"confluence-embedded-image\" width=\"500\"> </img></p> <p>To fix this we will apply a <a class=\"document-link\" href=\"#!/guide/Alloy_Styles_and_Themes-section-src-35621526_AlloyStylesandThemes-Platform-SpecificStyles\">platform-specific style</a> to the <tt>&lt;TableViewRow&gt;</tt> element. During the build process, platform-specific styles are applied only to builds on the target platform. The following is an example of a platform-specific style that makes all Labels blue in iOS builds. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"string\">&quot;Label[platform=ios]&quot;</code><code class=\"plain\">: { </code></div> <div class=\"line\"><code class=\"plain\"> color: </code><code class=\"string\">&apos;blue&apos;</code><code class=\"plain\"> </code></div> <div class=\"line\"><code class=\"plain\">}</code></div> </div> </div> <p> </p> <p>In this case we&#x2019;ll increase the font size used by each <tt>&lt;TableViewRow&gt;</tt> element, and set the height of each row to provide some space around the text. </p> <p><strong>To increase the table row height on Android</strong>: </p> <ol class=\"\"><li class=\"\"> <p>Open <strong>views/index.tss</strong> and add the following style rule to the end of the document: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"string\">&quot;TableViewRow[platform=android]&quot;</code><code class=\"plain\">: { </code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">font</code><code class=\"plain\">: { </code></div> <div class=\"line\"><code class=\"plain\"> fontSize: </code><code class=\"string\">&apos;24&apos;</code><code class=\"plain\"> </code></div> <div class=\"line\"><code class=\"plain\"> }, </code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">height</code><code class=\"plain\">: </code><code class=\"string\">&apos;40&apos;</code><code class=\"plain\"> </code></div> <div class=\"line\"><code class=\"plain\">}</code></div> </div> </div> </li><li> <p>Save your changes and build the application for Android. The TableView should look like the following screenshot: </p> <p> <img src=\"images/download/attachments/37541502/tableview-android.png\" alt=\"images/download/attachments/37541502/tableview-android.png\" class=\"confluence-embedded-image\" width=\"500\"> </img></p> </li></ol> </div> <div class=\"section section-2\" id=\"src-37541502_CreatingYourFirstTitaniumApp-AddaNavigationWindowforiOS\"> <h2 class=\"heading\"><span>Add a NavigationWindow for iOS</span></h2> <p>Unlike Android, iOS devices do not provide a physical back button for navigation. The <a class=\"external-link external-link\" href=\"#!/api/Titanium.UI.iOS.NavigationWindow\"> <tt class=\"\">NavigationWindow</tt> </a>is an iOS-only UI control that provides an easy way to display and navigate hierarchical content. (In native iOS terms, the control is an implementation of the iOS <a class=\"external-link external-link\" href=\"https://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/NavigationControllers.html\" target=\"_blank\">navigation controller interface</a>.) On Android, you get this type of navigation for &quot;free&quot;. The <tt class=\"\">NavigationWindow</tt> will wrap the original <tt class=\"\">&lt;Window&gt;</tt> element and provide a title bar above the <tt>&lt;TableView&gt;</tt> control, solving this layout issue. </p> <p>To do this we&apos;ll take advantage of an Alloy feature called <a class=\"document-link\" href=\"#!/guide/Alloy_Concepts-section-src-34636240_AlloyConcepts-Platform-specificresources\">platform-specific resources</a> that lets you define platform-specific view, controller, and style files. At build time, only those resources specific to the target platform are included. There are two parts to this: </p> <ul class=\"\"><li class=\"\"> <p>Creating a new iOS-specific entry point (a new version of <tt class=\"\">index</tt>.xml) that includes the <tt>NavigationWindow</tt> element </p> </li><li class=\"\"> <p>Updating the controller code to handle the difference between the iOS and Android implementations. In this case we&apos;ll use <a class=\"document-link\" href=\"#!/guide/Alloy_Controllers-section-src-34636384_AlloyControllers-Conditionalcode\">platform-conditional code</a> to handle the cross-platform code differences. </p> </li></ul> <p><strong>To create the iOS-specific view with a NavigationController:</strong> </p> <ol class=\"\"><li class=\"\"> <p>In Project Explorer, create a new folder named <strong class=\"\">ios</strong> in the <tt class=\"\">app/views</tt> folder. Right-click on the FaveBooks project in the Project Explorer and select <strong class=\"\">New</strong> &gt; <strong class=\"\">Folder</strong>. The New Folder wizard will allow you to navigate the project directories, select the parent folder, and name the new folder. Once you&apos;ve done this, click <strong>Finish</strong>. </p> </li><li class=\"\"> <p>Create a new file named <strong>index.xml</strong> in the new folder.<br> <img src=\"images/download/attachments/37541502/ios-view.png\" alt=\"images/download/attachments/37541502/ios-view.png\" class=\"confluence-embedded-image\"> </img></br></p> </li><li class=\"\"> <p>Copy the contents of <strong class=\"\"> <tt class=\"\">views/index.xml</tt> </strong>to <strong class=\"\"> <tt>views/ios/index.xml</tt> </strong>. </p> </li><li class=\"\"> <p>Wrap the existing <tt class=\"\">&lt;Window&gt;</tt> element with a <strong class=\"\"> <tt>&lt;NavigationWindow&gt;</tt> </strong>element: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">&lt;</code><code class=\"keyword\">Alloy</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">Collection</code><code class=\"plain\"> </code><code class=\"color1\">src</code><code class=\"plain\">=</code><code class=\"string\">&quot;books&quot;</code><code class=\"plain\">/&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">NavigationWindow</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">Window</code><code class=\"plain\"> </code><code class=\"color1\">class</code><code class=\"plain\">=</code><code class=\"string\">&quot;container&quot;</code><code class=\"plain\"> </code><code class=\"color1\">title</code><code class=\"plain\">=</code><code class=\"string\">&quot;My Books&quot;</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">TableView</code><code class=\"plain\"> </code><code class=\"color1\">dataCollection</code><code class=\"plain\">=</code><code class=\"string\">&quot;books&quot;</code><code class=\"plain\"> </code><code class=\"color1\">id</code><code class=\"plain\">=</code><code class=\"string\">&quot;bookTable&quot;</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">TableViewRow</code><code class=\"plain\"> </code><code class=\"color1\">title</code><code class=\"plain\">=</code><code class=\"string\">&quot;{title}&quot;</code><code class=\"plain\"> </code><code class=\"color1\">author</code><code class=\"plain\">=</code><code class=\"string\">&quot;{author}&quot;</code><code class=\"plain\"> </code><code class=\"color1\">onClick</code><code class=\"plain\">=</code><code class=\"string\">&quot;showBook&quot;</code><code class=\"plain\">&gt;&lt;/</code><code class=\"keyword\">TableViewRow</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/</code><code class=\"keyword\">TableView</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/</code><code class=\"keyword\">Window</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/</code><code class=\"keyword\">NavigationWindow</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\">&lt;/</code><code class=\"keyword\">Alloy</code><code class=\"plain\">&gt;</code></div> </div> </div> </li><li> <p>Save your changes. </p> </li></ol> <p>The <tt class=\"\">NavigationWindow</tt> control has a different API than <tt class=\"\">Window</tt>, so our code now needs to account for those differences. We could create a platform specific controller folder for iOS (<tt class=\"\">controllers/ios/index</tt>.js), but the code differences are small enough that we&#x2019;ll use <a class=\"document-link\" href=\"#!/guide/Alloy_Controllers-section-src-34636384_AlloyControllers-Conditionalcode\">platform-conditional code</a> to include the proper code for each platform. </p> <p><strong>To update the controller code for platform differences:</strong> </p> <ol class=\"\"><li class=\"\"> <p>Open <strong>controllers/index.js</strong>. </p> </li><li class=\"\"> <p>Modify the <tt class=\"\">showBook()</tt> method to account for the platform differences when opening the details view. On iOS, you now need to open the book details view using the <tt class=\"\">NavigationWindow</tt> object&apos;s <tt>openWindow()</tt> method: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"keyword\">function</code><code class=\"plain\"> showBook(event) {</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">var</code><code class=\"plain\"> selectedBook = event.source;</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">var</code><code class=\"plain\"> args = {</code></div> <div class=\"line\"><code class=\"plain\"> title: selectedBook.title,</code></div> <div class=\"line\"><code class=\"plain\"> author: selectedBook.author</code></div> <div class=\"line\"><code class=\"plain\"> };</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">var</code><code class=\"plain\"> bookview = Alloy.createController(</code><code class=\"string\">&quot;bookdetails&quot;</code><code class=\"plain\">, args).getView();</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (OS_IOS) {</code></div> <div class=\"line\"><code class=\"plain\"> $.index.openWindow(bookview);</code></div> <div class=\"line\"><code class=\"plain\"> }</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (OS_ANDROID) {</code></div> <div class=\"line\"><code class=\"plain\"> bookview.open();</code></div> <div class=\"line\"><code class=\"plain\"> } </code></div> <div class=\"line\"><code class=\"plain\">} </code></div> </div> </div> <p>As you can see, in the iOS case the handler now opens the window inside the NavigationGroup; the Android code branch uses the same code to open the window (<tt>addview.open()</tt>). </p> </li><li> <p>Save your changes and test again on an iPhone device or simulator. </p> </li></ol> <p>The first screen should now display the <tt class=\"\">TableView</tt> within the <tt>NavigationWindow</tt>. </p> <p> <img src=\"images/download/attachments/37541502/navigationWindow-ios.png\" alt=\"images/download/attachments/37541502/navigationWindow-ios.png\" class=\"confluence-embedded-image\" width=\"500\"> </img></p> </div> <div class=\"section section-2\" id=\"src-37541502_CreatingYourFirstTitaniumApp-Allowusertoaddbooks\"> <h2 class=\"heading\"><span>Allow user to add books</span></h2> <p>Of course, we need a way for users to add their own books. Like we did for the book details view, we will create a new Alloy controller composed of three files: the XML view, the JavaScript controller, and the TSS styles file. </p> <p>The UI will contain two input text fields where the user enters the book title and author, and a &quot;Add&quot; button to update the books collection with the new data. To take advantage of native UI components familiar to iOS and Android users, we&apos;ll use a <a class=\"external-link external-link\" href=\"#!/api/Titanium.UI.Toolbar\">Toolbar</a> component on iOS and a <a class=\"external-link external-link\" href=\"#!/api/Titanium.Android.Menu\">Menu</a> component on Android to contain the &quot;Add&quot; button. </p> <p><strong>To create the add book feature</strong>: </p> <ol class=\"\"><li class=\"\"> <p>In the Project Explorer, right-click on the project folder and select <strong class=\"\">New</strong> &gt;<strong> Alloy Controller</strong>. </p> </li><li class=\"\"> <p>In the New Controller dialog, give the controller the name <strong class=\"\">addbook. </strong>Click <strong>OK</strong>. </p> </li><li class=\"\"> <p>Open <strong>views/addbook.xml</strong> and add the following markup: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">&lt;</code><code class=\"keyword\">Alloy</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">Window</code><code class=\"plain\"> </code><code class=\"color1\">class</code><code class=\"plain\">=</code><code class=\"string\">&quot;container&quot;</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">View</code><code class=\"plain\"> </code><code class=\"color1\">layout</code><code class=\"plain\">=</code><code class=\"string\">&quot;vertical&quot;</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">TextField</code><code class=\"plain\"> </code><code class=\"color1\">id</code><code class=\"plain\">=</code><code class=\"string\">&quot;titleInput&quot;</code><code class=\"plain\"> </code><code class=\"color1\">hintText</code><code class=\"plain\">=</code><code class=\"string\">&quot;Title...&quot;</code><code class=\"plain\">&gt;&lt;/</code><code class=\"keyword\">TextField</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">TextField</code><code class=\"plain\"> </code><code class=\"color1\">id</code><code class=\"plain\">=</code><code class=\"string\">&quot;authorInput&quot;</code><code class=\"plain\"> </code><code class=\"color1\">hintText</code><code class=\"plain\">=</code><code class=\"string\">&quot;Author...&quot;</code><code class=\"plain\">&gt;&lt;/</code><code class=\"keyword\">TextField</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">Button</code><code class=\"plain\"> </code><code class=\"color1\">id</code><code class=\"plain\">=</code><code class=\"string\">&quot;insertBookButton&quot;</code><code class=\"plain\"> </code><code class=\"color1\">onClick</code><code class=\"plain\">=</code><code class=\"string\">&quot;addBook&quot;</code><code class=\"plain\">&gt;Add&lt;/</code><code class=\"keyword\">Button</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/</code><code class=\"keyword\">View</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/</code><code class=\"keyword\">Window</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\">&lt;/</code><code class=\"keyword\">Alloy</code><code class=\"plain\">&gt;</code></div> </div> </div> <p>This creates input text fields where the user will enter the book title and author, and a button to add the new book to the collection. The button&#x2019;s <tt class=\"\">onClick</tt> handler will call the <tt>insertBook()</tt> function, which you&#x2019;ll create next. </p> </li><li class=\"\"> <p>Open <strong>styles/addbook.tss</strong> and add the following styling: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"string\">&quot;.container[platform=ios]&quot;</code><code class=\"plain\"> : {</code></div> <div class=\"line\"><code class=\"plain\"> backgroundColor: </code><code class=\"string\">&apos;white&apos;</code></div> <div class=\"line\"><code class=\"plain\">}</code></div> <div class=\"line\"><code class=\"string\">&quot;TextField&quot;</code><code class=\"plain\"> : {</code></div> <div class=\"line\"><code class=\"plain\">\tborderStyle: Ti.UI.INPUT_BORDERSTYLE_ROUNDED,</code></div> <div class=\"line\"><code class=\"plain\">\t</code><code class=\"keyword\">top</code><code class=\"plain\">: </code><code class=\"value\">10</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\">\t</code><code class=\"keyword\">left</code><code class=\"plain\">: </code><code class=\"value\">20</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\">\t</code><code class=\"keyword\">right</code><code class=\"plain\">: </code><code class=\"value\">20</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\">\t</code><code class=\"keyword\">height</code><code class=\"plain\">: </code><code class=\"value\">40</code></div> <div class=\"line\"><code class=\"plain\">}</code></div> </div> </div> </li><li class=\"\"> <p>Open <strong>controllers/addbook.js</strong>, remove the existing code in that file and add the following: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> myBooks = Alloy.Collections.books;</code></div> </div> </div> </li><li class=\"\"> <p>Define a new function named <tt>addBook()</tt> with the following code: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"keyword\">function</code><code class=\"plain\"> addBook() {</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">var</code><code class=\"plain\"> book = Alloy.createModel(</code><code class=\"string\">&apos;books&apos;</code><code class=\"plain\">, {</code></div> <div class=\"line\"><code class=\"plain\"> title : $.titleInput.value,</code></div> <div class=\"line\"><code class=\"plain\"> author : $.authorInput.value</code></div> <div class=\"line\"><code class=\"plain\"> });</code></div> <div class=\"line\"><code class=\"plain\"> myBooks.add(book);</code></div> <div class=\"line\"><code class=\"plain\"> book.save();</code></div> <div class=\"line\"><code class=\"plain\"> </code></div> <div class=\"line\"><code class=\"plain\"> $.addbook.close(); </code><code class=\"comments\">// Close the window</code></div> <div class=\"line\"><code class=\"plain\">}</code></div> </div> </div> </li><li class=\"\"> <p>For iOS, open <strong class=\"\">views/ios/index.xml</strong> and insert a <strong class=\"\"> <tt class=\"\">&lt;Toolbar&gt;</tt> </strong>inside the <tt class=\"\">&lt;Window&gt;</tt> element below the <tt>&lt;TableView&gt;</tt> element: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">&lt;</code><code class=\"keyword\">Toolbar</code><code class=\"plain\"> </code><code class=\"color1\">bottom</code><code class=\"plain\">=</code><code class=\"string\">&quot;0&quot;</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">Items</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">Button</code><code class=\"plain\"> </code><code class=\"color1\">id</code><code class=\"plain\">=</code><code class=\"string\">&quot;add&quot;</code><code class=\"plain\"> </code><code class=\"color1\">title</code><code class=\"plain\">=</code><code class=\"string\">&quot;Add book&quot;</code><code class=\"plain\"> </code><code class=\"color1\">onClick</code><code class=\"plain\">=</code><code class=\"string\">&quot;addBook&quot;</code><code class=\"plain\">/&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;/</code><code class=\"keyword\">Items</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\">&lt;/</code><code class=\"keyword\">Toolbar</code><code class=\"plain\">&gt;</code></div> </div> </div> </li><li class=\"\"> <p>For Android, open <strong class=\"\">views/index.xml</strong> and add the following <strong class=\"\"> <tt class=\"\">&lt;Menu&gt;</tt> </strong>and <strong class=\"\"> <tt class=\"\">&lt;MenuItem&gt;</tt> </strong>elements below the <tt class=\"\">&lt;TableView&gt;</tt> element. Note: we cannot add specific node text to the menu item. Instead, we&apos;ll use attributes of <strong class=\"\"> <tt>&lt;MenuItem&gt;</tt> </strong>element to accomplish this: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">&lt;</code><code class=\"keyword\">Menu</code><code class=\"plain\"> </code><code class=\"color1\">id</code><code class=\"plain\">=</code><code class=\"string\">&quot;menu&quot;</code><code class=\"plain\"> </code><code class=\"color1\">platform</code><code class=\"plain\">=</code><code class=\"string\">&quot;android&quot;</code><code class=\"plain\">&gt;</code></div> <div class=\"line\"><code class=\"plain\"> &lt;</code><code class=\"keyword\">MenuItem</code><code class=\"plain\"> </code><code class=\"color1\">id</code><code class=\"plain\">=</code><code class=\"string\">&quot;addBook&quot;</code><code class=\"plain\"> </code><code class=\"color1\">title</code><code class=\"plain\">=</code><code class=\"string\">&quot;Add book&quot;</code><code class=\"plain\"> </code><code class=\"color1\">onClick</code><code class=\"plain\">=</code><code class=\"string\">&quot;addBook&quot;</code><code class=\"plain\"> </code><code class=\"color1\">showAsAction</code><code class=\"plain\">=</code><code class=\"string\">&quot;Ti.Android.SHOW_AS_ACTION_IF_ROOM&quot;</code><code class=\"plain\"> /&gt;</code></div> <div class=\"line\"><code class=\"plain\">&lt;/</code><code class=\"keyword\">Menu</code><code class=\"plain\">&gt;</code></div> </div> </div> </li><li class=\"\"> <p>Open <strong class=\"\">controllers/index.js</strong> and add the following code to open the addbook controller when the appropriate native control is used. For Android, depending on the device, the <strong>Add </strong>button can either be accessed from the Action Bar at the top of the display or by using the Menu button. For iOS, use the toolbar at the bottom of the screen. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"keyword\">function</code><code class=\"plain\"> addBook(){</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">var</code><code class=\"plain\"> myAddBook = Alloy.createController(</code><code class=\"string\">&quot;addbook&quot;</code><code class=\"plain\">,{}).getView();</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (OS_IOS) {</code></div> <div class=\"line\"><code class=\"plain\"> $.index.openWindow(myAddBook);</code></div> <div class=\"line\"><code class=\"plain\"> }</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (OS_ANDROID) {</code></div> <div class=\"line\"><code class=\"plain\"> myAddBook.open();</code></div> <div class=\"line\"><code class=\"plain\"> }</code></div> <div class=\"line\"><code class=\"plain\">}</code></div> </div> </div> </li><li> <p>Save your changes and test on a device or emulator. </p> </li></ol> <p>You should now be able to click &apos;Add&apos; and add new books to the collection which persist between sessions. </p> </div> <div class=\"section section-2\" id=\"src-37541502_CreatingYourFirstTitaniumApp-Nextsteps\"> <h2 class=\"heading\"><span>Next steps</span></h2> <p>Review the guides in <a class=\"document-link\" href=\"#!/guide/Alloy_Framework\">Alloy Framework</a> to learn more about using Alloy to build your application; specifically, see the <a class=\"document-link\" href=\"#!/guide/Alloy_Views\">Alloy Views</a> section to learn about creating the UI for your application. Also, review the <a class=\"document-link\" href=\"#!/guide/Titanium_SDK\">Titanium SDK</a> guides to learn more about specific categories of APIs, such as UI, media, geolocation, and so on. </p> </div> </div><a id=\"editButton\" href=\"https://wiki.appcelerator.org/pages/editpage.action?pageId=37541502\"><span>Edit</span></a> </div> </body> </html> ","title":"Creating Your First Titanium App"});