Ext.data.JsonP['TableViews']({"guide":" <!doctype html> <html> <head> <title>TableViews</title> <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"> </meta></head> <body> <div class=\"container\"> <div class=\"header\"/> <div id=\"src-29004930\" class=\"content\"> <h1>TableViews</h1> <p> </p> <ul class=\"toc-indentation\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_TableViews-Objective\">Objective</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_TableViews-Contents\">Contents</a> </p> <ul class=\"toc-indentation\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_TableViews-Assigningdatatoyourtable\">Assigning data to your table</a> </p> <ul class=\"toc-indentation\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_TableViews-Emptyingatable\">Emptying a table</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_safe-id-VGFibGVWaWV3cy1TZXR0aW5nZGF0YXZzLnNldERhdGEoKXZzLmFwcGVuZFJvdygp\">Setting data vs. setData() vs. appendRow()</a> </p> </li></ul></li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_TableViews-Rowproperties\">Row properties</a> </p> <ul class=\"toc-indentation\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_TableViews-Rowindicators\">Row indicators</a> </p> </li></ul></li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_TableViews-Customrows\">Custom rows</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_TableViews-Groupedrows\">Grouped rows</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_TableViews-Headersandfooters\">Headers and footers</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_TableViews-Tablesections\">Table sections</a> </p> <ul class=\"toc-indentation\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_TableViews-Addingorremovingsectionsfromatable\">Adding or removing sections from a table</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_TableViews-IteratingovertherowsinatableusingSection\">Iterating over the rows in a table using Section</a> </p> </li></ul></li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_TableViews-Searchingwithinatable\">Searching within a table</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_TableViews-Eventsandeventobjectproperties\">Events and event object properties</a> </p> <ul class=\"toc-indentation\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_TableViews-Scrollevents\">Scroll events</a> </p> </li></ul></li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_TableViews-Pulltorefresh\">Pull to refresh</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_TableViews-Hands-onpractice\">Hands-on practice</a> </p> <ul class=\"toc-indentation\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_TableViews-Goal\">Goal</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_TableViews-Resources\">Resources</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_TableViews-Steps\">Steps</a> </p> </li></ul></li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_TableViews-Referencesandfurtherreading\">References and further reading</a> </p> </li></ul></li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/TableViews-section-src-29004930_TableViews-Summary\">Summary</a> </p> </li></ul> <div class=\"section section-2\" id=\"src-29004930_TableViews-Objective\"> <h2 class=\"heading\"><span>Objective</span></h2> <p>In this chapter, we&#x2019;ll examine TableView basics then dig a bit deeper into what you can do with tables. We&#x2019;ll look at headers, footers, and sections. Finally, we&apos;ll wrap up with a look at handling events associated with tables and rows. </p> </div> <div class=\"section section-2\" id=\"src-29004930_TableViews-Contents\"> <h2 class=\"heading\"><span>Contents</span></h2> <p>Let&apos;s start by creating a table. You do so with the <tt>Ti.UI.createTableView()</tt> method, like this: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">var table = </code><code class=\"keyword\">new</code><code class=\"plain\"> Titanium.UI.createTableView({</code></div> <div class=\"line\"><code class=\"plain\">\t</code><code class=\"comments\">/* properties */</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> </div> </div> <p>Some key table properties include: </p> <ul class=\"\"><li class=\"\"> <p><tt class=\"\">height</tt> and <tt>width</tt> &#x2013; controls the dimensions of the table; it doesn&apos;t have to fill its parent container </p> </li><li class=\"\"> <p><tt class=\"\">top</tt> and <tt>left</tt> &#x2013; controls placement of the table, useful if you want to add buttons or labels above or below it </p> </li><li class=\"\"> <p><tt class=\"\">backgroundColor</tt> and <tt class=\"\">backgroundImage</tt> &#x2013; controls the background of the table; <tt class=\"\">transparent</tt> is a valid <tt>backgroundColor</tt> </p> </li><li class=\"\"> <p><tt class=\"\">rowHeight</tt> / <tt class=\"\">minRowHeight</tt> / <tt>maxRowHeight</tt> &#x2013; controls table-wide dimensions of rows </p> </li><li class=\"\"> <p><tt class=\"\">headerTitle</tt> / <tt>headerView</tt> &#x2013; controls the table&apos;s header </p> </li><li class=\"\"> <p><tt class=\"\">footerTitle</tt> / <tt>footerView</tt> &#x2013; controls the table&apos;s footer </p> </li><li class=\"\"> <p><tt>scrollable</tt> (boolean) &#x2013; controls whether the table is scrollable (vertically) </p> </li></ul> <div class=\"section section-3\" id=\"src-29004930_TableViews-Assigningdatatoyourtable\"> <h3 class=\"heading\"><span>Assigning data to your table</span></h3> <p>Next we&apos;ll move on to adding rows, which are the core of any table component. Let&apos;s take a look at the options that Titanium makes available to you for creating and adding rows. </p> <p>Table rows are represented by the <tt class=\"\">Ti.UI.TableViewRow</tt> object. This object contains various properties and methods that you can use to style and manage your table rows. You can create TableViewRow objects explicitly using the <tt>Ti.UI.createTableViewRow()</tt> function. Conversely, you can use simple Javascript object literals to represent your rows. For quick and dirty row creation, the object literal technique is likely faster and easier. When you want to carefully style and control the behavior of rows, though, you&apos;ll probably want to create explicit row objects. </p> <p> <img src=\"images/download/attachments/29004930/table.png\" alt=\"images/download/attachments/29004930/table.png\" class=\"confluence-embedded-image confluence-content-image-border image-right\" height=\"250\"> </img></p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"title\">Object literals as rows</div> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\" data-title=\"Object literals as rows\"> <div class=\"line\"><code class=\"comments\">// create an array of anonymous objects</code></div> <div class=\"line\"><code class=\"plain\">var tbl_data = [</code></div> <div class=\"line\"><code class=\"plain\">\t{title:</code><code class=\"string\">&apos;Row 1&apos;</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\">\t{title:</code><code class=\"string\">&apos;Row 2&apos;</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\">\t{title:</code><code class=\"string\">&apos;Row 3&apos;</code><code class=\"plain\">}</code></div> <div class=\"line\"><code class=\"plain\">];</code></div> <div class=\"line\"><code class=\"comments\">// now assign that array to the table&apos;s data property to add those objects as rows</code></div> <div class=\"line\"><code class=\"plain\">var table = Titanium.UI.createTableView({</code></div> <div class=\"line\"><code class=\"plain\">\tdata:tbl_data</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"comments\">// alternatively, you could do</code></div> <div class=\"line\"><code class=\"plain\">table.setData(tbl_data);</code></div> <div class=\"line\"><code class=\"plain\">var win = Ti.UI.createWindow();</code></div> <div class=\"line\"><code class=\"plain\">win.add(table);</code></div> <div class=\"line\"><code class=\"plain\">win.open();</code></div> </div> </div> <p> </p> <p>Creating object literals in this way is very handy when pulling data out of a database or across the network. By explicitly creating TableViewRow objects, you gain access to a few handy methods such as <tt class=\"\">add()</tt> or <tt>fireEvent()</tt>. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"title\">Explicit TableViewRow objects</div> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\" data-title=\"Explicit TableViewRow objects\"> <div class=\"line\"><code class=\"plain\">var row = Titanium.UI.createTableViewRow({</code></div> <div class=\"line\"><code class=\"plain\"> title: </code><code class=\"string\">&apos;Row 1&apos;</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">/* other properties */</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"plain\">table.appendRow(row);</code></div> <div class=\"line\"><code class=\"comments\">// with an explicit object, you can call methods such as</code></div> <div class=\"line\"><code class=\"comments\">// var imgCapture = row.toImage();</code></div> </div> </div> <div class=\"section section-4\" id=\"src-29004930_TableViews-Emptyingatable\"> <h4 class=\"heading\"><span>Emptying a table</span></h4> <p>You can empty a table by setting its <tt>data</tt> property to an empty array. </p> <div class=\"confbox admonition admonition-note aui-message warning shadowed information-macro\"> <p>Do not set a TableView&apos;s <tt class=\"\">data</tt> property to <tt class=\"\">null</tt> or <tt>undefined</tt> as it will result un unexpected behavior. </p> </div> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">table.setData([]);</code></div> <div class=\"line\"><code class=\"comments\">// or</code></div> <div class=\"line\"><code class=\"plain\">table.data = [];</code></div> </div> </div> </div> <div class=\"section section-4\" id=\"src-29004930_safe-id-VGFibGVWaWV3cy1TZXR0aW5nZGF0YXZzLnNldERhdGEoKXZzLmFwcGVuZFJvdygp\"> <h4 class=\"heading\"><span>Setting data vs. setData() vs. appendRow()</span></h4> <p>For best performance, create an array of row objects (object literals or explicitly typed) and then assign them to the table using either <tt class=\"\">setData()</tt> or by setting the <tt class=\"\">data</tt> property. In community tests, <tt class=\"\">appendRow()</tt> performs significantly slower than <tt>setData()</tt> when adding thousands of rows to a test table. Though this is an uncommon scenario, it is still best to manage your tables, and all UI components, in the most performant manner possible. </p> <p>If your app does however currently require a table with thousands of rows, you should may want to reconsider your UI. Users won&apos;t want to scroll through that many rows to find the one that interests them. Even on the fastest device, such a table will be slow. Consider some sort of drill-down interface, filtering mechanism, or alternate UI/UX paradigm to reduce the size of the available table. </p> </div> </div> <div class=\"section section-3\" id=\"src-29004930_TableViews-Rowproperties\"> <h3 class=\"heading\"><span>Row properties</span></h3> <p>Now that we&apos;ve seen how to create tables and rows, let&apos;s learn a bit more about the built-in row properties. TableViewRow objects have various useful properties that you can use to add style and functionality to your tables. </p> <ul class=\"\"><li class=\"\"> <p><tt>className</tt> &#x2013; set this property equal to an arbitrary string to optimize rendering performance. On both iOS and Android, setting this property enables the operating system to reuse table rows that are scrolled out of view to speed up the rendering of newly-visible rows. On iOS, the string you supply is used to specify the reuse-identifier string (<a class=\"external-link external-link\" href=\"http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/dequeueReusableCellWithIdentifier:\" target=\"_blank\">setdequeueReusableCellWithIdentifier</a>); on Android, it is used within a custom object reuse method within Titanium. </p> </li><li class=\"\"> <p><tt>leftImage</tt> &#x2013; set this property equal to an image URL (local or remote) to display that image to the left of the row&apos;s title </p> </li><li class=\"\"> <p><tt>rightImage</tt> &#x2013; set this property equal to an image URL (local or remote) to display that image to the right of the row&apos;s title </p> </li><li class=\"\"> <p><tt>backgroundImage</tt> &#x2013; set this property equal to an image URL (local or remote) to display that image in the background of the row </p> </li><li class=\"\"> <p><tt>backgroundColor</tt> &#x2013; set this property to a color string to set the row&apos;s background color </p> </li></ul> <p> <img src=\"images/download/attachments/29004930/table2.png\" alt=\"images/download/attachments/29004930/table2.png\" class=\"confluence-embedded-image confluence-content-image-border image-right\" height=\"300\"> </img></p> <p>So let&apos;s augment the properties of the prior TableView example rows. In the following code we&apos;ll utilize the above properties on a per row basis, making for a highly styled set of table rows. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">var tbl_data = [</code></div> <div class=\"line\"><code class=\"plain\"> {title:</code><code class=\"string\">&apos;Row 1&apos;</code><code class=\"plain\">, leftImage: </code><code class=\"string\">&apos;KS_nav_ui.png&apos;</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\"> {title:</code><code class=\"string\">&apos;Row 2&apos;</code><code class=\"plain\">, rightImage: </code><code class=\"string\">&apos;KS_nav_ui.png&apos;</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\"> {title:</code><code class=\"string\">&apos;Row 3&apos;</code><code class=\"plain\">, backgroundColor: </code><code class=\"string\">&apos;#fdd&apos;</code><code class=\"plain\">}</code></div> <div class=\"line\"><code class=\"plain\">];</code></div> <div class=\"line\"><code class=\"comments\">// now assign that array to the table&apos;s data property to add those objects as rows</code></div> <div class=\"line\"><code class=\"plain\">var table = Titanium.UI.createTableView({</code></div> <div class=\"line\"><code class=\"plain\"> data:tbl_data</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"comments\">// alternatively, you could do</code></div> <div class=\"line\"><code class=\"plain\">table.setData(tbl_data);</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">var win = Ti.UI.createWindow();</code></div> <div class=\"line\"><code class=\"plain\">win.add(table);</code></div> <div class=\"line\"><code class=\"plain\">win.open();</code></div> </div> </div> <p> </p> <div class=\"section section-4\" id=\"src-29004930_TableViews-Rowindicators\"> <h4 class=\"heading\"><span>Row indicators</span></h4> <p>Row indicators are icons that provide visual cues to your users related to your table rows. As shown in the following graphic, Android supports two built-in icons while iOS supports three. Each is a boolean value set with the property listed following the graphic. </p> <p> <img src=\"images/download/attachments/29004930/row_indicators.png\" alt=\"images/download/attachments/29004930/row_indicators.png\" class=\"confluence-embedded-image\"> </img></p> <ul class=\"\"><li class=\"\"> <p><tt>hasChild</tt> &#x2013; indicates sub-table or additional rows (most commonly used on iOS with the navigation controller) </p> </li><li class=\"\"> <p><tt>hasDetail</tt> &#x2013; indicates a detail view or alert will appear when row is tapped (not supported on Android) </p> </li><li class=\"\"> <p><tt>hasCheck</tt> &#x2013; an on/off or yes/no indicator </p> </li></ul> </div> </div> <div class=\"section section-3\" id=\"src-29004930_TableViews-Customrows\"> <h3 class=\"heading\"><span>Custom rows</span></h3> <p>If the stock properties don&apos;t suit your needs, you can add Views, ImageViews, Labels, Buttons, and so forth as children of your rows. This gives you enormous flexibility when laying out the content of your table. </p> <p>Let&apos;s once again visit the example TableView code. This time we&apos;ll modify it to use explicit TableViewRows. To these TableViewRows we will add a label, button, and image in a custom format. </p> <p> <img src=\"images/download/attachments/29004930/table3.png\" alt=\"images/download/attachments/29004930/table3.png\" class=\"confluence-embedded-image confluence-content-image-border image-right\" height=\"380\"> </img></p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"comments\">// Create an array of explicitly defined custom TableViewRows</code></div> <div class=\"line\"><code class=\"plain\">var tbl_data = [];</code></div> <div class=\"line\"><code class=\"keyword\">for</code><code class=\"plain\"> (var i = </code><code class=\"value\">0</code><code class=\"plain\">; i &lt; </code><code class=\"value\">10</code><code class=\"plain\">; i++) {</code></div> <div class=\"line\"><code class=\"plain\">\tvar row = Ti.UI.createTableViewRow();</code></div> <div class=\"line\"><code class=\"plain\">\tvar label = Ti.UI.createLabel({</code></div> <div class=\"line\"><code class=\"plain\"> left: </code><code class=\"value\">10</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> text: </code><code class=\"string\">&apos;Row &apos;</code><code class=\"plain\"> + (i+</code><code class=\"value\">1</code><code class=\"plain\">)</code></div> <div class=\"line\"><code class=\"plain\">\t});</code></div> <div class=\"line\"><code class=\"plain\">\tvar image = Ti.UI.createImageView({</code></div> <div class=\"line\"><code class=\"plain\"> image: </code><code class=\"string\">&apos;KS_nav_ui.png&apos;</code></div> <div class=\"line\"><code class=\"plain\">\t});</code></div> <div class=\"line\"><code class=\"plain\">\tvar button = Ti.UI.createButton({</code></div> <div class=\"line\"><code class=\"plain\"> right: </code><code class=\"value\">10</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> height: </code><code class=\"value\">30</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> width: </code><code class=\"value\">80</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> title: </code><code class=\"string\">&apos;press me&apos;</code></div> <div class=\"line\"><code class=\"plain\">\t});</code></div> <div class=\"line\"><code class=\"plain\">\trow.add(label);</code></div> <div class=\"line\"><code class=\"plain\">\trow.add(image);</code></div> <div class=\"line\"><code class=\"plain\">\trow.add(button);</code></div> <div class=\"line\"><code class=\"plain\">\ttbl_data.push(row);</code></div> <div class=\"line\"><code class=\"plain\">}</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"comments\">// now assign that array to the table&apos;s data property to add those objects as rows</code></div> <div class=\"line\"><code class=\"plain\">var table = Titanium.UI.createTableView({</code></div> <div class=\"line\"><code class=\"plain\"> data:tbl_data</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">var win = Ti.UI.createWindow();</code></div> <div class=\"line\"><code class=\"plain\">win.add(table);</code></div> <div class=\"line\"><code class=\"plain\">win.open();</code></div> </div> </div> <p>This is just one very simple example of how you can create custom rows for your tables. You can literally embed almost any Titanium UI component in any visual configuration to create your rows. </p> <div class=\"confbox admonition admonition-note aui-message warning shadowed information-macro\"> <p>It is tempting to make heavy use of Titanium&apos;s flexibility with custom rows. You need to be aware, however, of the performance implications of making your rows overly complex. Each unique UI element you add to a row has resources requirements, and those requirements are magnified by the number of rows in your tables. Be sure to test both on simulator/emulator and device as you develop to ensure you are getting the app performance you expect, and scale back row complexity if necessary. </p> </div> </div> <div class=\"section section-3\" id=\"src-29004930_TableViews-Groupedrows\"> <h3 class=\"heading\"><span>Grouped rows</span></h3> <p> <img src=\"images/download/attachments/29004930/table_grouped_rows.png\" alt=\"images/download/attachments/29004930/table_grouped_rows.png\" class=\"confluence-embedded-image image-right\" height=\"270\"> </img></p> <p>On iOS, you can set the <tt>style</tt> property of the table to display table sections as separate components, as shown in the following graphic. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">var inputData = [</code></div> <div class=\"line\"><code class=\"plain\">\t{title:</code><code class=\"string\">&apos;row 1&apos;</code><code class=\"plain\">, header:</code><code class=\"string\">&apos;Header 1&apos;</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\">\t{title:</code><code class=\"string\">&apos;row 2&apos;</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\">\t{title:</code><code class=\"string\">&apos;row 3&apos;</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\">\t{title:</code><code class=\"string\">&apos;row 4&apos;</code><code class=\"plain\">, header:</code><code class=\"string\">&apos;Header 2&apos;</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\">\t{title:</code><code class=\"string\">&apos;row 5&apos;</code><code class=\"plain\">}</code></div> <div class=\"line\"><code class=\"plain\">];</code></div> <div class=\"line\"><code class=\"plain\">var table = Titanium.UI.createTableView({</code></div> <div class=\"line\"><code class=\"plain\">\tdata:inputData,</code></div> <div class=\"line\"><code class=\"plain\">\tstyle:Titanium.UI.iPhone.TableViewStyle.GROUPED</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">var win = Ti.UI.createWindow();</code></div> <div class=\"line\"><code class=\"plain\">win.add(table);</code></div> <div class=\"line\"><code class=\"plain\">win.open();</code></div> </div> </div> </div> <div class=\"section section-3\" id=\"src-29004930_TableViews-Headersandfooters\"> <h3 class=\"heading\"><span>Headers and footers</span></h3> <p> <img src=\"images/download/attachments/29004930/table5.png\" alt=\"images/download/attachments/29004930/table5.png\" class=\"confluence-embedded-image confluence-content-image-border image-right\" height=\"270\"> </img></p> <p>You can use the built-in <tt class=\"\">headerTitle</tt> and <tt>footerTitle</tt> to add header and footer titles to your tables. This convenience property allows you to enter arbitrary text for these titles, but will only use the default font formatting. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">var data = [</code></div> <div class=\"line\"><code class=\"plain\">\t{ title: </code><code class=\"string\">&apos;Row 1&apos;</code><code class=\"plain\"> },</code></div> <div class=\"line\"><code class=\"plain\">\t{ title: </code><code class=\"string\">&apos;Row 2&apos;</code><code class=\"plain\"> },</code></div> <div class=\"line\"><code class=\"plain\">\t{ title: </code><code class=\"string\">&apos;Row 3&apos;</code><code class=\"plain\"> }</code></div> <div class=\"line\"><code class=\"plain\">];</code></div> <div class=\"line\"><code class=\"plain\">var table = Titanium.UI.createTableView ({</code></div> <div class=\"line\"><code class=\"plain\"> data:data,</code></div> <div class=\"line\"><code class=\"plain\"> headerTitle:</code><code class=\"string\">&apos;TableView examples and test cases&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> footerTitle:</code><code class=\"string\">&quot;Wow. That was cool!&quot;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">var win = Ti.UI.createWindow();</code></div> <div class=\"line\"><code class=\"plain\">win.add(table);</code></div> <div class=\"line\"><code class=\"plain\">win.open();</code></div> </div> </div> <p> </p> <p>A more flexible technique is to use Views for your headers and footers. You can create a view and set it in the table&apos;s <tt class=\"\">headerView</tt> or <tt>footerView</tt> properties. Here&apos;s an example of setting both the header and footer using these properties. </p> <p> <img src=\"images/download/attachments/29004930/table4.png\" alt=\"images/download/attachments/29004930/table4.png\" class=\"confluence-embedded-image confluence-content-image-border image-right\" height=\"380\"> </img></p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">var tbl_data = [</code></div> <div class=\"line\"><code class=\"plain\">\t{ title: </code><code class=\"string\">&apos;Row 1&apos;</code><code class=\"plain\"> },</code></div> <div class=\"line\"><code class=\"plain\">\t{ title: </code><code class=\"string\">&apos;Row 2&apos;</code><code class=\"plain\"> },</code></div> <div class=\"line\"><code class=\"plain\">\t{ title: </code><code class=\"string\">&apos;Row 3&apos;</code><code class=\"plain\"> }</code></div> <div class=\"line\"><code class=\"plain\">];</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">var createCustomView = function(title) {</code></div> <div class=\"line\"><code class=\"plain\">\tvar view = Ti.UI.createView({</code></div> <div class=\"line\"><code class=\"plain\"> backgroundColor: </code><code class=\"string\">&apos;#222&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> height: </code><code class=\"value\">40</code></div> <div class=\"line\"><code class=\"plain\">\t});</code></div> <div class=\"line\"><code class=\"plain\">\tvar text = Ti.UI.createLabel({</code></div> <div class=\"line\"><code class=\"plain\"> text: title,</code></div> <div class=\"line\"><code class=\"plain\"> left: </code><code class=\"value\">20</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> color: </code><code class=\"string\">&apos;#fff&apos;</code></div> <div class=\"line\"><code class=\"plain\">\t});</code></div> <div class=\"line\"><code class=\"plain\">\tview.add(text);</code></div> <div class=\"line\"><code class=\"plain\">\t</code><code class=\"keyword\">return</code><code class=\"plain\"> view;</code></div> <div class=\"line\"><code class=\"plain\">};</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"comments\">// now assign that array to the table&apos;s data property to add those objects as rows</code></div> <div class=\"line\"><code class=\"plain\">var table = Titanium.UI.createTableView({</code></div> <div class=\"line\"><code class=\"plain\"> data:tbl_data,</code></div> <div class=\"line\"><code class=\"plain\"> headerView: createCustomView(</code><code class=\"string\">&apos;Header View&apos;</code><code class=\"plain\">),</code></div> <div class=\"line\"><code class=\"plain\"> footerView: createCustomView(</code><code class=\"string\">&apos;Footer View&apos;</code><code class=\"plain\">)</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"comments\">// alternatively, you could do</code></div> <div class=\"line\"><code class=\"plain\">table.setData(tbl_data);</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">var win = Ti.UI.createWindow();</code></div> <div class=\"line\"><code class=\"plain\">win.add(table);</code></div> <div class=\"line\"><code class=\"plain\">win.open();</code></div> </div> </div> </div> <div class=\"section section-3\" id=\"src-29004930_TableViews-Tablesections\"> <h3 class=\"heading\"><span>Table sections</span></h3> <p>Table sections enable you to create groupings of related rows within your table. Table sections can have headers and footers. You create sections with the <tt class=\"\">Ti.UI.createTableViewSection()</tt> method. Then, you add rows to that section and set the table&apos;s <tt>sections</tt> property equal to an array of sections. Like this: </p> <p> <img src=\"images/download/attachments/29004930/table_section.png\" alt=\"images/download/attachments/29004930/table_section.png\" class=\"confluence-embedded-image confluence-content-image-border image-right\" height=\"370\"> </img></p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"comments\">// Create the first TableViewSection</code></div> <div class=\"line\"><code class=\"plain\">var section1 = Ti.UI.createTableViewSection({</code></div> <div class=\"line\"><code class=\"plain\">\theaderTitle:</code><code class=\"string\">&apos;Header 1&apos;</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"comments\">// use a loop to add some rows</code></div> <div class=\"line\"><code class=\"keyword\">for</code><code class=\"plain\"> (var i=</code><code class=\"value\">0</code><code class=\"plain\">; i &lt; </code><code class=\"value\">4</code><code class=\"plain\">; i++) {</code></div> <div class=\"line\"><code class=\"plain\">\tsection1.add(Ti.UI.createTableViewRow({</code></div> <div class=\"line\"><code class=\"plain\"> title:</code><code class=\"string\">&apos;Row &apos;</code><code class=\"plain\">+i</code></div> <div class=\"line\"><code class=\"plain\">\t}));</code></div> <div class=\"line\"><code class=\"plain\">}</code></div> <div class=\"line\"><code class=\"comments\">// do it all again...</code></div> <div class=\"line\"><code class=\"plain\">var section2 = Ti.UI.createTableViewSection({</code></div> <div class=\"line\"><code class=\"plain\">\theaderTitle: </code><code class=\"string\">&apos;Section 2&apos;</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"keyword\">for</code><code class=\"plain\"> (var i=</code><code class=\"value\">4</code><code class=\"plain\">; i &lt; </code><code class=\"value\">10</code><code class=\"plain\">; i++) {</code></div> <div class=\"line\"><code class=\"plain\">\tsection2.add(Ti.UI.createTableViewRow({</code></div> <div class=\"line\"><code class=\"plain\"> title:</code><code class=\"string\">&apos;Row &apos;</code><code class=\"plain\">+i</code></div> <div class=\"line\"><code class=\"plain\">\t}));</code></div> <div class=\"line\"><code class=\"plain\">}</code></div> <div class=\"line\"><code class=\"comments\">// Now, here&apos;s our table, and we&apos;re setting the data to hold the sections</code></div> <div class=\"line\"><code class=\"plain\">var table = Ti.UI.createTableView({</code></div> <div class=\"line\"><code class=\"plain\">\tdata:[section1,section2]</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">var win = Ti.UI.createWindow();</code></div> <div class=\"line\"><code class=\"plain\">win.add(table);</code></div> <div class=\"line\"><code class=\"plain\">win.open();</code></div> </div> </div> <p>Prior to Release 3.0, you need to use the TableView property <tt>data</tt> to set the sections. </p> <div class=\"section section-4\" id=\"src-29004930_TableViews-Addingorremovingsectionsfromatable\"> <h4 class=\"heading\"><span>Adding or removing sections from a table</span></h4> <p><strong>The information in this section only applies to Release 3.0 and later.</strong> </p> <p>After creating and rendering a TableView, you can add sections using the TableView methods: <tt class=\"\">appendSection</tt>, <tt class=\"\">insertSectionBefore</tt> and <tt class=\"\">insertSectionAfter</tt>. Using <tt class=\"\">insertSectionBefore</tt> or <tt class=\"\">insertSectionAfter</tt>, you can insert individual sections anywhere in the TableView, but using <tt>appendSection</tt>, you can only insert individual or multiple sections to the end of the TableView. For the iOS platform, you can optionally choose to render the addition with an animation. </p> <div class=\"confbox admonition admonition-warning aui-message problem shadowed information-macro\"> <p>There are several outstanding issues with the APIs described in this section. Until these issues are resolved, these APIs should be avoided. </p> <ul class=\"\"><li> <p><a class=\"external-link external-link\" href=\"https://jira.appcelerator.org/browse/TIMOB-12616\" target=\"_blank\">TIMOB-12616</a> - iOS: TableView Click Events dont get added under certain circumstances </p> </li><li> <p><a class=\"external-link external-link\" href=\"https://jira.appcelerator.org/browse/TIMOB-12620\" target=\"_blank\">TIMOB-12620</a> - Android: TableView.sections property not supported </p> </li><li> <p><a class=\"external-link external-link\" href=\"https://jira.appcelerator.org/browse/TIMOB-12625\" target=\"_blank\">TIMOB-12625</a> - iOS: TableView.updateSection argument order is wrong </p> </li><li> <p><a class=\"external-link external-link\" href=\"https://jira.appcelerator.org/browse/TIMOB-12630\" target=\"_blank\">TIMOB-12630</a> - MobileWeb: TableView click event not fired after updateSection </p> </li></ul> </div> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">var tv = Ti.UI.createTableView({</code></div> <div class=\"line\"><code class=\"plain\">\tsections:[section2,section4]</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"comments\">// Render table...</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"comments\">// Inserts a section at the beginning</code></div> <div class=\"line\"><code class=\"plain\">tv.insertSectionBefore(</code><code class=\"value\">0</code><code class=\"plain\">, section1);</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"comments\">// Inserts a section in between section2 and section4</code></div> <div class=\"line\"><code class=\"plain\">tv.insertSectionAfter(</code><code class=\"value\">1</code><code class=\"plain\">, section3);</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"comments\">// Inserts multiple sections at the end of the table</code></div> <div class=\"line\"><code class=\"plain\">tv.appendSection(section5to7);</code></div> </div> </div> <p>You can remove individual sections from a TableView using the TableView method, <tt>removeSection</tt>. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">var tv = Ti.UI.createTableView({</code></div> <div class=\"line\"><code class=\"plain\">\tsections:[section1,section2,section3]</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"comments\">// Render table...</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">tv.removeSection(section2);</code></div> </div> </div> <p>Prior to Release 3.0, you need to use the TableView property, <tt>data</tt>, to refresh the entire table. </p> </div> <div class=\"section section-4\" id=\"src-29004930_TableViews-IteratingovertherowsinatableusingSection\"> <h4 class=\"heading\"><span>Iterating over the rows in a table using Section</span></h4> <p>Titanium always creates at least one table section for you even if you don&apos;t explicitly create a TableViewSection. This is handy because sections have a <tt>rows</tt> property, which tables do not. This property stores an array of all the rows in that section. In other words, you can use sections to loop programmatically through the rows in a table. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">var table = Ti.UI.createTableView({});</code></div> <div class=\"line\"><code class=\"comments\">// we&apos;ll add rows, but not sections</code></div> <div class=\"line\"><code class=\"plain\">table.data = resultsOfSomeDatabaseOperation();</code></div> <div class=\"line\"><code class=\"comments\">// when the table is clicked, loop through the rows</code></div> <div class=\"line\"><code class=\"plain\">table.addEventListener(</code><code class=\"string\">&apos;click&apos;</code><code class=\"plain\">, function(e){</code></div> <div class=\"line\"><code class=\"plain\">\tvar sections = table.data; </code><code class=\"comments\">// grab the array of sections</code></div> <div class=\"line\"><code class=\"plain\">\tvar section = sections[</code><code class=\"value\">0</code><code class=\"plain\">]; </code><code class=\"comments\">// use just the first section</code></div> <div class=\"line\"><code class=\"plain\">\t</code><code class=\"keyword\">for</code><code class=\"plain\">(var x=</code><code class=\"value\">0</code><code class=\"plain\">,y=section.rowCount;x &lt; y;x++) {</code></div> <div class=\"line\"><code class=\"plain\"> var theRow = section.rows[x];</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"comments\">// do something with theRow</code></div> <div class=\"line\"><code class=\"plain\">\t}</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> </div> </div> </div> </div> <div class=\"section section-3\" id=\"src-29004930_TableViews-Searchingwithinatable\"> <h3 class=\"heading\"><span>Searching within a table</span></h3> <p>You can enable searching by adding a search bar to your tables. As users enter text, rows are filtered such that only those containing the text in their <tt class=\"\">title</tt> property remain visible. The search is not a leading character search. In other words, searching for the letter &quot;b&quot; would display all rows containing that letter anywhere within their <tt>title</tt>. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">function makeRow() {</code></div> <div class=\"line\"><code class=\"plain\">\t</code><code class=\"comments\">// generate random string of digits and capital English letters</code></div> <div class=\"line\"><code class=\"plain\">\t</code><code class=\"comments\">// see http://en.wikipedia.org/wiki/Base_36</code></div> <div class=\"line\"><code class=\"plain\">\t</code><code class=\"keyword\">return</code><code class=\"plain\"> Ti.UI.createTableViewRow({</code></div> <div class=\"line\"><code class=\"plain\"> title: Math.random().toString(</code><code class=\"value\">36</code><code class=\"plain\">).substring(</code><code class=\"value\">7</code><code class=\"plain\">)</code></div> <div class=\"line\"><code class=\"plain\">\t});</code></div> <div class=\"line\"><code class=\"plain\">}</code></div> <div class=\"line\"><code class=\"plain\">var searchbar = Ti.UI.createSearchBar({</code></div> <div class=\"line\"><code class=\"plain\">\tbarColor: </code><code class=\"string\">&apos;#385292&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\">\tshowCancel: </code><code class=\"keyword\">false</code><code class=\"plain\"> </code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"plain\">var tbl = Ti.UI.createTableView({</code></div> <div class=\"line\"><code class=\"plain\">\tsearch: searchbar,</code></div> <div class=\"line\"><code class=\"plain\">\thideSearchOnSelection: </code><code class=\"keyword\">true</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"plain\">var data = [];</code></div> <div class=\"line\"><code class=\"keyword\">for</code><code class=\"plain\">(var i=</code><code class=\"value\">0</code><code class=\"plain\">; i&lt;</code><code class=\"value\">100</code><code class=\"plain\">; i++) {</code></div> <div class=\"line\"><code class=\"plain\">\tdata.push(makeRow());</code></div> <div class=\"line\"><code class=\"plain\">}</code></div> <div class=\"line\"><code class=\"plain\">tbl.data = data;</code></div> <div class=\"line\"><code class=\"plain\">win.add(tbl);</code></div> </div> </div> <p>As you can see in the image below, there are platform differences in the way the search bar is rendered. A couple of the properties used bear further explanation: </p> <ul class=\"\"><li class=\"\"> <p><tt class=\"\">showCancel</tt> if <tt class=\"\">true</tt> then show a cancel (&quot;clear&quot;) button always. If <tt>false</tt> on Android never show that button; on iOS don&apos;t show Cancel until the user begins typing. </p> </li><li class=\"\"> <p><tt class=\"\">hideSearchOnSelection</tt> is an iOS only property. With it set to <tt class=\"\">true</tt> as soon as the user taps a row in the search results, the search box is cleared and the Cancel button is hidden. Set it to <tt class=\"\">false</tt> and the search text and button would remain. The default value is <tt class=\"\">true</tt> Android operates as if this value were set to <tt>false</tt> </p> </li></ul> <p> <img src=\"images/download/attachments/29004930/tablesearching.png\" alt=\"images/download/attachments/29004930/tablesearching.png\" class=\"confluence-embedded-image confluence-content-image-border\" width=\"500\"> </img></p> </div> <div class=\"section section-3\" id=\"src-29004930_TableViews-Eventsandeventobjectproperties\"> <h3 class=\"heading\"><span>Events and event object properties</span></h3> <p>As shown in the preceding code, you can add event listeners to tables. From there, you can access sections, rows, and nested child elements. While you could add event listeners directly to the rows, we don&apos;t recommend it. Doing so adds unnecessary memory and processing overhead to your app. Also, it can be difficult and repetitive adding listeners to all the various rows. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">table.addEventListener(</code><code class=\"string\">&apos;click&apos;</code><code class=\"plain\">, function(e){</code></div> <div class=\"line\"><code class=\"plain\">\talert(</code><code class=\"string\">&apos;You clicked row &apos;</code><code class=\"plain\">+e.index);</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> </div> </div> <p>As shown in the code above, you have access to an event object, <tt>e</tt>, that holds important table information within the listener. For example, some of the key properties of that event object include: </p> <ul class=\"\"><li class=\"\"> <p><tt>index</tt> &#x2013; the ordinal index number of the row that received the event </p> </li><li class=\"\"> <p><tt>row</tt> &#x2013; the object representing the row that received the event </p> </li><li class=\"\"> <p><tt>rowData</tt> &#x2013; the properties of the row that received the event </p> </li><li class=\"\"> <p><tt>source</tt> &#x2013; the object that received the original event </p> </li><li class=\"\"> <p><tt>section</tt> &#x2013; the table section that received the event </p> </li></ul> <div class=\"section section-4\" id=\"src-29004930_TableViews-Scrollevents\"> <h4 class=\"heading\"><span>Scroll events</span></h4> <p>For the iOS and Mobile Web platforms, the scroll events, <tt class=\"\">scroll</tt> and <tt>scrollend</tt>, have different key properties than the other table view events: </p> <ul class=\"\"><li class=\"\"> <p><tt>contentOffset</tt> &#x2013; point that indicates how far the content in the table has moved. Since a table view can only scroll vertically, only the y-coordinate changes. A positive value indicates scrolling upward and a negative value indicates scrolling downward. See image below for a diagram of the content offset property. </p> </li><li class=\"\"> <p><tt>contentSize</tt> &#x2013; dimensions of the content, for example, the content height of a table with a few rows is smaller than the visible height. As illustrated in the image below, the pink box indicates the contentSize property and the blue box indicates the size property. </p> </li><li class=\"\"> <p><tt>size</tt> &#x2013; visible dimensions of the table view. </p> </li></ul> <div class=\"tablewrap\"> <table class=\"confluenceTable\"> <thead class=\"\"/><tfoot class=\"\"/><tbody> <tr> <td class=\"confluenceTd\" rowspan=\"1\" colspan=\"1\"> <p> <img src=\"images/download/attachments/29004930/contentSize.png\" alt=\"images/download/attachments/29004930/contentSize.png\" class=\"confluence-embedded-image\"> </img></p> </td> <td class=\"confluenceTd\" rowspan=\"1\" colspan=\"1\"> <p> <img src=\"images/download/attachments/29004930/contentOffset.png\" alt=\"images/download/attachments/29004930/contentOffset.png\" class=\"confluence-embedded-image\"> </img></p> </td> </tr> </tbody> </table> </div> </div> </div> <div class=\"section section-3\" id=\"src-29004930_TableViews-Pulltorefresh\"> <h3 class=\"heading\"><span>Pull to refresh</span></h3> <p>Since Release 2.1 on iOS, you can create a custom view that is only revealed when the user pulls the table down. This custom view is commonly used to implement a pull-to-refresh feature that updates the table data when the user drags the table downward. Create a custom View object containing other view objects, then set the TableView&apos;s <tt class=\"\">headerPullView</tt> to this object. Monitor the <tt>scrolling</tt> event to see when the user pulls the table downward to initiate an update to the table. </p> <p>While this example provides all the logic necessary to create the control, it is recommended to refactor it as a CommonJS module before using it for a production application. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">var win = Ti.UI.createWindow({fullscreen: </code><code class=\"keyword\">true</code><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"plain\"> </code></div> <div class=\"line\"><code class=\"plain\">function getFormattedDate(){</code></div> <div class=\"line\"><code class=\"plain\"> var date = </code><code class=\"keyword\">new</code><code class=\"plain\"> Date();</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">return</code><code class=\"plain\"> date.toLocaleString();</code></div> <div class=\"line\"><code class=\"plain\">}</code></div> <div class=\"line\"><code class=\"plain\"> </code></div> <div class=\"line\"><code class=\"plain\">var tableHeader = Ti.UI.createView({</code></div> <div class=\"line\"><code class=\"plain\"> backgroundColor:</code><code class=\"string\">&apos;#e2e7ed&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> width:</code><code class=\"value\">320</code><code class=\"plain\">, height:</code><code class=\"value\">80</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"plain\"> </code></div> <div class=\"line\"><code class=\"plain\">var border = Ti.UI.createView({</code></div> <div class=\"line\"><code class=\"plain\"> backgroundColor:</code><code class=\"string\">&apos;#576c89&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> bottom:</code><code class=\"value\">0</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> height:</code><code class=\"value\">2</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"plain\">tableHeader.add(border);</code></div> <div class=\"line\"><code class=\"plain\"> </code></div> <div class=\"line\"><code class=\"plain\">var imageArrow = Ti.UI.createImageView({</code></div> <div class=\"line\"><code class=\"plain\"> image:</code><code class=\"string\">&apos;https://github.com/appcelerator/titanium_mobile/raw/master/demos/KitchenSink/Resources/images/whiteArrow.png&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> left:</code><code class=\"value\">20</code><code class=\"plain\">, bottom:</code><code class=\"value\">10</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> width:</code><code class=\"value\">23</code><code class=\"plain\">, height:</code><code class=\"value\">60</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"plain\">tableHeader.add(imageArrow);</code></div> <div class=\"line\"><code class=\"plain\"> </code></div> <div class=\"line\"><code class=\"plain\">var labelStatus = Ti.UI.createLabel({</code></div> <div class=\"line\"><code class=\"plain\"> color:</code><code class=\"string\">&apos;#576c89&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> font:{fontSize:</code><code class=\"value\">13</code><code class=\"plain\">, fontWeight:</code><code class=\"string\">&apos;bold&apos;</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\"> text:</code><code class=\"string\">&apos;Pull down to refresh...&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> textAlign:</code><code class=\"string\">&apos;center&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> left:</code><code class=\"value\">55</code><code class=\"plain\">, bottom:</code><code class=\"value\">45</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> width:</code><code class=\"value\">200</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"plain\">tableHeader.add(labelStatus);</code></div> <div class=\"line\"><code class=\"plain\"> </code></div> <div class=\"line\"><code class=\"plain\">var labelLastUpdated = Ti.UI.createLabel({</code></div> <div class=\"line\"><code class=\"plain\"> color:</code><code class=\"string\">&apos;#576c89&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> font:{fontSize:</code><code class=\"value\">12</code><code class=\"plain\">},</code></div> <div class=\"line\"><code class=\"plain\"> text:</code><code class=\"string\">&apos;Last Updated: &apos;</code><code class=\"plain\"> + getFormattedDate(),</code></div> <div class=\"line\"><code class=\"plain\"> textAlign:</code><code class=\"string\">&apos;center&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> left:</code><code class=\"value\">55</code><code class=\"plain\">, bottom:</code><code class=\"value\">15</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> width:</code><code class=\"value\">200</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"plain\">tableHeader.add(labelLastUpdated);</code></div> <div class=\"line\"><code class=\"plain\"> </code></div> <div class=\"line\"><code class=\"plain\">var actInd = Ti.UI.createActivityIndicator({</code></div> <div class=\"line\"><code class=\"plain\"> left:</code><code class=\"value\">20</code><code class=\"plain\">, bottom:</code><code class=\"value\">13</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> width:</code><code class=\"value\">30</code><code class=\"plain\">, height:</code><code class=\"value\">30</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"plain\">tableHeader.add(actInd);</code></div> <div class=\"line\"><code class=\"plain\"> </code></div> <div class=\"line\"><code class=\"plain\">var tableView = Ti.UI.createTableView({</code></div> <div class=\"line\"><code class=\"plain\"> headerPullView:tableHeader</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"plain\">win.add(tableView);</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">var tableRowTotal = </code><code class=\"value\">0</code><code class=\"plain\">;</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">function loadTableData(table, count, callback){</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">for</code><code class=\"plain\"> (var i=tableRowTotal, ilen=tableRowTotal+count; i&lt;ilen; i++){</code></div> <div class=\"line\"><code class=\"plain\"> var rowID = i + </code><code class=\"value\">1</code><code class=\"plain\">;</code></div> <div class=\"line\"><code class=\"plain\"> table.appendRow({title:</code><code class=\"string\">&apos;Row &apos;</code><code class=\"plain\"> + rowID});</code></div> <div class=\"line\"><code class=\"plain\"> tableRowTotal++;</code></div> <div class=\"line\"><code class=\"plain\"> }</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\">(callback &amp;&amp; typeof callback === </code><code class=\"string\">&quot;function&quot;</code><code class=\"plain\">){</code></div> <div class=\"line\"><code class=\"plain\"> callback(table);</code></div> <div class=\"line\"><code class=\"plain\"> }</code></div> <div class=\"line\"><code class=\"plain\">}</code></div> <div class=\"line\"><code class=\"plain\"> </code></div> <div class=\"line\"><code class=\"plain\">loadTableData(tableView, </code><code class=\"value\">5</code><code class=\"plain\">);</code></div> <div class=\"line\"><code class=\"plain\"> </code></div> <div class=\"line\"><code class=\"plain\">var pulling = </code><code class=\"keyword\">false</code><code class=\"plain\">;</code></div> <div class=\"line\"><code class=\"plain\">var reloading = </code><code class=\"keyword\">false</code><code class=\"plain\">;</code></div> <div class=\"line\"><code class=\"plain\">var offset = </code><code class=\"value\">0</code><code class=\"plain\">;</code></div> <div class=\"line\"><code class=\"plain\"> </code></div> <div class=\"line\"><code class=\"plain\">tableView.addEventListener(</code><code class=\"string\">&apos;scroll&apos;</code><code class=\"plain\">,function(e){</code></div> <div class=\"line\"><code class=\"plain\"> offset = e.contentOffset.y;</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (pulling &amp;&amp; !reloading &amp;&amp; offset &gt; -</code><code class=\"value\">80</code><code class=\"plain\"> &amp;&amp; offset &lt; </code><code class=\"value\">0</code><code class=\"plain\">){</code></div> <div class=\"line\"><code class=\"plain\"> pulling = </code><code class=\"keyword\">false</code><code class=\"plain\">;</code></div> <div class=\"line\"><code class=\"plain\"> var unrotate = Ti.UI.create2DMatrix();</code></div> <div class=\"line\"><code class=\"plain\"> imageArrow.animate({transform:unrotate, duration:</code><code class=\"value\">180</code><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"plain\"> labelStatus.text = </code><code class=\"string\">&apos;Pull down to refresh...&apos;</code><code class=\"plain\">;</code></div> <div class=\"line\"><code class=\"plain\"> } </code><code class=\"keyword\">else</code><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (!pulling &amp;&amp; !reloading &amp;&amp; offset &lt; -</code><code class=\"value\">80</code><code class=\"plain\">){</code></div> <div class=\"line\"><code class=\"plain\"> pulling = </code><code class=\"keyword\">true</code><code class=\"plain\">;</code></div> <div class=\"line\"><code class=\"plain\"> var rotate = Ti.UI.create2DMatrix().rotate(</code><code class=\"value\">180</code><code class=\"plain\">);</code></div> <div class=\"line\"><code class=\"plain\"> imageArrow.animate({transform:rotate, duration:</code><code class=\"value\">180</code><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"plain\"> labelStatus.text = </code><code class=\"string\">&apos;Release to refresh...&apos;</code><code class=\"plain\">;</code></div> <div class=\"line\"><code class=\"plain\"> }</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"plain\"> </code></div> <div class=\"line\"><code class=\"plain\">function resetPullHeader(table){</code></div> <div class=\"line\"><code class=\"plain\"> reloading = </code><code class=\"keyword\">false</code><code class=\"plain\">;</code></div> <div class=\"line\"><code class=\"plain\"> labelLastUpdated.text = </code><code class=\"string\">&apos;Last Updated: &apos;</code><code class=\"plain\"> + getFormattedDate();</code></div> <div class=\"line\"><code class=\"plain\"> actInd.hide();</code></div> <div class=\"line\"><code class=\"plain\"> imageArrow.transform=Ti.UI.create2DMatrix();</code></div> <div class=\"line\"><code class=\"plain\"> imageArrow.show();</code></div> <div class=\"line\"><code class=\"plain\"> labelStatus.text = </code><code class=\"string\">&apos;Pull down to refresh...&apos;</code><code class=\"plain\">;</code></div> <div class=\"line\"><code class=\"plain\"> table.setContentInsets({top:</code><code class=\"value\">0</code><code class=\"plain\">}, {animated:</code><code class=\"keyword\">true</code><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"plain\">}</code></div> <div class=\"line\"><code class=\"plain\"> </code></div> <div class=\"line\"><code class=\"plain\">tableView.addEventListener(</code><code class=\"string\">&apos;dragEnd&apos;</code><code class=\"plain\">,function(e){</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (pulling &amp;&amp; !reloading &amp;&amp; offset &lt; -</code><code class=\"value\">80</code><code class=\"plain\">){</code></div> <div class=\"line\"><code class=\"plain\"> pulling = </code><code class=\"keyword\">false</code><code class=\"plain\">;</code></div> <div class=\"line\"><code class=\"plain\"> reloading = </code><code class=\"keyword\">true</code><code class=\"plain\">;</code></div> <div class=\"line\"><code class=\"plain\"> labelStatus.text = </code><code class=\"string\">&apos;Updating...&apos;</code><code class=\"plain\">;</code></div> <div class=\"line\"><code class=\"plain\"> imageArrow.hide();</code></div> <div class=\"line\"><code class=\"plain\"> actInd.show();</code></div> <div class=\"line\"><code class=\"plain\"> e.source.setContentInsets({top:</code><code class=\"value\">80</code><code class=\"plain\">}, {animated:</code><code class=\"keyword\">true</code><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"plain\"> setTimeout(function(){</code></div> <div class=\"line\"><code class=\"plain\"> loadTableData(e.source, </code><code class=\"value\">5</code><code class=\"plain\">, resetPullHeader(e.source));</code></div> <div class=\"line\"><code class=\"plain\"> }, </code><code class=\"value\">2000</code><code class=\"plain\">);</code></div> <div class=\"line\"><code class=\"plain\"> }</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\"><code class=\"plain\">win.open();</code></div> </div> </div> </div> <div class=\"section section-3\" id=\"src-29004930_TableViews-Hands-onpractice\"> <h3 class=\"heading\"><span>Hands-on practice</span></h3> <div class=\"section section-4\" id=\"src-29004930_TableViews-Goal\"> <h4 class=\"heading\"><span>Goal</span></h4> <p>In this activity, you will create a custom table that doesn&#x2019;t fill the entire viewport. The table will contain customized rows with background images that differ based on the row&#x2019;s location within the table. Each row will contain two images and two labels. When you tap a row, an event listener will determine if either of the images was the object that received the tap. If so, that image will be swapped with an alternate graphic. </p> <p>When completed, your app should match what is shown in this movie: <a class=\"external-link external-link\" href=\"http://assets.appcelerator.com.s3.amazonaws.com/video/320.mov\" target=\"_blank\">http://assets.appcelerator.com.s3.amazonaws.com/video/320.mov</a> </p> </div> <div class=\"section section-4\" id=\"src-29004930_TableViews-Resources\"> <h4 class=\"heading\"><span>Resources</span></h4> <p>Download the starting point code from <a class=\"external-link external-link\" href=\"http://assets.appcelerator.com.s3.amazonaws.com/app_u/code/320.zip\" target=\"_blank\">http://assets.appcelerator.com.s3.amazonaws.com/app_u/code/320.zip</a>. This archive includes the necessary graphics. </p> </div> <div class=\"section section-4\" id=\"src-29004930_TableViews-Steps\"> <h4 class=\"heading\"><span>Steps</span></h4> <ol class=\"\"><li> <p>Download, extract, and then import the TableView project into Studio. Confirm that the tiapp.xml file has appropriate values then close that file. Open app.js in Studio. </p> </li><li> <p>Following the comments included in the starting app.js file, add these elements to the app: </p> <ul class=\"\"><li> <p>Set the window background to images/gradientBackground.png </p> </li><li> <p>Add a page heading of &#x201C;Custom Table&#x201D; with a dark blue, 18 px, bold font that is positioned at the top-left of the window </p> </li><li> <p>Define a table that is positioned below the label and which is 90% of the width of the screen and 85% of its height. Set the table&#x2019;s background color to transparent and for iOS, set the separator style to NONE. </p> </li></ul></li><li> <p>Write a function named makeRow() following the specifications included in the comments within the code. </p> <ul class=\"\"><li> <p>Your makeRow() function should accept an object that will be used to pass in four values: the row number, primary label text, secondary label text, and a custom &#x201C;which image&#x201D; indicator string. Possible values for the row number parameter will be an integer or the string &#x2018;last&#x2019;. Possible values for the myImage string property will be a, b, c, blue, and red. You&#x2019;ll use this myImage property to determine which element in the row is tapped and to swap images accordingly. </p> </li><li> <p>Each row should contain two images: </p> <ul class=\"\"><li> <p>Left image: if an even-numbered row = &#x2018;images/imageA.png&#x2019; otherwise &#x2018;images/imageB.png&#x2019;. It should have a custom property named myImage that is set equal to the myImage parameter passed to your makeRow() function at run time. </p> </li><li> <p>Right image: use &#x2018;images/notificationBadge.png&#x2019; and set its custom myImage property equal to &#x2018;blue&#x2019; </p> </li></ul></li><li> <p>Each row should contain two labels: </p> <ul class=\"\"><li> <p>Primary label: use a bold, 16 px font positioned to the right of the left image with its text set equal to the primary label parameter passed to makeRow() at run time. Be sure to set a height for the label. </p> </li><li> <p>Secondary label: use a bold, 13 px font positioned below the primary label with its text set equal to the secondary label parameter passed to makeRow() at run time. Be sure to set a height for the label. </p> </li></ul></li><li> <p>Each row&#x2019;s background image should be set to &#x2018;images/middleRow.png&#x2019; and the selected background image to &#x2018;images/middleRowSelected.png&#x2019;. If the row number parameter is 0, set the row&#x2019;s background image to &#x2018;images/topRow.png&#x2019; and selected background image to &#x2018;images/topRowSelected.png&#x2019;. If the row number parameter equals &#x2018;last&#x2019; then use &#x2018;images/bottomRow.png&#x2019; and &#x2018;images/bottomRowSelected.png&#x2019; for the background images and use &#x2018;images/imageC.png&#x2019; for the left image. </p> </li><li> <p>The makeRow() function should return a Titanium.UI.TableViewRow object. </p> </li></ul></li><li> <p>Use a for-loop to create an array of 8 rows for your table, calling makeRow() in each iteration of the loop. Set the primary label to &#x201C;This is row&#x201D; plus the row-number indicator. Set the secondary label to &#x201C;Subtitle&#x201D; and the row-number indicator. Set the myImage value to either &#x2018;a&#x2019; or &#x2018;b&#x2019; depending on whether your loop counter is odd or even. (Hint: use the modulus operator, %, to calculate this odd/even value.)<br>Push one additional row into the rows array. This row should pass these values: </br></p> <ul class=\"\"><li> <p>row number: &#x2018;last&#x2019; </p> </li><li> <p>primary label: &#x2018;This is the last row&#x2019; </p> </li><li> <p>secondary label: &#x2018;The last subtitle&#x2019; </p> </li><li> <p>myImage: &#x2018;c&#x2019; </p> </li></ul></li><li> <p>Add a click event listener to your table. Check the myImage property of the event source. Using a switch or if-else test, determine if myImage is set equal to a, b, c, blue, or red. If a, b, or c, swap the left image such that imageA becomes imageB, imageB becomes imageC, and imageC becomes imageA again. If the myImage property equals blue, the right image should change to images/notificationUnreadBadge.png otherwise it should swap back to images/notificationBadge.png. </p> </li><li> <p>Save and run the project in the simulator. Confirm that the user interface matches the screenshots shown below. Confirm that your event listener functions properly: </p> <ul class=\"\"><li> <p>When the row is tapped, the background image should swap to the green &#x201C;selected&#x201D; version. </p> </li><li> <p>If the left image is tapped, the letter should advance to the next letter, looping back to the beginning properly. </p> </li><li> <p>If the right image is tapped, it should swap between the red and blue versions properly. </p> </li></ul></li></ol> </div> </div> <div class=\"section section-3\" id=\"src-29004930_TableViews-Referencesandfurtherreading\"> <h3 class=\"heading\"><span>References and further reading</span></h3> <ul class=\"\"><li> <p>Finished code: <a class=\"external-link external-link\" href=\"http://assets.appcelerator.com.s3.amazonaws.com/app_u/code/345-finished.zip\" target=\"_blank\">http://assets.appcelerator.com.s3.amazonaws.com/app_u/code/345-finished.zip</a> </p> </li><li> <p>TableView API docs: <a class=\"external-link external-link\" href=\"#!/api/Titanium.UI.TableView\">http://developer.appcelerator.com/apidoc/mobile/latest/Titanium.UI.TableView-object</a> </p> </li><li> <p>TableViewRow API docs: <a class=\"external-link external-link\" href=\"#!/api/Titanium.UI.TableViewRow\">http://developer.appcelerator.com/apidoc/mobile/latest/Titanium.UI.TableViewRow-object</a> </p> </li><li> <p>Kitchen Sink code: <a class=\"external-link external-link\" href=\"https://github.com/appcelerator/KitchenSink\" target=\"_blank\">https://github.com/appcelerator/KitchenSink</a> </p> </li></ul> </div> </div> <div class=\"section section-2\" id=\"src-29004930_TableViews-Summary\"> <h2 class=\"heading\"><span>Summary</span></h2> <p>In this section, you reviewed TableView basics, then explored some of its more powerful functionality. We looked at headers, footers, and sections. Finally, we wrapped up with a look at handling events associated with tables and rows. In the next section, we&apos;ll see how we can add custom icons and splash screens to our Titanium apps. </p> </div> </div><a id=\"editButton\" href=\"https://wiki.appcelerator.org/pages/editpage.action?pageId=29004930\"><span>Edit</span></a> </div> </body> </html> ","title":"TableViews"});