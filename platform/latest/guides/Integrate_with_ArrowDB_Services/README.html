<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Integrate with ArrowDB Services</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta content="Scroll EclipseHelp Exporter" name="generator"/>

    <link type="text/css" rel="stylesheet"/>
    <link type="text/css" rel="stylesheet"/>
    <link type="text/css" rel="stylesheet" media="print"/>
</head>
<body>
    <div class="container">
        <div class="header"/>

        <div id="30084640" class="content">
            <h1>Integrate with ArrowDB Services</h1>
<ul class="toc-indentation "><li class=" ">    <p>
<a class="document-link " href="#!/guide/Integrate_with_ArrowDB_Services-section-30084640_IntegratewithArrowDBServices-IntegratingArrowDBintoyourapp">Integrating ArrowDB into your app</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p>
<a class="document-link " href="#!/guide/Integrate_with_ArrowDB_Services-section-30084640_IntegratewithArrowDBServices-Step1.RegisterYourAppwithAppceleratorArrow">Step 1. Register Your App with Appcelerator Arrow</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Integrate_with_ArrowDB_Services-section-30084640_IntegratewithArrowDBServices-Step2.ConfigureyourTitaniumproject">Step 2. Configure your Titanium project</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Integrate_with_ArrowDB_Services-section-30084640_IntegratewithArrowDBServices-Step3.Authentication">Step 3. Authentication</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Integrate_with_ArrowDB_Services-section-30084640_IntegratewithArrowDBServices-Step4.ImplementtheTitaniumArrowDBAPIs">Step 4. Implement the Titanium ArrowDB APIs</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Integrate_with_ArrowDB_Services-section-30084640_IntegratewithArrowDBServices-Step5.Managingyourapp'sdata">Step 5. Managing your app's data</a>    </p>
</li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Integrate_with_ArrowDB_Services-section-30084640_IntegratewithArrowDBServices-Step6.SharingArrowDBObjects">Step 6. Sharing ArrowDB Objects</a>    </p>
</li></ul></li><li class=" ">    <p>
<a class="document-link " href="#!/guide/Integrate_with_ArrowDB_Services-section-30084640_IntegratewithArrowDBServices-References">References</a>    </p>
</li></ul>    <div class="section section-2 " id="30084640_IntegratewithArrowDBServices-Objective">
        <h2 class="heading "><span>Objective</span></h2>
    <p>
In this section, you will learn how to utilize the ArrowDB APIs, previously known as Appcelerator Cloud Services, for your mobile apps.    </p>
    </div>
    <div class="section section-2 " id="30084640_IntegratewithArrowDBServices-Contents">
        <h2 class="heading "><span>Contents</span></h2>
    <p>
ArrowDB and Arrow Push provide a wide array of automatically-scaled network features and data objects for your app. Tasks such as push notifications, user logins, photo uploads, checkins and status updates that usually require server programming or tedious integration with multiple SDKs are performed through one simple interface.    </p>
    <p>
We worry about the database, file storage, search engine and application stack so that you can focus on what&rsquo;s really important: your app and your users. As usage of your app increases, ArrowDB scales up automatically to handle the load without requiring you to do any additional work. Photos and other files are redundantly stored on multiple devices across multiple storage facilities, preventing data corruption and loss.    </p>
    <p>
Over 25 APIs are available for immediate use in your app to provide the most popular network features. Writing, testing, and deploying server code is a thing of the past. Focus on your users and app features.    </p>
    <div class="confbox admonition admonition-info aui-message hint shadowed information-macro">
            <div class="title">ACS API support</div>
        
    <p>
Note that when new APIs are added to ArrowDB, they may not be immediately available in the Titanium Cloud module.<br/>The since version listed after some APIs indicates the Titanium Mobile SDK release that included support for<br/>that API. (Note that the Titanium Cloud module version is not always the same as the SDK version that it ships with.)    </p>
    </div>
    
    <p>
ArrowDB is open to all app publishers, regardless of the development technology used to build the app &ndash; Titanium, Objective-C, Java, or HTML5 via frameworks like Sencha Touch or PhoneGap &ndash; we&rsquo;ve got you covered. ArrowDB provide a complete REST API along with iOS, Android and JavaScript SDKs. Any device that can make HTTP requests over the Internet can securely use ArrowDB as its server backend.    </p>
    <div class="section section-3 " id="30084640_IntegratewithArrowDBServices-IntegratingArrowDBintoyourapp">
        <h3 class="heading "><span>Integrating ArrowDB into your app</span></h3>
    <p>
To integrate ArrowDB into your app, you'll need to follow these four general steps:    </p>
<ol class=" "><li class=" ">    <p>
Register your app with Appcelerator Arrow    </p>
</li><li class=" ">    <p>
Configure your Titanium project to use Arrow    </p>
</li><li class=" ">    <p>
Authenticate your API calls to the Arrow Cloud infrastructure    </p>
</li><li class=" ">    <p>
Implement the Titanium ArrowDB API calls within your app    </p>
</li></ol>    <p>
You might want to add a fifth step to this list: Manage the data your app collects by using the ArrowDB control panel or RESTful API.    </p>
    <div class="section section-4 " id="30084640_IntegratewithArrowDBServices-Step1.RegisterYourAppwithAppceleratorArrow">
        <h4 class="heading "><span>Step 1. Register Your App with Appcelerator Arrow</span></h4>
    <p>
Using ArrowDB API to store and retrieve data for your app is easy.    </p>
<ul class=" "><li class=" ">    <p>
When creating a new application in Appcelerator Studio, make sure the <strong class=" ">Enable Appcelerator Services</strong> checkbox is enabled.    </p>
</li><li class=" ">    <p>
For a previously created project, open your <tt class=" ">tiapp.xml</tt> file, then click the <strong class=" ">Enable Services</strong> button under the <i class=" ">Appcelerator Service</i> section.    </p>
</li></ul>    </div>
    <div class="section section-4 " id="30084640_IntegratewithArrowDBServices-Step2.ConfigureyourTitaniumproject">
        <h4 class="heading "><span>Step 2. Configure your Titanium project</span></h4>
    <p>
ArrowDB support is baked into Titanium. However, you must include the cloud services module into your project to use Arrow functionality. In your <tt class=" ">app.js</tt> (or other suitable file), include the <tt class=" ">require()</tt> statement as shown here:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">var Cloud = require(</code><code class="string">'ti.cloud'</code><code class="plain">);</code></div>
<div class="line"><code class="plain">Cloud.debug = </code><code class="keyword">true</code><code class="plain">;  </code><code class="comments">// optional; if you add this line, set it to false for production</code></div>
</div>
</div>    <p>
In order for the <tt class=" ">ti.cloud</tt> module to be recognized, ensure that the modules directive has been added to <tt class=" ">tiapp.xml</tt>.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">&lt;modules&gt;</code></div>
<div class="line"><code class="plain">    &lt;module platform=</code><code class="string">"commonjs"</code><code class="plain">&gt;ti.cloud&lt;/module&gt;</code></div>
<div class="line"><code class="plain">&lt;/modules&gt;</code></div>
</div>
</div>    </div>
    <div class="section section-4 " id="30084640_IntegratewithArrowDBServices-Step3.Authentication">
        <h4 class="heading "><span>Step 3. Authentication</span></h4>
    <p>
Your app must prove that it is allowed to talk to ArrowDB. This keeps your data secure by preventing anyone from making requests to ArrowDB that impersonate your app.  In order to make ArrowDB calls, add the Cloud App Key to your <tt class=" ">tiapp.xml</tt> file.    </p>
    <p>
If you add ArrowDB support to your application when you create it in Studio, Studio adds the authentication keys to your <tt class=" ">tiapp.xml</tt> file:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">tiapp.xml</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">&lt;property name=</code><code class="string">"acs-api-key"</code><code class="plain"> type=</code><code class="string">"string"</code><code class="plain">&gt;ARROW_APP_KEY&lt;/property&gt;</code></div>
</div>
</div>    </div>
    <div class="section section-4 " id="30084640_IntegratewithArrowDBServices-Step4.ImplementtheTitaniumArrowDBAPIs">
        <h4 class="heading "><span>Step 4. Implement the Titanium ArrowDB APIs</span></h4>
    <p>
Add cloud services to your app using the ArrowDB APIs. With over 25 APIs available for you to use, we obviously can't cover them all here. But let's take a look at a couple of examples.    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">Create a user</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="comments">// example assumes you have a set of text fields named username, password, etc.</code></div>
<div class="line"><code class="plain">Cloud.Users.create({</code></div>
<div class="line"><code class="plain">    username: username.value,</code></div>
<div class="line"><code class="plain">    password: password.value,</code></div>
<div class="line"><code class="plain">    password_confirmation: confirmPassword.value,</code></div>
<div class="line"><code class="plain">    first_name: firstName.value,</code></div>
<div class="line"><code class="plain">    last_name: lastName.value</code></div>
<div class="line"><code class="plain">}, function (e) {</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">if</code><code class="plain"> (e.success) {</code></div>
<div class="line"><code class="plain">		</code><code class="comments">// user created successfully</code></div>
<div class="line"><code class="plain">    } </code><code class="keyword">else</code><code class="plain"> {</code></div>
<div class="line"><code class="plain">        </code><code class="comments">// oops, something went wrong</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">});</code></div>
</div>
</div><div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">Post a photo</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="comments">// assumes you've obtained a photo from the camera or gallery, with blob data stored in an object named photo</code></div>
<div class="line"><code class="comments">// collectionID is an ID generated by ArrowDB for a grouping of photos, you could retrieve via code or hard-code it</code></div>
<div class="line"><code class="plain">Cloud.Photos.create({</code></div>
<div class="line"><code class="plain">    photo: photo,</code></div>
<div class="line"><code class="plain">    collection_id: collectionID,</code></div>
<div class="line"><code class="plain">    </code><code class="string">'photo_sync_sizes[]'</code><code class="plain">: </code><code class="string">'small_240'</code></div>
<div class="line"><code class="plain">}, function (e) {</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">if</code><code class="plain"> (e.success) {</code></div>
<div class="line"><code class="plain">		</code><code class="comments">// null out our photo objects to clean up memory</code></div>
<div class="line"><code class="plain">        photo = </code><code class="keyword">null</code><code class="plain">;</code></div>
<div class="line"><code class="plain">        collectionID = </code><code class="keyword">null</code><code class="plain">;</code></div>
<div class="line"><code class="plain">    } </code><code class="keyword">else</code><code class="plain"> {</code></div>
<div class="line"><code class="plain">        </code><code class="comments">// oops, something went wrong</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">});</code></div>
</div>
</div><div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="title">Linking a Facebook login with your app</div>
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="comments">// Not shown is the code to implement the Facebook module in your app</code></div>
<div class="line"><code class="comments">// call the ArrowDB Facebook SocialIntegrations API to link logged in states</code></div>
<div class="line"><code class="plain">function updateLoginStatus() {</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">if</code><code class="plain"> (Facebook.loggedIn) {</code></div>
<div class="line"><code class="plain">        label.text = </code><code class="string">'Logging in to ArrowDB as well, please wait...'</code><code class="plain">;</code></div>
<div class="line"><code class="plain">        Cloud.SocialIntegrations.externalAccountLogin({</code></div>
<div class="line"><code class="plain">            type: </code><code class="string">'facebook'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            token: Facebook.accessToken</code></div>
<div class="line"><code class="plain">        }, function (e) {</code></div>
<div class="line"><code class="plain">            </code><code class="keyword">if</code><code class="plain"> (e.success) {</code></div>
<div class="line"><code class="plain">                var user = e.users[</code><code class="value">0</code><code class="plain">];</code></div>
<div class="line"><code class="plain">                alert(</code><code class="string">'Logged in! You are now logged in as '</code><code class="plain"> + user.id);</code></div>
<div class="line"><code class="plain">            }</code></div>
<div class="line"><code class="plain">            </code><code class="keyword">else</code><code class="plain"> {</code></div>
<div class="line"><code class="plain">                error(e);</code></div>
<div class="line"><code class="plain">            }</code></div>
<div class="line"><code class="plain">        });</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">else</code><code class="plain"> {</code></div>
<div class="line"><code class="plain">        label.text = </code><code class="string">'Please login to Facebook.'</code><code class="plain">;</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="comments">// when the user logs into or out of Facebook, link their login state with ArrowDB</code></div>
<div class="line"><code class="plain">Facebook.addEventListener(</code><code class="string">'login'</code><code class="plain">, updateLoginStatus);</code></div>
<div class="line"><code class="plain">Facebook.addEventListener(</code><code class="string">'logout'</code><code class="plain">, updateLoginStatus);</code></div>
<div class="line"><code class="comments">// add the Facebook login button</code></div>
<div class="line"><code class="plain">win.add(Facebook.createLoginButton({</code></div>
<div class="line"><code class="plain">    top: </code><code class="value">10</code></div>
<div class="line"><code class="plain">}));</code></div>
</div>
</div>    <p>
Of course, there are many more examples we could show. Instead, head on over to the API documentation to view the samples included there plus the full explanation of ArrowDB APIs.    </p>
    <p>
The Cloud module also includes a sample application demonstrating each of the ArrowDB request types. You can find this in the modules folder under the Titanium SDK folder. For example:    </p>
<div xmlns="http://www.w3.org/1999/xhtml" class="confbox programlisting scroll-unprocessed">
<div class="defaultnew syntaxhighlighter">
<div class="line"><code class="plain">/Library/Application Support/Titanium/modules/commonjs/ti.cloud/&lt;version&gt;/example</code></div>
</div>
</div>    </div>
    <div class="section section-4 " id="30084640_IntegratewithArrowDBServices-Step5.Managingyourapp'sdata">
        <h4 class="heading "><span>Step 5. Managing your app's data</span></h4>
    <p>
Of course, there's no sense in collecting data if you don't use it. Data created by your app is stored within the Arrow cloud. You can view and manage this data through the Appcelerator Dashboard. You can also use the RESTful API (or any of the other APIs) to extract the data you need.    </p>
    </div>
    <div class="section section-4 " id="30084640_IntegratewithArrowDBServices-Step6.SharingArrowDBObjects">
        <h4 class="heading "><span>Step 6. Sharing ArrowDB Objects</span></h4>
    <p>
The Cloud module supports Access Control Lists (ACLs) to control access to ACL resources. An ACL lets you grant read and write access to users other than the owner of an ArrowDB object. An access control list controls read and write access to any ArrowDB objects it's attached to. For ArrowDB, read and write permission are defined as follows:    </p>
<ul class=" "><li class=" ">    <p>
<strong class=" ">Read permission</strong>. Includes the ability to show, query and search ArrowDB objects.    </p>
</li></ul><ul class=" "><li class=" ">    <p>
<strong class=" ">Write permission</strong>. Includes the ability to update and delete ArrowDB objects.    </p>
</li></ul>    <p>
An ACL can include:    </p>
<ul class=" "><li class=" ">    <p>
A list of user IDs granted read permission.    </p>
</li><li class=" ">    <p>
A list of user IDs granted write permission.    </p>
</li><li class=" ">    <p>
A public read flag granting read permission to <strong class=" ">all</strong> users.    </p>
</li><li class=" ">    <p>
A public write flag granting write permission to <strong class=" ">all</strong> users.    </p>
</li></ul>    <p>
The object's owner always has read and write permission.    </p>
    <p>
You can specify an ACL when you create or update an object.    </p>
    <p>
Currently, ACLs can be used with the following ArrowDB objects: Checkins, Custom Objects, Events, Files, Photos, Photo Collections, Places, Posts, Reviews and Statuses.    </p>
    <p>
See <a class="external-link external-link" href="#!/api/Modules.Cloud.ACLs">Ti.Cloud.ACLs</a> for methods to create and update ACLs.    </p>
    </div>
    </div>
    <div class="section section-3 " id="30084640_IntegratewithArrowDBServices-References">
        <h3 class="heading "><span>References</span></h3>
<ul class=" "><li class=" ">    <p>
<a class="external-link external-link" href="#!/api/Modules.Cloud">Cloud Module Reference</a>    </p>
</li><li class=" ">    <p>
<a class="external-link external-link" href="/arrowdb/latest/#!/guide/quickstart">ArrowDB and Arrow Push Documentation</a>    </p>
</li></ul>    </div>
    </div>
    <div class="section section-2 " id="30084640_IntegratewithArrowDBServices-Summary">
        <h2 class="heading "><span>Summary</span></h2>
    <p>
In this section, you briefly explored how to use the ArrowDB APIs in your mobile apps.    </p>
    </div>
        </div><a id="editButton" href="https://wiki.appcelerator.org/pages/editpage.action?pageId=30084640"><span>Edit</span></a>
    
        <div class="footer">
            Created with <a href="http://k15t.com/display/web/Scroll-Wiki-EclipseHelp-Exporter-for-Confluence" target="_blank">Scroll EclipseHelp Exporter for Confluence</a>.
        </div>
    </div>
</body>
</html>
