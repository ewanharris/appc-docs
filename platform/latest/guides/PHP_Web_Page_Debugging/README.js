Ext.data.JsonP['PHP_Web_Page_Debugging']({"guide":" <!doctype html> <html> <head> <title>PHP Web Page Debugging</title> <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"> </meta></head> <body> <div class=\"container\"> <div class=\"header\"/> <div id=\"src-30083033\" class=\"content\"> <h1>PHP Web Page Debugging</h1> <p> </p> <ul class=\"toc-indentation\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/PHP_Web_Page_Debugging-section-src-30083033_PHPWebPageDebugging-BasicSetup\">Basic Setup</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/PHP_Web_Page_Debugging-section-src-30083033_PHPWebPageDebugging-SettingupXDebuginphp.ini\">Setting up XDebug in php.ini</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/PHP_Web_Page_Debugging-section-src-30083033_PHPWebPageDebugging-Verifytheinstallation\">Verify the installation</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/PHP_Web_Page_Debugging-section-src-30083033_PHPWebPageDebugging-Settingupyourproject\">Setting up your project</a> </p> <ul class=\"toc-indentation\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/PHP_Web_Page_Debugging-section-src-30083033_PHPWebPageDebugging-CreatingaPHPprojectdirectlyonyourDocumentRootfolder\">Creating a PHP project directly on your Document Root folder</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/PHP_Web_Page_Debugging-section-src-30083033_PHPWebPageDebugging-AliasingtoyourPHPproject\">Aliasing to your PHP project</a> </p> </li></ul></li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/PHP_Web_Page_Debugging-section-src-30083033_PHPWebPageDebugging-Creatingalaunchconfiguration\">Creating a launch configuration</a> </p> <ul class=\"toc-indentation\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/PHP_Web_Page_Debugging-section-src-30083033_PHPWebPageDebugging-Notes\">Notes</a> </p> </li></ul></li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/PHP_Web_Page_Debugging-section-src-30083033_PHPWebPageDebugging-UsingXDebugHelperbrowserextensiontoinitiateadebug\">Using XDebug Helper browser extension to initiate a debug</a> </p> <ul class=\"toc-indentation\"><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/PHP_Web_Page_Debugging-section-src-30083033_PHPWebPageDebugging-Installation\">Installation</a> </p> </li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/PHP_Web_Page_Debugging-section-src-30083033_PHPWebPageDebugging-Debugging\">Debugging</a> </p> </li></ul></li><li class=\"\"> <p><a class=\"document-link\" href=\"#!/guide/PHP_Web_Page_Debugging-section-src-30083033_PHPWebPageDebugging-DebugPorts\">Debug Ports</a> </p> </li></ul> <div class=\"section section-2\" id=\"src-30083033_PHPWebPageDebugging-BasicSetup\"> <h2 class=\"heading\"><span>Basic Setup</span></h2> <p>The easiest way to setup and prepare your machine for PHP, and PHP debugging, is to install XAMPP, MAMP or ZendServer. Those packages are already pre-configured and ready to go with some very minor modifications. </p> <p>The instruction here assumes that you already have a running server with PHP configured on it. </p> </div> <div class=\"section section-2\" id=\"src-30083033_PHPWebPageDebugging-SettingupXDebuginphp.ini\"> <h2 class=\"heading\"><span>Setting up XDebug in php.ini</span></h2> <ul class=\"\"><li class=\"\"> <p>Locate your <tt class=\"\">php.ini</tt> file (same path as you defined in your server&apos;s <tt>httpd.conf</tt>). </p> </li><li class=\"\"> <p>Open the file and add the following lines (these paths <i>must</i> be modified according to your system type): </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">;Hook the XDebug</code></div> <div class=\"line\"><code class=\"plain\"> zend_extension_ts=C:\\php\\ext\\php_xdebug-</code><code class=\"value\">2.0</code><code class=\"plain\">.</code><code class=\"value\">3</code><code class=\"plain\">-</code><code class=\"value\">5.2</code><code class=\"plain\">.</code><code class=\"value\">5</code><code class=\"plain\">.dll</code></div> <div class=\"line\"><code class=\"plain\"> xdebug.remote_enable=</code><code class=\"value\">1</code></div> <div class=\"line\"><code class=\"plain\"> xdebug.remote_host=</code><code class=\"value\">127.0</code><code class=\"plain\">.</code><code class=\"value\">0.1</code></div> <div class=\"line\"><code class=\"plain\"> xdebug.remote_port=</code><code class=\"value\">9000</code></div> <div class=\"line\"><code class=\"plain\"> xdebug.remote_handler=</code><code class=\"string\">&quot;dbgp&quot;</code></div> </div> </div> </li><li class=\"\"> <p>Note that the XDebug extension should be added as a <tt class=\"\">zend_extension</tt> or as a <tt>zend_extension_ts</tt> for Thread-Safe PHP environments. And, of course, change the version according to what you have. </p> </li></ul> <p>In case you have XAMPP or MAMP installation, locate the XDebug extension that was delivered with the package and set it up. </p> <p>Notes: </p> <ul class=\"\"><li class=\"\"> <p><tt>Port 9000</tt> is the default port for XDebug. In case the Aptana PHP debugger client is set to listed on port 9000, there is no real need to set it in the ini, however it&apos;s a good practice to do so. </p> </li><li> <p>In case that an XDebug session is triggered from the studio and the client port does not match the debug port defined in the ini, the Studio will prompt you about it and advise you what to do (see above). </p> </li><li class=\"\"> <p>The <tt class=\"\">zend_extension_ts</tt> is only valid in cases where the PHP interpreter was compiled as &apos;Thread-Safe&apos;. In cases where it was not compiled as such (and you have a compatible xdebug extension), the line should be <tt>zend_extension=&lt;debugger path&gt;/php_xdebug.so</tt> (or similar). </p> </li></ul> </div> <div class=\"section section-2\" id=\"src-30083033_PHPWebPageDebugging-Verifytheinstallation\"> <h2 class=\"heading\"><span>Verify the installation</span></h2> <p>Some of the packages mentioned above have a pre-configured link that can display your server&apos;s configurations. However, you can still verify that in a few simple steps (here we&apos;ll just assume you have an Apache server): </p> <ol class=\"\"><li> <p>Restart your server. </p> </li><li class=\"\"> <p>Create a PHP file named <tt class=\"\">phpinfo.php</tt> in Apache&apos;s htdocs directory containing something simple, such as <tt>&lt;?php phpinfo(); ?&gt;</tt> to the file and save it. </p> </li><li> <p>Open the file URL in your web browser: http://localhost/phpinfo.php </p> <ul class=\"\"><li class=\"\"> <p>You should see the standard <tt>phpinfo</tt> output. </p> </li></ul></li><li> <p>Verify that the XDebug was loaded by locating the note at the bottom of the first section. It should say something like: &quot;with Xdebug v2.0.3, Copyright (c) 2002-2008, by Derick Rethans&quot;. </p> </li></ol> <p> <img src=\"images/download/attachments/30083033/PhpInfoXDebug.png\" alt=\"images/download/attachments/30083033/PhpInfoXDebug.png\" class=\"confluence-embedded-image\"> </img></p> </div> <div class=\"section section-2\" id=\"src-30083033_PHPWebPageDebugging-Settingupyourproject\"> <h2 class=\"heading\"><span>Setting up your project</span></h2> <p>There are several ways to set up your workspace in a way that the debugger will catch all the breakpoints and behave correctly. Here are a few best-practices which explains when and how to set it up. </p> <div class=\"section section-3\" id=\"src-30083033_PHPWebPageDebugging-CreatingaPHPprojectdirectlyonyourDocumentRootfolder\"> <h3 class=\"heading\"><span>Creating a PHP project directly on your Document Root folder</span></h3> <p>This is perhaps the easiest way to make sure that you are always in sync with the content that the server is &apos;seeing&apos; and the content that you are editing. </p> <p>Follow these steps to create a PHP project that is pointed to your document root: </p> <ul class=\"\"><li> <p>Access the Studio&apos;s File View </p> </li><li> <p>Browse to your document root directory and select the folder that you wish to promote to a project </p> </li><li> <p>Right click it and select &apos;Promote to project&apos; </p> </li><li> <p>Right click the created project and select Properties </p> </li><li> <p>Click on the Project Natures node and check the PHP Nature box </p> </li><li> <p>OK the dialog (also click &apos;Yes&apos; to close and re-open the project when a prompt dialog appears) </p> </li></ul> <p>That is all. You now have a PHP project that is pointing directly into your document root, or one of it&apos;s sub-folders. </p> <p><strong>A few notes and warnings:</strong> </p> <ul class=\"\"><li> <p>Since your edits are on the actual files that the server serve, it&apos;s only recommended for staging/development servers (which is probably the case if the server is on your local machine) </p> </li><li> <p>You should take extra care when you delete a project that is pointing to an external folder, such as this. When deleting, you will be prompted to delete the actual project files. If you will do you, you will loose the files in your server doc-root! So make sure you keep that check-box turned off when you delete a project from the workspace. </p> </li></ul> </div> <div class=\"section section-3\" id=\"src-30083033_PHPWebPageDebugging-AliasingtoyourPHPproject\"> <h3 class=\"heading\"><span>Aliasing to your PHP project</span></h3> <p>In case you already have a PHP project set up in your Aptana Studio, and you choose not to move/recreate it to support the first option we mentioned above, you&apos;ll need to create an Apache Alias pointing to that project. <strong>It is crucial that the alias name exactly matches your project name.</strong> </p> <p>For example, a project named RemoteDebugTest should have this Alias setting in the <tt>httpd.conf</tt>: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">Alias /RemoteDebugTest C:\\Eclipse\\workspace\\RemoteDebugTest</code></div> <div class=\"line\"><code class=\"plain\">&lt;Directory C:\\Eclipse\\workspace\\RemoteDebugTest&gt;</code></div> <div class=\"line\"><code class=\"plain\"> Order allow,deny</code></div> <div class=\"line\"><code class=\"plain\"> Allow from all</code></div> <div class=\"line\"><code class=\"plain\">&lt;/Directory&gt;</code></div> </div> </div> <p>After saving <tt>httpd.conf</tt>, restart Apache to make your changes effective. </p> </div> </div> <div class=\"section section-2\" id=\"src-30083033_PHPWebPageDebugging-Creatingalaunchconfiguration\"> <h2 class=\"heading\"><span>Creating a launch configuration</span></h2> <p>In the steps above we&apos;ve prepared the Server side and the Client side (e.g. the IDE) for the debug session. So, the next step is to test that a debug session can be initiated successfully. </p> <p>First, we&apos;ve prepared this image to illustrate the sequence of events that are triggered when starting a debug session from the Aptana Studio </p> <p> <img src=\"images/download/attachments/30083033/PhpDebugSessionSequence.png\" alt=\"images/download/attachments/30083033/PhpDebugSessionSequence.png\" class=\"confluence-embedded-image\"> </img></p> <p>As you can see, the client (which is the Studio in this case) initiate the debug session by hitting a URL on the server side and attaching a few debug parameters that are captured and handled by the debugger extension on the server side (XDebug or Zend Debugger). </p> <p>Once the server processed our request and determined that we want to debug, the server itself tries to contact the Studio to initiate a debug session. From that moment on, the communication is done through the debug protocol (DBGP or Zend Debug Protocol, according to the type of the debugger). </p> <p>Breakpoints that were previously set in the editor are sent to the server when you start a session, while the debug protocol itself supports adding more breakpoints during the session. </p> <p>Now that you are familiar a bit with the basics, it&apos;s time to test your settings. </p> <p>For this example, we assume that you set up your server with an XDebug engine, and that your project is in sync with the files that the server is accessing. </p> <p>The first thing we&apos;ll need to check is the communication link between the server and the client. </p> <ul class=\"\"><li> <p>Create a new php file. Name if debugTest.php and paste this code into it: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"line\"><code class=\"plain\">&lt;?php</code></div> <div class=\"line\"><code class=\"plain\"> $w = </code><code class=\"string\">&apos;world&apos;</code><code class=\"plain\">;</code></div> <div class=\"line\"><code class=\"plain\"> echo </code><code class=\"string\">&apos;Hello &apos;</code><code class=\"plain\">;</code></div> <div class=\"line\"><code class=\"plain\"> echo $w;</code></div> <div class=\"line\"><code class=\"plain\">?&gt;</code></div> </div> </div> </li></ul><ul class=\"\"><li class=\"\"> <p>Open the launch configuration dialog by accessing the debug shortcut (or by using the action from the menu Run &gt; Open Debug Dialog): <strong>Create a new*PHP Web Page</strong> debug configuration </p> </li><li> <p>Verify that the XDebug debugger is selected. </p> </li></ul> <p>The launch configuration generates the URL that we use to contact the debugger. For that reason, and for <i>Path Mapping</i> reasons, the configuration need to have a valid server configuration attached to it. </p> <p>To create a server configuration: </p> <ul class=\"\"><li class=\"\"> <p>Hit the plus button next to the <i>PHP Server</i> line. </p> </li><li> <p>Create an Apache, or a Generic, server configuration. </p> <div class=\"confbox admonition admonition-note aui-message warning shadowed information-macro\"> <p><strong class=\"\">Make sure that the host name is without the <i class=\"\">protocol</i> part (e.g. use localhost and not</strong> <tt>http://localhost</tt>). </p> </div> </li></ul> <p>Continue with these steps: </p> <ul class=\"\"><li class=\"\"> <p>Select an <i>Initial Script</i> from your workspace (for our test, select the debugTest.php file). This will be the entry point, and also the file that will be requested in the URL request. </p> </li><li> <p>The configuration dialog will auto-generate the request URL according to the selected server and the initial script. </p> </li><li> <p>Verify that the URL that was generated exists. </p> </li><li class=\"\"> <p>In case the URL need some tweaking to match your server, un-check the <i>Auto Generate</i> and edit the URL path manually. </p> </li></ul> <p>Finally, hit the <i class=\"\">Debug</i> button.<br>At this point a debug session should be initiated. A browser is opened and the Studio should break on the first line of the <tt>debugTest.php</tt> file. </br></p> <p>In case it does not break on the first line, do the following to resolve the problem: </p> <ol class=\"\"><li class=\"\"> <p>Re-check that you have the XDebug up and running on your server. Test it using a script with a <tt>phpinfo()</tt> line in it. </p> </li><li> <p>Check that the port is not blocked by a firewall. The default port for XDebug is 9000 and for Zend Debugger is 10000. </p> </li></ol> <p> <img src=\"images/download/attachments/30083033/PhpRemoteDebugConfig.png\" alt=\"images/download/attachments/30083033/PhpRemoteDebugConfig.png\" class=\"confluence-embedded-image\"> </img></p> <div class=\"section section-3\" id=\"src-30083033_PHPWebPageDebugging-Notes\"> <h3 class=\"heading\"><span>Notes</span></h3> <ul class=\"\"><li class=\"\"> <p>The browser is opened with the URL to the aliased file with the added query string of <tt>?XDEBUG_SESSION_START=ECLIPSE_DBGP&amp;KEY=some_number, similar to ?XDEBUG_SESSION_START=ECLIPSE_DBGP&amp;KEY=12276559562343</tt> </p> </li><li> <p>The number at the end of the URL changes for each launch </p> </li><li> <p>Once you resume execution, even if there are no more breakpoints, the launch in your debug view is still alive. It&apos;s just waiting for more requests triggered by browser actions. </p> </li><li> <p>For example: You have a form to debug. You can do so by starting a debug session and placing a breakpoint on the right spot to catch the form input after the user hits the submit button. The debug session will be terminate only when you hit the stop button on that. </p> </li></ul> </div> </div> <div class=\"section section-2\" id=\"src-30083033_PHPWebPageDebugging-UsingXDebugHelperbrowserextensiontoinitiateadebug\"> <h2 class=\"heading\"><span>Using XDebug Helper browser extension to initiate a debug</span></h2> <div class=\"section section-3\" id=\"src-30083033_PHPWebPageDebugging-Installation\"> <h3 class=\"heading\"><span>Installation</span></h3> <p>Using <a class=\"external-link external-link\" href=\"https://chrome.google.com/webstore/detail/eadndfjplgieldjbigjakmdgkmoaaaoc\" target=\"_blank\">XDebug Helper</a> will allow you to start a debug session directly from the Chrome browser. </p> <p>Once you install it, go to the Chrome Extensions (<tt class=\"\">chrome://chrome/extensions/</tt>) page and locate the XDebug Helper. Click &quot;Options&quot; and verify that the IDE key is &apos;<i class=\"\">Eclipse</i>&apos;, and that your localhost (at least) is set up in the <i>Domain Filters</i> list. </p> <p>You can trigger the helper from the bug-shaped icon located at the right side of the browser&apos;s address bar. Once the icon is green, and you access a PHP page on your server, a debug session will be initiated on the Studio side. </p> </div> <div class=\"section section-3\" id=\"src-30083033_PHPWebPageDebugging-Debugging\"> <h3 class=\"heading\"><span>Debugging</span></h3> <p>As mentioned before, using this tool allows you to start a session straight from the browser. </p> <p>So, for example, if you would like to debug the POST data that was send from an HTML form, you can turn on the XDebug Helper right before you click the &apos;send&apos; button. In case your Studio is opened and listens on port 9000, you will get a few notifications. The first would be about the session request, and the second would be for you to select the workspace resource that match the file you just hit. </p> <p><i class=\"\"><strong>Notes:</strong></i> </p> <ol class=\"\"><li class=\"\"> <p>The <strong>JIT</strong> (Just In Time) option must be turned on in the XDebug preferences (e.g. under Aptana Studio | Editors | PHP | Debug preference page for the XDebug client) </p> </li><li> <p>Since the XDebug Helper caches some cookies in the browser, it might be necessary to delete them if you are experiencing continuous session requests pop-ups in the Studio even when you turned off the helper. In some cases, turning the XDebug Helper off and on again can help clearing those cookies. </p> </li><li> <p>We have mentioned above the way a debug session is initiated. The difference with the XDebug Helper session is that the URL that triggers the debug session is constructed and called from the helper itself. Thus, the Studio might need to get more information regarding the source location and will ask you to provide it when needed. </p> </li></ol> </div> </div> <div class=\"section section-2\" id=\"src-30083033_PHPWebPageDebugging-DebugPorts\"> <h2 class=\"heading\"><span>Debug Ports</span></h2> <p>There are two debug port that the studio opens when loading. </p> <p>Port 9000 for the XDebug debugger and port 10000 for the Zend debugger. </p> <p>These ports can be controlled through a Preference: </p> <ul class=\"\"><li> <p>Preferences &gt; Aptana Studio &gt; Editors &gt; PHP &gt; Debug </p> </li></ul> <p>When launching a PHP session, the Studio will inform you in case that the port it&apos;s listening to does not match the XDebug port that was defined in the php.ini. </p> <p>For example, if the php.ini indicates that the XDebug debugger should contact port 9001, while the Studio listens on port 9000, a message box will indicate the problem and will direct you to change the listen port or the ini setting. </p> <div class=\"tablewrap\"> <table class=\"confluenceTable\"> <thead class=\"\"/><tfoot class=\"\"/><tbody> <tr> <td class=\"confluenceTd\" rowspan=\"1\" colspan=\"1\"> <p> <img src=\"images/download/attachments/30083033/XDebugPortNotification.jpg\" alt=\"images/download/attachments/30083033/XDebugPortNotification.jpg\" class=\"confluence-embedded-image\"> </img></p> </td> </tr> </tbody> </table> </div> </div> </div><a id=\"editButton\" href=\"https://wiki.appcelerator.org/pages/editpage.action?pageId=30083033\"><span>Edit</span></a> </div> </body> </html> ","title":"PHP Web Page Debugging"});