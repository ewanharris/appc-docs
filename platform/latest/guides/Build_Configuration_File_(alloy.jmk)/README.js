Ext.data.JsonP['Build_Configuration_File_(alloy.jmk)']({"guide":" <!doctype html> <html> <head> <title>Build Configuration File (alloy.jmk)</title> <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"> </meta></head> <body> <div class=\"container\"> <div class=\"header\"/> <div id=\"src-35620079\" class=\"content\"> <h1>Build Configuration File (alloy.jmk)</h1> <p>Alloy provides hooks to customize the compilation process using a special JavaScript file called a JS Makefile (JMK). The file needs to be named <tt class=\"\">alloy.jmk</tt> and located in the project&apos;s <tt>app</tt> directory. This file can be used for common administration tasks or to fine tune the build process. It will be loaded automatically by the Alloy command line during compilation. </p> <p>Example of a JMK file: </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"title\">alloy.jmk</div> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\" data-title=\"alloy.jmk\"> <div class=\"line\"><code class=\"plain\">task(</code><code class=\"string\">&apos;pre:compile&apos;</code><code class=\"plain\">, function(event, logger) {</code></div> <div class=\"line\"><code class=\"plain\"> logger.showTimestamp = </code><code class=\"keyword\">true</code><code class=\"plain\">;</code></div> <div class=\"line\"><code class=\"plain\"> logger.info(</code><code class=\"string\">&apos;building project at &apos;</code><code class=\"plain\">+ event.dir.project);</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">task(</code><code class=\"string\">&apos;post:compile&apos;</code><code class=\"plain\">, function(event, logger) {</code></div> <div class=\"line\"><code class=\"plain\"> logger.info(</code><code class=\"string\">&apos;compile finished!&apos;</code><code class=\"plain\">);</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> </div> </div> <p>To customize the build process, call the task function with the event name and provide a function callback, which will be called when the event is triggered by the compiler. </p> <p>These are the event names (or compiler tasks): </p> <ul class=\"\"><li class=\"\"> <p><tt class=\"\">pre:load:</tt> called after the project is cleaned and before copying any assets to the <tt>Resources</tt> folder. </p> </li><li class=\"\"> <p><tt>pre:compile</tt>: called before the compiler starts. </p> </li><li class=\"\"> <p><tt>post:compile</tt>: called after the compiler finishes but before it exits. </p> </li><li class=\"\"> <p><tt class=\"\">compile:app.js</tt>: called just after the compilation of the main <tt>app.js</tt> file but before the code is written to disk. </p> </li></ul> <p>The function callback provides two arguments: <tt class=\"\">event</tt> and <tt>logger</tt>. </p> <p>The <tt>event</tt> object provides a set of objects and values which may be useful for building tasks: </p> <div class=\"tablewrap\"> <table class=\"confluenceTable\"> <thead> <tr> <td class=\"confluenceTh\" rowspan=\"1\" colspan=\"1\"> <p>Object/Value </p> </td> <td class=\"confluenceTh\" rowspan=\"1\" colspan=\"1\"> <p>Description </p> </td> </tr> </thead><tfoot class=\"\"/><tbody> <tr> <td class=\"confluenceTd\" rowspan=\"1\" colspan=\"1\"> <p>adapters<br>(Array) </br></p> </td> <td class=\"confluenceTd\" rowspan=\"1\" colspan=\"1\"> <p>List of adapters. </p> </td> </tr> <tr> <td class=\"confluenceTd\" rowspan=\"1\" colspan=\"1\"> <p>alloyConfig<br>(Object) </br></p> </td> <td class=\"confluenceTd\" rowspan=\"1\" colspan=\"1\"> <p>Contains Alloy compiler configuration information. </p> <ul class=\"\"><li class=\"\"> <p><strong class=\"\">platform</strong> : either <tt class=\"\">android</tt>, <tt class=\"\">ios</tt> or <tt class=\"\">windows</tt>.<strong><br/></strong> </p> </li><li class=\"\"> <p><strong>file</strong>: file to target for selective compilation. </p> </li><li class=\"\"> <p><strong>deploytype</strong> : compilation environment type: either development, test or production. </p> </li><li class=\"\"> <p><strong class=\"\">beautify</strong> : if set to <tt>true</tt>, the output from UglifyJS will be beautified. </p> </li></ul> </td> </tr> <tr> <td class=\"confluenceTd\" rowspan=\"1\" colspan=\"1\"> <p>autoStyle<br>(Boolean) </br></p> </td> <td class=\"confluenceTd\" rowspan=\"1\" colspan=\"1\"> <p>If set to <tt>true</tt>, autostyle is enabled for the entire project. </p> </td> </tr> <tr> <td class=\"confluenceTd\" rowspan=\"1\" colspan=\"1\"> <p>dependencies<br>(Object) </br></p> </td> <td class=\"confluenceTd\" rowspan=\"1\" colspan=\"1\"> <p>Value of the <tt class=\"\">dependencies</tt> key in the <tt>config.json</tt> file. </p> </td> </tr> <tr> <td class=\"confluenceTd\" rowspan=\"1\" colspan=\"1\"> <p>dir<br>(Object) </br></p> </td> <td class=\"confluenceTd\" rowspan=\"1\" colspan=\"1\"> <p>Contains directory paths to various resources. </p> <ul class=\"\"><li class=\"\"> <p><strong class=\"\">home</strong> : absolute path to the Alloy project&apos;s <tt>app</tt> directory. </p> </li><li class=\"\"> <p><strong>project</strong> : absolute path to the Alloy project&apos;s root directory. </p> </li><li class=\"\"> <p><strong class=\"\">resources</strong> : absolute path to the Alloy project&apos;s <tt>Resource</tt> directory. </p> </li><li class=\"\"> <p><strong class=\"\">resourcesAlloy</strong> : absolute path to the Alloy project&apos;s <tt>Resource/alloy</tt> directory. </p> </li><li class=\"\"> <p><strong>assets</strong> : absolute path to the Alloy project&apos;s assets. </p> </li><li class=\"\"> <p><strong>config</strong> : absolute path to the Alloy project&apos;s config. </p> </li><li class=\"\"> <p><strong>controllers</strong> : absolute path to the Alloy project&apos;s controllers. </p> </li><li class=\"\"> <p><strong>migrations</strong> : absolute path to the Alloy project&apos;s migrations. </p> </li><li class=\"\"> <p><strong>models</strong> : absolute path to the Alloy project&apos;s models. </p> </li><li class=\"\"> <p><strong>styles</strong> : absolute path to the Alloy project&apos;s styles. </p> </li><li class=\"\"> <p><strong>themes</strong> : absolute path to the Alloy project&apos;s themes. </p> </li><li class=\"\"> <p><strong>views</strong> : absolute path to the Alloy project&apos;s views. </p> </li><li class=\"\"> <p><strong>widgets</strong> : absolute path to the Alloy project&apos;s widgets. </p> </li><li class=\"\"> <p><strong>builtins</strong> : absolute path to the Alloy tool builtins. </p> </li><li class=\"\"> <p><strong>template</strong> : absolute path to the Alloy tool templates. </p> </li></ul> </td> </tr> <tr> <td class=\"confluenceTd\" rowspan=\"1\" colspan=\"1\"> <p>sourcemap<br>(Boolean) </br></p> </td> <td class=\"confluenceTd\" rowspan=\"1\" colspan=\"1\"> <p>If <tt class=\"\">true</tt>, generates the source mapping files for use with the Studio debugger and other functions.<br>These files maps the generated Titanium files in the <tt class=\"\">Resources</tt> directory to the ones in the <tt>app</tt> directory. </br></p> </td> </tr> <tr> <td class=\"confluenceTd\" rowspan=\"1\" colspan=\"1\"> <p>theme<br>(String) </br></p> </td> <td class=\"confluenceTd\" rowspan=\"1\" colspan=\"1\"> <p>Name of the theme being used. </p> </td> </tr> <tr> <td class=\"confluenceTd\" rowspan=\"1\" colspan=\"1\"> <p>code<br>(String) </br></p> </td> <td class=\"confluenceTd\" rowspan=\"1\" colspan=\"1\"> <p><strong class=\"\">Only present for the <tt class=\"\">compile:app.js</tt> task.</strong> Contains the contents of the <tt>app.js</tt> file. </p> </td> </tr> <tr> <td class=\"confluenceTd\" rowspan=\"1\" colspan=\"1\"> <p>appJSFile<br>(String) </br></p> </td> <td class=\"confluenceTd\" rowspan=\"1\" colspan=\"1\"> <p><strong class=\"\">Only present for the <tt class=\"\">compile:app.js</tt> task.</strong> Contains the the absolute path to the <tt>app.js</tt> file. </p> </td> </tr> </tbody> </table> </div> <p> </p> <p>The <tt>logger</tt> object provides a reference to the logger, which defines the following methods and properties: </p> <div class=\"section section-2\" id=\"src-35620079_safe-id-QnVpbGRDb25maWd1cmF0aW9uRmlsZShhbGxveS5qbWspLVByb3BlcnRpZXM\"> <h2 class=\"heading\"><span>Properties</span></h2> <p><strong>DEBUG</strong>: Number READONLY<br>Output all log messages. </br></p> <p><strong>INFO</strong>: Number READONLY<br>Output all log messages except debug messages. </br></p> <p><strong>WARN</strong>: Number READONLY<br>Output only warning and error log messages. </br></p> <p><strong>ERROR</strong>: Number READONLY<br>Output only error log messages. </br></p> <p><strong>NONE</strong>: Number READONLY<br>Disable log messages. </br></p> <p><strong>logLevel</strong>: Number<br>Sets which log messages to output. </br></p> <p><strong>showTimestamp</strong>: Boolean<br>If true, outputs timestamp with the log messages. </br></p> <p><strong>stripColors</strong>: Boolean<br>If true, suppresses color output. </br></p> </div> <div class=\"section section-2\" id=\"src-35620079_safe-id-QnVpbGRDb25maWd1cmF0aW9uRmlsZShhbGxveS5qbWspLU1ldGhvZHM\"> <h2 class=\"heading\"><span>Methods</span></h2> <p><strong>debug (String msg)</strong><br>Outputs a debug log message. </br></p> <p>Parameters: </p> <ul class=\"\"><li> <p>msg : String<br>Message to output. </br></p> </li></ul> <p>Returns: </p> <ul class=\"\"><li> <p>void </p> </li></ul> <p><strong>info (String msg)</strong><br>Outputs an info log message. </br></p> <p>Parameters: </p> <ul class=\"\"><li> <p>msg : String<br>Message to output. </br></p> </li></ul> <p>Returns: </p> <ul class=\"\"><li> <p>void </p> </li></ul> <p><strong>warn (String msg)</strong><br>Outputs a warning log message. </br></p> <p>Parameters: </p> <ul class=\"\"><li> <p>msg : String<br>Message to output. </br></p> </li></ul> <p>Returns: </p> <ul class=\"\"><li> <p>void </p> </li></ul> <p><strong>error (String msg)</strong><br>Outputs an error log message. </br></p> <p>Parameters: </p> <ul class=\"\"><li> <p>msg : String<br>Message to output. </br></p> </li></ul> <p>Returns: </p> <ul class=\"\"><li> <p>void </p> </li></ul> </div> </div><a id=\"editButton\" href=\"https://wiki.appcelerator.org/pages/editpage.action?pageId=35620079\"><span>Edit</span></a> </div> </body> </html> ","title":"Build Configuration File (alloy.jmk)"});