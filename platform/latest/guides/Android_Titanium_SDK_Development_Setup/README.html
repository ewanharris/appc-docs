<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Android Titanium SDK Development Setup</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta content="Scroll EclipseHelp Exporter" name="generator"/>

    <link type="text/css" rel="stylesheet"/>
    <link type="text/css" rel="stylesheet"/>
    <link type="text/css" rel="stylesheet" media="print"/>
</head>
<body>
    <div class="container">
        <div class="header"/>

        <div id="29004964" class="content">
            <h1>Android Titanium SDK Development Setup</h1>
    <div class="section section-2 " id="29004964_AndroidTitaniumSDKDevelopmentSetup-Overview">
        <h2 class="heading "><span>Overview</span></h2>
    <p>
    <span style="color: #000000;">
This is a guide to setup the Android development environment to develop for Titanium Mobile.    </span>
    </p>
    </div>
    <div class="section section-2 " id="29004964_AndroidTitaniumSDKDevelopmentSetup-GettingStarted">
        <h2 class="heading "><span>Getting Started</span></h2>
<ol class=" "><li class=" ">    <p>
    <span style="color: #000000;">
Make sure you have the environment setup to build Titanium Mobile: <a class="document-link " href="#!/guide/Building_the_Titanium_SDK_From_Source">Building the Titanium SDK From Source</a>    </span>
    </p>
</li><li class=" ">    <p>
    <span style="color: #000000;">
Download Eclipse IDE:    </span>
     <span style="color: #000000;">
 <a class="external-link external-link" href="http://www.eclipse.org/downloads/" target="_blank">http://www.eclipse.org/downloads/</a>     </span>
     <span style="color: #000000;">
. After download finishes, unzip and run it. You'll need to create a new workspace if you don't have one already.    </span>
    </p>
</li><li class=" ">    <p>
    <span style="color: #000000;">
Uninstall CDT plug-in if you have it installed in Eclipse. Our setup will not work with CDT.    </span>
    </p>
</li><li class=" ">    <p>
    <span style="color: #000000;">
Install ADT. Instructions should be here:    </span>
     <span style="color: #000000;">
 <a class="external-link external-link" href="http://developer.android.com/sdk/eclipse-adt.html#installing" target="_blank">http://developer.android.com/sdk/eclipse-adt.html#installing</a>     </span>
    </p>
<ol class=" "><li class=" ">    <p>
    <span style="color: #000000;">
If you see a warning message of &quot;installing unsigned content&quot; during installation, click OK    </span>
    </p>
</li><li class=" ">    <p>
    <span style="color: #000000;">
Restart Eclipse after installation complete.    </span>
    </p>
</li></ol></li></ol>    <p>
    <span style="color: #000000;">
Set Up Eclipse Environment    </span>
    </p>
    <p>
After completing the getting started section:    </p>
<ol class=" "><li class=" ">    <p>
Import Projects. In Eclipse, File -&gt; Import -&gt; General -&gt; Existing Projects into Workspace.    </p>
<ol class=" "><li class=" ">    <p>
Click Next    </p>
</li><li class=" ">    <p>
Click Browse, then go into this directory: titanium_mobile/android (the path will vary- depends on where you clone the directory). Click Open.    </p>
</li><li class=" ">    <p>
Now you should see a number of projects under Projects. You can enable &quot;Copy projects into workspace&quot;, but I prefer not to, b/c if this is enabled, every time you pull from master, or rebuild titanium_mobile, your eclipse workspace will not get updated. Click Finish.    </p>
</li></ol></li><li class=" ">    <p>
Create a Java project named &quot;titanium-dist&quot;, File -&gt; New -&gt; Java Project. After you name the project, click Finish.<strong class=" "><br/></strong>    </p>
</li><li class=" ">    <p>
Create a lib folder inside titanium-dist and link it with titanium_mobile/dist/android directory. Right-click on titanium-dist project, New -&gt; Folder -&gt; enter name, then click Advanced -&gt; select Link to Alternate Location -&gt; Browse -&gt; select titanium_mobile/dist/android directory (titanium_mobile is the directory you cloned from step 6 above)    </p>
</li><li class=" ">    <p>
Run scons from terminal, then refresh your workspace. At this point, you should NOT see any errors. If you see odd errors, regarding DDMS...etc, try restarting Eclipse/ADB.    </p>
<ol class=" "><li class=" ">    <p>
NOTE: If you encounter an error to do with ANDROID_NDK not found, go to Eclipse-&gt;About Eclipse-&gt;Installation Details, remove the Android Native Development item.    </p>
</li></ol></li></ol>    </div>
    <div class="section section-2 " id="29004964_AndroidTitaniumSDKDevelopmentSetup-CreateTestProjectsinEclipse">
        <h2 class="heading "><span>Create Test Projects in Eclipse</span></h2>
    <p>
After the Eclipse environment is set-up, we are now ready to create a test project in Eclipse for debugging purposes.    </p>
<ol class=" "><li class=" ">    <p>
Create a new Android project named TitaniumTest:    </p>
<ol class=" "><li class=" ">    <p>
File -&gt; New -&gt; Project... -&gt; Android -&gt; Android Project.    </p>
</li><li class=" ">    <p>
Click Next -&gt; Select Google API 2.2 (API 8) - you may see two copies of each google APIs, just pick one.    </p>
</li><li class=" ">    <p>
Hit Next -&gt; enter Package Name: <strong class=" ">com.titanium.test</strong>    </p>
</li><li class=" ">    <p>
Click Finish.    </p>
</li></ol></li><li class=" ">    <p>
Create a new Titanium Project via TitaniumStudio with the exact same credentials:    </p>
<ol class=" "><li class=" ">    <p>
File -&gt; New -&gt; Titanium Mobile Project    </p>
</li><li class=" ">    <p>
Enter name: TitaniumTest, app Id: <strong class=" ">com.titanium.test</strong>    </p>
</li><li class=" ">    <p>
Click Finish.    </p>
</li></ol></li><li class=" ">    <p>
Under src/com.titanium.test/ , rename the class TitaninumTestActivity.java to TitaniumtestActivity.java. If Eclipse doesn't automatically update the classname, update it yourself. (This is necessary for the generated files in the next step)    </p>
</li><li class=" ">    <p>
Run the project you just created via TitaniumStudio on an Android device/emulator. This should generate a build folder in your Filesystem. Now in the Filesystem, go to Build -&gt; Android -&gt; gen -&gt; com -&gt; titanium -&gt; test -&gt; copy all the .java files except for R.java over to your Eclipse project. These files go to <strong class=" ">src/com/titanium/test</strong> on your Filesystem.    </p>
</li><li class=" ">    <p>
Replace the contents of your AndroidManfiest.xml in Eclipse with the one in TitaniumStudio, precisely build-&gt;Android-&gt;AndroidManifest.xml. If you see any errors like missing themes or icons, just delete those fields from your xml.    </p>
</li><li class=" ">    <p>
In your Eclipse Filesystem, create a folder named Resources in /assets, and copy Resources folder from your TitaniumStudio project to /assets/Resources. Creating a symlink between two folders <strong class=" ">will not</strong> work.    </p>
</li><li class=" ">    <p>
<del class=" ">In your Eclipse project, add necessary libraries to it. You can do this by right clicking on the project, go to Properties -&gt; Android, then under the Library section, click Add on the right side. You should see a list of options, add ALL of them (you can only add one at a time).</del> This won't actually work anymore with the latest Android SDK. The problem is that you won't be able to breakpoint in the Library project. In your Eclipse project, add necessary libraries to it: go to Properties -&gt;  Java Build Path -&gt; Projects. Add all the titanium projects. Now go to the next tab &quot;Libraries&quot;. Add JARS... select all the projects libraries (each time under bin folder). You have to do them one by one. Finally go to the last tab &quot;Order and Export&quot;, Select all the titanium projects + jars    </p>
<ol class=" "><li class=" ">    <p>
If you updated to ADT 22, there's an existing bug that will cause Eclipse environment to stop working. Here's the link to the issue:    </p>
</li></ol></li><li class="p1 ">    <p>
<a class="external-link external-link" href="https://code.google.com/p/android/issues/detail?id=55304" target="_blank">https://code.google.com/p/android/issues/detail?id=55304</a>.  To fix this, simply right-click on the project you want to run (NOT the library projects), Properties -&gt; Java Build Path -&gt; Order and Export -&gt; check Android Private Libraries box.    </p>
</li><li class=" ">    <p>
In your Eclipse project, in TitaniumtestApplication.java, remove the <strong class=" ">content</strong> inside verifyCustomModules method, but <strong class=" ">DON&quot;T</strong> remove the method.    </p>
</li><li class=" ">    <p>
Refresh your workspace, full clean and re-build    </p>
</li><li class=" ">    <p>
Run/Debug the project.    </p>
</li></ol>    </div>
    <div class="section section-2 " id="29004964_AndroidTitaniumSDKDevelopmentSetup-SettingupIntelliJIDEAEnvironment">
        <h2 class="heading "><span>Setting up IntelliJ IDEA Environment</span></h2>
<ol class=" "><li class=" ">    <p>
    <span style="color: #000000;">
Download and install IntelliJ IDEA here: <a class="external-link external-link" href="https://www.jetbrains.com/idea/download/" target="_blank">https://www.jetbrains.com/idea/download/</a>    </span>
    </p>
</li><li class=" ">    <p>
    <span style="color: #000000;">
Import Projects -&gt; Select your source (~/Titanium_Mobile/android) -&gt; choose &quot;Eclipse&quot; box, hit Next    </span>
    </p>
</li><li class=" ">    <p>
    <span style="color: #000000;">
Make sure format is &quot;.idea&quot;, hit Next     </span>
&gt; Now all projects should be selected, you want to <strong class=" ">unselect</strong> android-build and TitaniumTest, then hit Next    </p>
</li><li class=" ">    <p>
    <span style="color: #000000;">
Select Android 6.0 SDK (if this is your first time running InteillJ, you may need to set Android home path. If you don't see Android 6.0, you'll need to install Android 6.0). Click Finish.     </span>
    </p>
</li><li class=" ">    <p>
    <span style="color: #000000;">
Now you may see a &quot;Locate Eclipse Information&quot; box, click &quot;Cancel&quot;. A box &quot;Import from Eclipse&quot; may pop up, click &quot;Cancel&quot;. This will result in an error says unkown JDKs. If you're    </span>
    <span style="color: #000000;">
<br/>    </span>
seeing this, one or more projects imported is using the JDK that is not configured in Intellij. For instance, if you have JDK 1.7 on IntelliJ, and kroll-apt project is using 1.6, you'll see this. Click &quot;Ok&quot; for now.    <span style="color: #000000;">
<br/>    </span>
    </p>
</li><li class=" ">    <p>
    <span style="color: #000000;">
Now you may see the box &quot;Import Android dependencies from property files&quot;, check all and click &quot;Ok&quot;.    </span>
    </p>
</li><li class=" ">    <p>
This step assumes you have JDK 1.7 configured on IntelliJ. Do a quick Build &gt; Make Project. You should see the error &quot;Cannot start compiler... SDK is not specified for module kroll-apt&quot;.<br/>Click &quot;Ok&quot;, this should take you to &quot;Project Structure&quot; of kroll-apt, where you'll see &quot;JavaSE-1.6&quot; and &quot;ECLIPSE&quot; boxes red. Remove &quot;ECLIPSE&quot; by right click -&gt; remove. Then change &quot;Module SDK&quot; to 1.7.    </p>
</li><li class=" ">    <p>
In the same window, go through each module and remove &quot;com.android.ide.eclipse.adt.DEPENDENCIES&quot;. Click &quot;Ok&quot; once you're done.    </p>
</li><li class=" ">    <p>
Right click on &quot;titanium&quot; module &gt; Open Modules Settings &gt; Remove &quot;kroll-apt.jar&quot; &gt; Click on the &quot;+&quot; button at bottom left corner, choose Module Dependencies, then choose &quot;kroll-apt&quot;. Now check the export<br/>box for both &quot;kroll-apt&quot;, &quot;kroll-common&quot;, &quot;android-support-v7-cardview&quot; and &quot;android-support-v7-appcompat&quot;. Now change the scope of &quot;android-support-v7-cardview&quot; to &quot;Provided&quot;. Then go to each modules, and remove &quot;kroll-apt.jar&quot; if present.    </p>
</li><li class=" ">    <p>
Build -&gt; Rebuild Module, it should compile successfully.    </p>
</li><li class=" ">    <p>
If the build fails due to map, right click the map module &gt; Open Module Settings, and make sure the Module SDK is &quot;Android 6.0 Google APIs&quot;.    </p>
</li></ol>    </div>
    <div class="section section-2 " id="29004964_AndroidTitaniumSDKDevelopmentSetup-CreateTestProjectsinIntelliJ">
        <h2 class="heading "><span>Create Test Projects in IntelliJ</span></h2>
    <p>
This guide assumes you already have a working test project for Eclipse, if not please follow the procedure for creating one above.    </p>
<ol class=" "><li class=" ">    <p>
Import your Eclipse project over. (File -&gt; New -&gt; Module from existing sources)    </p>
</li><li class=" ">    <p>
Right click on your newly imported module, go to module settings, click on the &quot;+&quot; button on the bottom left, select &quot;Module Dependency&quot; and add everything on that list EXCEPT for kroll-common, appcompat and cardview.    </p>
</li><li class=" ">    <p>
Run &quot;scons&quot; if you haven't already. Forgetting to scons will result in runtime error.    </p>
</li><li class=" ">    <p>
Go to Build -&gt; Rebuild Project.    </p>
</li></ol>    </div>
    <div class="section section-2 " id="29004964_AndroidTitaniumSDKDevelopmentSetup-Formatting">
        <h2 class="heading "><span>Formatting</span></h2>
    <p>
For formatting we will follow Android's formatting style.  You can follow the eclipse formatting rules at <a class="external-link external-link" href="https://source.android.com/source/using-eclipse.html#eclipse-formatting" target="_blank">https://source.android.com/source/using-eclipse.html#eclipse-formatting</a>.    </p>
    <p>
You can download the formatting file here: <a class="attachment-link " href="./attachments_39846449_1_android-formatting.xml">android-formatting.xml</a>    </p>
    </div>
    <div class="section section-2 " id="29004964_AndroidTitaniumSDKDevelopmentSetup-Troubleshooting">
        <h2 class="heading "><span>Troubleshooting</span></h2>
    <p>
Additional troubleshooting information can be found at <a class="document-link unresolved" href="#!/guide/Android_Titanium_SDK_Development_Setup">SDK Developer Troubleshooting</a>    </p>
    </div>
        </div><a id="editButton" href="https://wiki.appcelerator.org/pages/editpage.action?pageId=29004964"><span>Edit</span></a>
    
        <div class="footer">
            Created with <a href="http://k15t.com/display/web/Scroll-Wiki-EclipseHelp-Exporter-for-Confluence" target="_blank">Scroll EclipseHelp Exporter for Confluence</a>.
        </div>
    </div>
</body>
</html>
