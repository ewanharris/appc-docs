Ext.data.JsonP['Models_-_Access_a_Model']({"guide":" <!doctype html> <html> <head> <title>Models - Access a Model</title> <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"> </meta></head> <body> <div class=\"container\"> <div class=\"header\"/> <div id=\"src-49153277\" class=\"content\"> <h1>Models - Access a Model</h1> <p>Any callback in the application that is passed the <tt class=\"\">request</tt> object can access the Models programmatically. If the <tt class=\"\">actions</tt> property in the model definition is set, some of the methods cannot be invoked. The <tt>actions</tt> property restricts which CRUD operations can be invoked on the models. </p> <ol class=\"\"><li class=\"\"> <p>Retrieve an instance to API Builder using the <tt>request.server</tt> property. </p> </li><li class=\"\"> <p>Retrieve the Model instance using API Builder&apos;s <tt>getModel(&apos;name&apos;)</tt> method by passing it the name of the model. </p> </li><li class=\"\"> <p>Invoke one of the following methods on the Model instance and pass it a callback function, which is passed an <tt class=\"\">error</tt> and <tt>results</tt> object: </p> <ul class=\"\"><li class=\"\"> <p class=\"highlight javascript\"><tt>create(object, callback)</tt>: Creates a model </p> </li><li class=\"\"> <p class=\"highlight javascript\"><tt>query(options, callback)</tt>: Retrieves models specified by the query </p> </li><li class=\"\"> <p class=\"highlight javascript\"><tt>findAll(callback)</tt>: Retrieves all models </p> </li><li class=\"\"> <p class=\"highlight javascript\"><tt>findById(id, callback)</tt>: Retrieves the model specified by the id parameter </p> </li><li class=\"\"> <p class=\"highlight javascript\"><tt>update(instance, callback)</tt>: Updates the passed model </p> </li><li class=\"\"> <p class=\"highlight javascript\"><tt>deleteAll(callback)</tt>: Deletes all models </p> </li><li class=\"\"> <p class=\"highlight javascript\"><tt>delete(instance, callback)</tt>: Deletes the passed model </p> </li></ul></li></ol> <p><strong>Example</strong>: </p> <p>The Route example below retrieves all car model. </p> <div class=\"confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code\"> <div class=\"title\">web/routes/testroute.js</div> <div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"defaultnew syntaxhighlighter scroll-html-formatted-code\" data-title=\"web/routes/testroute.js\"> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> Arrow = require(</code><code class=\"string\">&apos;arrow&apos;</code><code class=\"plain\">);</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"keyword\">var</code><code class=\"plain\"> TestRoute = Arrow.Router.extend({</code></div> <div class=\"line\"><code class=\"plain\"> name: </code><code class=\"string\">&apos;car&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> path: </code><code class=\"string\">&apos;/car&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> method: </code><code class=\"string\">&apos;GET&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> description: </code><code class=\"string\">&apos;get some cars&apos;</code><code class=\"plain\">,</code></div> <div class=\"line\"><code class=\"plain\"> action: </code><code class=\"keyword\">function</code><code class=\"plain\"> (req, res, next) {</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">var</code><code class=\"plain\"> model = req.server.getModel(</code><code class=\"string\">&apos;car&apos;</code><code class=\"plain\">);</code></div> <div class=\"line\"><code class=\"plain\"> model.findAll(</code><code class=\"keyword\">function</code><code class=\"plain\">(err, results){</code></div> <div class=\"line\"><code class=\"plain\"> </code><code class=\"keyword\">if</code><code class=\"plain\"> (err) {</code></div> <div class=\"line\"><code class=\"plain\"> next(err);</code></div> <div class=\"line\"><code class=\"plain\"> } </code><code class=\"keyword\">else</code><code class=\"plain\"> {</code></div> <div class=\"line\"><code class=\"plain\"> req.log.info(</code><code class=\"string\">&apos;got cars &apos;</code><code class=\"plain\"> + JSON.stringify(results));</code></div> <div class=\"line\"><code class=\"plain\"> res.render(</code><code class=\"string\">&apos;car&apos;</code><code class=\"plain\">, {cars:results});</code></div> <div class=\"line\"><code class=\"plain\"> }</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\"> });</code></div> <div class=\"line\"><code class=\"plain\"> }</code></div> <div class=\"line\"><code class=\"plain\">});</code></div> <div class=\"line\">&#xA0;</div> <div class=\"line\"><code class=\"plain\">module.exports = TestRoute;</code></div> </div> </div> </div><a id=\"editButton\" href=\"https://wiki.appcelerator.org/pages/editpage.action?pageId=49153277\"><span>Edit</span></a> </div> </body> </html> ","title":"Models - Access a Model"});